---
title: "第１回データ分析勉強会"
author: "分析環境の構築と動作環境 [鈴木さんぽう, CC BY-NC-SA 4.0]"
date: "`r format(Sys.Date(), format = '%Y年%m月%d日')`"
output:
  ioslides_presentation:
    df_print: paged
    smaller: false
    widescreen: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE)

require(tidyverse)
```


## 本日の内容
1. 分析環境の構築と確認（午前）
    * R/Rtools/R Commanderのインストールと動作確認
    * RStudioのインストールと動作確認
1. RStudioを使ってみる（午前）
    * オプション設定
    * パッケージのインストールと更新
    * プロジェクトの作成と動作確認
1. R Markdownで作る自己紹介（午後）
    * 自己紹介資料の作成
    * 作成した資料を用いた自己紹介


# 分析環境の構築と確認
## 利用OSでグループを分け
OSによりインストール方法などが異なりますので、環境構築時はOSごとにチームを分けます。R利用経験者は分散してサポートをお願いします。  

### **Windows**
* 一番人数が多いと思われるので1チーム3〜4人程度で

### **macOS**
* おそらく1チームで足りるかと人数が多ければ2チームで

### **linux(Ubuntu)**
* いないと思いますが...


## Rのインストールと動作確認
環境を統一するためにRは本日時点での最新バージョン（R 3.x.x）を使います。追加パッケージも最新バージョンを使います。  

### **Rのインストール**
[Rのインストール方法](../../program/env_install.html)を参考にインストールを行ってください。macOSの方はサポーターの方からレクチャしてもらってください。  

### **Rの動作確認**
インストールが終わったらRのコンソールから以下を実行しグラフが表示されることを確認します。
```{r, eval=FALSE}
plot(iris)
```


## 動作確認結果
```{r}
plot(iris)
```


## リカバリタイム
うまく動作しない場合は動作環境などを確認しますのでサポートメンバー各位ご協力をお願いします。  

1. 何が動作しないのかを**説明して**ください
    * コンソールにメッセージが出ている場合はそれを教えてください
1. **管理者権限**で起動してみてください
1. それでも動かない場合は**Rのインストール先を変更**（Program Filesフォルダ以外の任意のフォルダへ）してみます
    * `C:\usr\bin\R`、`C:\R` など


## ツールのインストール（Windows Only）
Windows環境の方は**`Rtools`**というツール群をインストールしておきます。これはパッケージがzip形式で提供されていない場合にインストール時に必要となるツールです

### **Rtoolsのインストール**
[Rtoolsのインストール方法](../../program/env_install_tls.html)を参考にインストールを行ってください。Windows環境以外の方はインストールの必要はありません。

### **Rtoolsの動作確認**
動作確認方法は特にありません。インストーラでエラーが出ていないことは確認しておいて下さい。


## R Commanderのインストールと動作確認
### **R Commanderのインストール**
[R Commanderのインストール方法](../../program/env_install_rcmdr.html)を参考にインストールを行ってください。

### **R Commanderの動作確認**
[R Commanderのインストール方法](../../program/env_install_rcmdr.html)にある動作確認を行ってください。


<!-- ## 動作確認結果 -->
<!-- ```{r, echo=FALSE} -->
<!-- car::scatterplotMatrix(~Petal.Length+Petal.Width+Sepal.Length+Sepal.Width, -->
<!--                        reg.line=FALSE, smooth=FALSE, spread=FALSE, span=0.5, -->
<!--                        ellipse=FALSE, levels=c(.5, .9), id.n=0, -->
<!--                        diagonal = 'density', data=iris) -->
<!-- ``` -->


## リカバリタイム
うまく動作しない場合は動作環境などを確認しますのでサポートメンバー各位ご協力をお願いします。  

1. 何が動作しないのかを**説明して**ください
    * コンソールにメッセージが出ている場合はそれを教えてください
1. **管理者権限**で起動してみてください
1. それでも動かない場合は**Rのインストール先を変更**（Program Filesフォルダ以外の任意のフォルダへ）してみます
    * `C:\usr\bin\R`、`C:\R` など


# 休憩（５分）


# RStudioのインストールと動作確認

## 利用するバージョン
環境を統一するためにRStudioは本日時点での最新バージョン（v1.1.xxx）を使います。

### **インストール先の確認**
Rをデフォルトのインストール先から変更した方はRStudioのインストール先も変更しておいた方が無難です。なお、インストールには管理者権限が必要です。

1. Program Filesフォルダ（標準インストール先だが実行時に管理者権限要）
1. 上記を除く任意のフォルダ（面倒が少ないがUACが無効になる）
    * `C:\usr\bin\R`、`C:\R` など

### **RStudioのインストール**
インストーラを起動したら手順にしたがってインストールしてください。動作確認などはこの後で行います。


## リカバリタイム
うまく動作しない場合は動作環境などを確認しますのでサポートメンバー各位ご協力をお願いします。  

1. 何が動作しないのかを**説明して**ください
    * コンソールにメッセージが出ている場合はそれを教えてください
1. **管理者権限**で起動してみてください
1. それでも動かない場合は**Rのインストール先を変更**（Program Filesフォルダ以外の任意のフォルダへ）してみます
    * `C:\usr\bin\R`、`C:\R` など


# 休憩（５分）


# RStudioを使ってみる
## RStuioの起動
RStudioを起動してください。Windows環境でCPU性能があまり高くない場合（第三世代 Core i3とか）は起動や動作が緩慢ですので、しばらく待ってみてください。それでも起動しない場合は、一度、強制終了さてて、再度起動してみてください。

### **RStudioの概要説明**
[RStudioの使い方](../../program/basics_rstudio.html)を参照しながら聞いてください。

### **オプション設定**
[RStudioの使い方](../../program/basics_rstudio.html)にしたがってオプション設定をします。オプション設定は推奨ですので必ずしもこの通りにする必要はありません。お好みで設定してください。

<!-- 設定         | 設定場所                                     | 設定値 -->
<!-- -------------|----------------------------------------------|---------------- -->
<!-- 作業フォルダ | [Tools]-[Global Options...]-[General]        | 任意のフォルダ^1^ -->
<!-- タブ         | [Tools]-[Global Options...]-[Code]-[Editing] | Tab with 2 -->
<!-- エンコード   | [Tools]-[Global Options...]-[Code]-[Saving]  | UTF-8 -->
<!-- CRAN mirror  | [Tools]-[Global Options...]-[Packages]       | Global(CDN) -->
<!-- preview in   | [Tools]-[Global Options...]-[R Markdown]     | Viewer Pane -->
<!-- show output  | [Tools]-[Global Options...]-[R Markdown]     | inline -->
<!-- 　   -->
<!-- ^1^ 日本語や空白が入ってないこと（特にWindows） -->


## パッケージのインストール
[パッケージのインストール方法](../../program/env_install_pkg.html#rstudioからインストールする方法)にしたがって以下の追加パッケージのインストールを行います。

* **`knitr`**, **`rmarkdown`**, **`tidyverse`**

### **パッケージの更新**
パッケージのインストールが完了したらパッケージの更新を行います。RStudioのパッケージ・ペインで［Update］ボタンをクリックして更新パッケージの有無を確認してください。


## リカバリタイム
うまく動作しない場合は動作環境などを確認しますのでサポートメンバー各位ご協力をお願いします。  

1. 何が動作しないのかを**説明して**ください
    * コンソールにメッセージが出ている場合はそれを教えてください
1. **管理者権限**で起動してみてください
1. それでも動かない場合は**R/RStudioのインストール先を変更**（Program Filesフォルダ以外の任意のフォルダへ）してみます
    * `C:\usr\bin\R`、`C:\R` など


## プロジェクトの作成と動作確認
### プロジェクトの作成
1. ［File］-［New Project...］から「test」という名前の空プロジェクトを作ります
    * プロジェクトは日本語や空白の入っていないパスにしてください

## 動作確認
### Rmdファイルのコンパイル
プロジェクトが作成作成されたらR Markdownファイルをコンパイル（レンダリング）してみます。

1. ［File］-［New File］-［R Markdown...］メニューを選択する
1. ダイアログで［Document］-［HTML］を選択する（Tilteと名前はそのままでもOK）
1. ［OK］ボタンをクリックする
<!-- 1. ファイルペインの［More］-［Show Folder in New Window］でプロジェクトフォルダを開く -->
<!-- 1. テンプレートのRmdファイルをプロジェクトフォルダにコピーする -->
<!-- 1. RStudioでコピーしたRmdファイルを開く -->
1. ［knitr］ボタンをクリックするとファイル保存ダイアログが開く
1. 「test」という名前で保存する（拡張子は指定しなくてもOK）
1. レンダリングが開始され［Viewer］ペインにレンダリング結果が表示される


# 昼休み（１時間）


# R Markdownで作る自己紹介

## 自己紹介テンプレートの確認
* テンプレートはHTML系のプレゼンテーションフォーマットです
* 見出しなどは適宜変更してください
    * お名前（ニックネームやその由来）
    * ふるさと自慢・お国自慢（出身地紹介）
    * こんなことをやってきました・こんなエピソードあります（経歴）
    * 好きなもの嫌いなもの（趣味・興味・嗜好・特技）
    * こんな夢があります
    * こんなことに感動した・これは紹介しておきたい等々
* テンプレートが**`knit`**出来ることを確認します

## 自己紹介の作成
* 一人５分程度の自己紹介ができるような資料を作成してください
* 自己紹介内容は問いませんのでテンプレートは適宜変更してください
* ヘルプなどを参考にして色々とやってみても構いません
* 最後に作成した資料で発表をしていただきます
* 休憩は適宜取ってください

## 自己紹介タイム
* 一人５分程度でお願いします

---

CC BY-NC-SA 4.0, Sampo Suzuki