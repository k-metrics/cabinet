<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>第5章 例題・演習解答例</title>

<script src="site_libs/jquery-1.12.4/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<script src="site_libs/htmlwidgets-1.0/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="site_libs/datatables-binding-0.4/datatables.js"></script>
<link href="site_libs/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="site_libs/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="site_libs/dt-core-1.10.16/js/jquery.dataTables.min.js"></script>
<link href="site_libs/dt-ext-scroller-1.10.16/css/scroller.dataTables.min.css" rel="stylesheet" />
<script src="site_libs/dt-ext-scroller-1.10.16/js/dataTables.scroller.min.js"></script>
<link href="site_libs/dt-ext-fixedcolumns-1.10.16/css/fixedColumns.dataTables.min.css" rel="stylesheet" />
<script src="site_libs/dt-ext-fixedcolumns-1.10.16/js/dataTables.fixedColumns.min.js"></script>
<link href="site_libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = false;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Model/Infer</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-bar-chart"></span>
     
    基礎知識
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="sampling.html">様々なサンプリング</a>
    </li>
    <li>
      <a href="norm.html">正規性の確認</a>
    </li>
    <li class="dropdown-header">等分散性の確認</li>
    <li>
      <a href="t_test.html">平均値の差の検定</a>
    </li>
    <li class="dropdown-header">ソルバー</li>
    <li class="dropdown-header">分散分析</li>
    <li class="dropdown-header">回帰分析</li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-book"></span>
     
    書籍
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">データ指向のソフトウェア品質マネジメント</li>
    <li class="divider"></li>
    <li class="dropdown-header">ソフトウェアメトリクス統計分析入門</li>
    <li>
      <a href="./smsa_1.html">　第１章 例題・演習回答例</a>
    </li>
    <li>
      <a href="./smsa_2.html">　第２章 例題・演習回答例</a>
    </li>
    <li>
      <a href="./smsa_3.html">　第３章 例題・演習回答例</a>
    </li>
    <li>
      <a href="./smsa_4.html">　第４章 例題・演習回答例</a>
    </li>
    <li>
      <a href="./smsa_5.html">　第５章 例題・演習回答例</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">統計学基礎</li>
    <li class="dropdown-header">　第１章 演習回答例</li>
    <li class="dropdown-header">　第１章 演習回答例</li>
    <li class="dropdown-header">　第２章 演習回答例</li>
    <li class="dropdown-header">　第３章 演習回答例</li>
    <li class="dropdown-header">　第４章 演習回答例</li>
    <li class="dropdown-header">　第５章 演習回答例</li>
    <li class="dropdown-header">　第６章 演習回答例</li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-graduation-cap"></span>
     
    gacco
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">社会人のためのデータサイエンス入門</li>
    <li class="dropdown-header">社会人のためのデータサイエンス演習</li>
    <li class="dropdown-header">誰でも使える統計オープンデータ</li>
    <li class="divider"></li>
    <li class="dropdown-header">統計学I</li>
    <li class="dropdown-header">統計学II</li>
    <li class="dropdown-header">統計学III</li>
  </ul>
</li>
<li>
  <a href="./about.html">About</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-github"></span>
     
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../index.html">Cabinet</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../import/index.html">Import</a>
    </li>
    <li>
      <a href="../tidy/index.html">Tidy/Transform</a>
    </li>
    <li>
      <a href="./index.html">
        <span class="fa fa-home"></span>
         
        Model/Infer
      </a>
    </li>
    <li>
      <a href="../visualize/index.html">Visualize</a>
    </li>
    <li>
      <a href="../communicate/index.html">Communicate/Automate</a>
    </li>
    <li>
      <a href="../program/index.html">Program</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="https://github.com/k-metrics/cabinet">
        <span class="fa fa-github"></span>
         
        GitHub Repository
      </a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="https://sites.google.com/site/kantometrics/home">
        <span class="fa fa-google"></span>
         
        データ分析勉強会
      </a>
    </li>
  </ul>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">第5章 例題・演習解答例</h1>

</div>


<!-- Include shared Links -->
<!-- SQiP and others -->
<!-- Books -->
<!-- 共立出版 -->
<!-- 日科技連出版 -->
<!-- O'Reilly Japan -->
<!-- 東京図書 -->
<!-- Docker -->
<!-- eBooks -->
<!-- Net Community -->
<!-- Style Guide -->
<!-- Creative Commons -->
<!-- Others -->
<!-- R -->
<!-- R Packages -->
<!-- RStudio -->
<!-- Docker -->
<!-- Cabinet Pages -->
<p>本資料は『<a href="http://www.juse-p.co.jp/cgi-bin/html.pl5?i=ISBN978-4-8171-9558-6" target="_blank" title="ソフトウェアメトリクス統計分析入門">ソフトウェアメトリクス統計分析入門 <i class="fa fa-external-link"></i></a>』(以降、テキストと記載)の第4章の例題を<a href="https://www.r-project.org/" target="_blank" title="The R Project">R <i class="fa fa-external-link"></i></a>で解いた際の解答例を示したものです。また、<a href="http://rmarkdown.rstudio.com/" target="_blank" title="R Markdown from RStudio Inc">R Markdown <i class="fa fa-external-link"></i></a>を使うメリットを示すための一手段として作成していますので、テキストにおける計算方法とは異なる部分もあります。本資料で使用しているデータの入手に関してはテキストにてご確認下さい。<br />
本資料がHTML形式の場合、<a href="https://www.r-project.org/" target="_blank" title="The R Project">R <i class="fa fa-external-link"></i></a>のコードを参照するには右側にある<strong><code>[Code]</code></strong>ボタンをクリックして下さい。なお、JavaScriptは必ずOnにしてご覧下さい。<br />
　</p>
<div id="例題5.1" class="section level1">
<h1>例題5.1</h1>
<blockquote>
<p>第1章の例題1.1と同じ状況を想定します。 図5.1に示す『ソフトウェア開発データ白書2014-2015』をベンチマークとして、あるプロジェクトのFP生産性0.09 FP/人時の金融業界における位置づけを調べてください。 例題1.1との違いは、データ白書の2014-2015版データを使う点です。そちらの版は5数要約値だけではなく、2012-2013版にはなかった生データも公開されています。 以下に「K：金融・保険業」のFP生産性の生データを掲載してあります． 出典：SECデータ白書2014-2015版のダウンロードデータ graph_data_9.xlsxの9-1-9, 10シートのデータで 業種（大分類）を「K：金融・保険業」でフィルタリングしたもの</p>
</blockquote>
<blockquote>
<p>生産性の測定を開始し、あるプロジェクトの生産性が0.09FP/人時となりました。まだデータをとり始めたばかりなので、この0.09という値の良否が判断できません。 そこで、『ソフトウェア開発データ白書』をベンチマークとして、業界内において、どの程度の位置づけとなるのかを調べることにしました。<br />
『ソフトウェア開発データ白書2012-2013』のp.288に業種別FP生産性データが掲載されています。それを図1.1に示します。この組織の業種は、「K. 金融・保険業」に該当します。さて、このプロジェクトの生産性をどのように評価すればよいでしょうか。<br />
出典：ソフトウェアメトリクス統計分析入門 P12</p>
</blockquote>
<div id="データの設定" class="section level2">
<h2>データの設定</h2>
<p>本例題で利用するデータは予めCSVファイルとして保存されているものとします。</p>
<pre class="r"><code>file &lt;- &quot;./data/ex_5.csv&quot;
x &lt;- read.csv(file, header = TRUE, sep = &quot;,&quot;, fileEncoding = &quot;UTF-8&quot;)

df_print(x)</code></pre>
<div id="htmlwidget-b03695e0abbf70cbaded" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-b03695e0abbf70cbaded">{"x":{"filter":"none","extensions":["Scroller","FixedColumns"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97"],[0.0306966978788816,0.0520381332331645,0.047350157447302,0.00522337906719466,0.0215859601915793,0.111457219814787,0.0211866971755106,0.0183763329206438,0.0253828114222651,0.0643776824034335,0.0472051189182663,0.0502,0.0999981712112068,0.0291003013344813,0.0484472049689441,0.20210027100271,0.120176600441501,0.0497501784439686,0.198223350253807,0.0609886746250383,0.0591895583548338,0.0207699215151197,0.038221453951791,0.0143880667136481,0.035650623885918,0.0543910124674613,0.0552822341057635,0.0206483439041579,0.0314879949266895,0.031108351443651,0.0518158686097617,0.0501820277101176,0.0244239141977275,0.0290769966523195,0.0344591510725696,0.0352517492633679,0.0742857142857143,0.0202066911893501,0.0147924020843839,0.0934734513274336,0.0269205076820307,0.0439146600284041,0.0367906066536203,0.0826666666666667,0.0356991206865176,0.0222222222222222,0.0821693720900969,0.0997298156389066,0.0699072839835303,0.0450270546921919,0.0233661920408908,0.0701704545454546,0.0664462578136377,0.0528625156707062,0.0354848484848485,0.0909810126582278,0.137922918505443,0.140862745098039,0.0479217603911981,0.075,0.0703812316715543,0.0404040404040404,0.116,0.0387493496050329,0.0423037716615698,0.100374531835206,0.0576298701298701,0.0421933621933622,0.117460317460317,0.165429808286951,0.0646137488242751,0.0401070990666366,0.0493567537851781,0.0618439576181185,0.0132976533552902,0.037070838765754,0.116428571428571,0.0367745249101181,0.0417753738466433,0.0566398334379644,0.0477061604618565,0.0810987573577502,0.0894564231386505,0.025919228450874,0.0429225237005557,0.0344193548387097,0.0767676767676768,0.0153654300093529,0.0340043100755825,0.0637458693103081,0.0262453595786929,0.0274972902048035,0.0778702892199825,0.0760479655631854,0.038710303030303,0.0228218622089224,0.0387924723310796]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>FP生産性<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"deferRender":true,"dom":"t","scroller":false,"scrollY":250,"fixedColumns":true,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":1},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="fp生産性の特徴" class="section level2">
<h2>FP生産性の特徴</h2>
<p>業種別FP生産性データの特徴を把握するためにヒストグラムを描き、その上にあるプロジェクトでのFP生産性0.09をプロットしてみます。</p>
<pre class="r"><code># fivenum(x[, 1], na.rm = TRUE)
summary(x)</code></pre>
<pre><code>##     FP生産性       
##  Min.   :0.005223  
##  1st Qu.:0.031488  
##  Median :0.047350  
##  Mean   :0.056776  
##  3rd Qu.:0.070381  
##  Max.   :0.202100</code></pre>
<pre class="r"><code>x %&gt;% 
  ggplot(aes(x[, 1])) +
  # geom_histogram(binwidth = diff(hist(x[, 1], plot = FALSE)$breaks)[1]) +
  geom_histogram(breaks = pretty(x[, 1], n = nclass.Sturges(x[, 1]))) +
  geom_vline(xintercept = 0.09, colour = &quot;red&quot;) +
  xlab(&quot;FP生産性&quot;)</code></pre>
<p><img src="smsa_5_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>あるプロジェクトのFP生産性（0.09）は、ヒストグラムを見てもわかるように業種別FP生産性の平均値ならびに中央値よりも上側にあることが分かりますが、ヒストグラムが右に歪んだ形であるため、どの程度の位置にあるかの判断が難しいです。</p>
<p>そこで、業種別FP生産性のデータを対数変換してみます。</p>
<pre class="r"><code>log.x &lt;- log10(x)

log.x %&gt;%
  ggplot(aes(log.x[, 1])) +
  # geom_histogram(binwidth = diff(hist(log.x[, 1], plot = FALSE)$breaks)[1]) +
  geom_histogram(breaks = pretty(log.x[, 1], n = nclass.Sturges(log.x[, 1]))) +
  geom_vline(xintercept = log10(0.09), colour = &quot;red&quot;) +
  xlab(&quot;FP生産性&quot;)</code></pre>
<p><img src="smsa_5_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<pre class="r"><code>log.x %&gt;% 
  ggplot(aes(sample = log.x[, 1])) +
  geom_qq()</code></pre>
<p><img src="smsa_5_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code>shapiro.test(log.x[, 1])</code></pre>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  log.x[, 1]
## W = 0.98976, p-value = 0.6657</code></pre>
<p>対数変換後のFP生産性データは概ね正規分布にしたがっていることから、あるプロジェクトのFP生産性（0.09）の上位確率を正規分布の確率関数から求めてみます。</p>
<pre class="r"><code>pnorm(log10(0.09), mean = mean(log.x[, 1]), sd = sd(log.x[, 1]), lower.tail = FALSE)</code></pre>
<pre><code>## [1] 0.1519098</code></pre>
<p>これよりあるプロジェクトのFP生産性（0.09）は業種別FP生産性データと比較すると上位15%程度に位置するデータであると判断できます。</p>
</div>
</div>
<div id="演習-5.1" class="section level1">
<h1>演習 5.1</h1>
<blockquote>
<p>以下にモジュールごとのテストケース密度のデータがあります。 テストケース密度とは、対象モジュールで実施されたテストケース数を対象モジュールの行数（KLOC）で割ったものです。 これが少な過ぎる場合はテスト不足でNGと考え、下限の基準値を設定することにします。 まずは、対数変換せずに第1章の例題1.2と同様の考え方を用いて、基準を下回る割合が10％になるように基準値を設定してください。 そこでの問題点について考察し、その後に対数変換をして基準値を設定してください。</p>
</blockquote>
<div id="データの設定-1" class="section level2">
<h2>データの設定</h2>
<p>本例題で利用するデータは予めCSVファイルとして保存されているものとします。</p>
<pre class="r"><code>file &lt;- &quot;./data/ex5_1.csv&quot;
x &lt;- read.csv(file, header = TRUE, sep = &quot;,&quot;, row.names = 1, 
              fileEncoding = &quot;UTF-8&quot;)

x %&gt;% 
  dplyr::select(&quot;テストケース密度&quot; = tests) %&gt;% 
  df_print(x)</code></pre>
<div id="htmlwidget-ece8621a20f2454bbe39" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-ece8621a20f2454bbe39">{"x":{"filter":"none","extensions":["Scroller","FixedColumns"],"data":[["Module001","Module002","Module003","Module004","Module005","Module006","Module007","Module008","Module009","Module010","Module011","Module012","Module013","Module014","Module015","Module016","Module017","Module018","Module019","Module020","Module021","Module022","Module023","Module024","Module025","Module026","Module027","Module028","Module029","Module030","Module031","Module032","Module033","Module034","Module035","Module036","Module037","Module038","Module039","Module040","Module041","Module042","Module043","Module044","Module045","Module046","Module047","Module048","Module049","Module050","Module051","Module052","Module053","Module054","Module055","Module056","Module057","Module058","Module059","Module060","Module061","Module062","Module063","Module064","Module065","Module066","Module067","Module068","Module069","Module070","Module071","Module072","Module073","Module074","Module075","Module076","Module077","Module078","Module079","Module080","Module081","Module082","Module083","Module084","Module085","Module086","Module087","Module088","Module089","Module090","Module091","Module092","Module093","Module094","Module095","Module096","Module097","Module098","Module099","Module100"],[92.24,112.43,7.5,58.92,82.93,66.64,77.66,188.93,162.29,90.17,25.45,100.12,50.37,56.71,48.23,69.67,39.11,41.83,65.05,44.3,39.73,16.5,79.24,64.7,14.6,11.97,26.67,162,40.93,45.92,36.76,44.76,54.06,118.62,118.11,30.53,40.6,45.75,40,35.94,32.59,59.45,1.5,15.5,26.39,32.62,7.5,144.5,7,1.5,29.35,27.2,24.55,30,23.39,20.76,41.21,16,39.71,15,10.5,15.5,155,31.06,15.5,37.5,23.74,35.17,29.58,35.4,8,25,24.47,18.99,15,31.99,15.95,20,10.67,4.5,23.64,13,50,22,17.93,20.11,221.63,12.54,266.5,21.55,2.34,25,5,9,8.53,325,10,15,9,17.5]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>テストケース密度<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"deferRender":true,"dom":"t","scroller":false,"scrollY":250,"fixedColumns":true,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":1},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="未変換時" class="section level2">
<h2>未変換時</h2>
<pre class="r"><code># 下側10%のZスコア（基準Zスコア）
lower.10.z &lt;- qnorm(0.1, mean = 0, sd = 1)
# 基準Zスコアから実値に逆変換して基準値を求める
lower.10.value &lt;- (lower.10.z * sd(x[, 1])) + mean(x[, 1])

# 階級の設定
breaks &lt;- pretty(x[, 1], n = nclass.Sturges(x[, 1]), min.n = 1)

# ヒストグラムと基準値を描く
x %&gt;% 
  ggplot(aes(x[, 1])) +
    geom_histogram(breaks = breaks) +
    geom_vline(xintercept = lower.10.value, linetype = &quot;dotted&quot;,
               colour = &quot;red&quot;) +
    xlab(&quot;テストケース密度&quot;) + ylab(&quot;頻度&quot;)</code></pre>
<p><img src="smsa_5_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>対象データをZスコア化（正規分布と見なす）し、下限10%の基準値を求めると-22.7902345（ヒストグラムの赤点線）となり、この下限値を下回るデータの個数は0であり、存在しないことが分かります。</p>
<p>このようにデータ分布を無視してZスコアを用いると期待された結果が得られないことが分かります。なので、データ分析の前には、データの分布等の特徴を確認することが重要になります。</p>
</div>
<div id="対数変換時" class="section level2">
<h2>対数変換時</h2>
<p>対象データに対して第1章の手法を適用するために対数変換という手法を用いてみます。</p>
<pre class="r"><code>logged.x &lt;- log10(x)

logged.x %&gt;% 
  ggplot(aes(sample = logged.x[, 1])) +
  geom_qq()</code></pre>
<p><img src="smsa_5_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<pre class="r"><code>shapiro.test(logged.x[, 1])</code></pre>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  logged.x[, 1]
## W = 0.98313, p-value = 0.2312</code></pre>
<p>対数変換後のデータをQQプロットと正規性の検定で確認する限り、ほぼ、正規分布と見なせるのでZスコア化し基準値を求めてみます。</p>
<pre class="r"><code>lower.10.z &lt;- qnorm(0.1)
lower.10.value &lt;- (lower.10.z * sd(logged.x[, 1])) + mean(logged.x[, 1])

# 階級の設定
breaks &lt;- pretty(logged.x[, 1], n = nclass.Sturges(logged.x[, 1]), min.n = 1)

logged.x %&gt;% 
  ggplot(aes(logged.x[, 1])) +
    geom_histogram(breaks = breaks) +
    geom_vline(xintercept = lower.10.value, linetype = &quot;dotted&quot;,
               colour = &quot;red&quot;) +
    xlab(&quot;テストケース密度（対数変換）&quot;) + ylab(&quot;頻度&quot;) +
    ggtitle(&quot;テストケース密度の分布と基準値&quot;,
            subtitle = paste(&quot;基準値 :&quot;, round(lower.10.value, 2)))</code></pre>
<p><img src="smsa_5_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>対象データを対数変換した場合のZスコア下限10%での基準値は0.9038911（ヒストグラムの赤点線）となり、この下限値を下回るデータの個数は9であり、概ね想定（10%）に近い値となっていることが分かります。この値を逆変換するとテストケース密度が8.0147703を下回るものはテスト不足と判断できます。</p>
</div>
</div>
<div id="演習-5.2" class="section level1">
<h1>演習 5.2</h1>
<blockquote>
<p>以下にプロジェクトごとの結合テストフェーズにおけるテストケース密度とバグ密度のデータがあります。 テストケース密度はテストケース数、バグ密度はバグ件数をそれぞれ規模で割ったものです。 規模はプログラム行数としています。この2変数で散布図を作成し、ゾーン分析を行います。 ゾーン分析とは、散布図をいくつかの象限に分割して、象限ごとの所見や対応策などを検討するものです。 ここでは、単純にテストケース密度とバグ密度の平均で4つの象限に分けることにします。 まずは、対数変換せずにそれぞれの平均を求めて、散布図を4つの象限に分ける線を引いてください。 そこでの問題点について考察し、その後に対数変換をして同様に4象限に分けてください。</p>
</blockquote>
<blockquote>
<p>テストケース密度とバグ密度によるゾーン分析の方法については以下の資料を参考にしてください。 定量的品質予測のススメ P58～ <a href="http://www.ipa.go.jp/files/000005133.pdf" class="uri">http://www.ipa.go.jp/files/000005133.pdf</a></p>
</blockquote>
<blockquote>
<p>出典：SECデータ白書2014-2015版のダウンロードデータ graph_data_8.xlsxの8-4-17, 18シートのデータで開発プロジェクトの種別を「a：新規開発」でフィルタリングしたもの それぞれのメトリクスの詳しい定義はSECデータ白書を参照してください。</p>
</blockquote>
<div id="データの設定-2" class="section level2">
<h2>データの設定</h2>
<p>本例題で利用するデータは予めCSVファイルとして保存されているものとします。</p>
<pre class="r"><code>file &lt;- &quot;./data/ex5_2.csv&quot;
x &lt;- read.csv(file, header = TRUE, sep = &quot;,&quot;, fileEncoding = &quot;UTF-8&quot;)

x %&gt;% 
  dplyr::select(&quot;テストケース密度&quot; = tests, &quot;バグ密度&quot; = bugs) %&gt;% 
  df_print(x)</code></pre>
<div id="htmlwidget-8c6615125cb495407fd7" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-8c6615125cb495407fd7">{"x":{"filter":"none","extensions":["Scroller","FixedColumns"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314"],[79.2118618768,9.3110493352,3.3579335793,72.331838565,19.9166666667,26.9879518072,59.890625,6.9268292683,66.5565031983,19.9644268775,64.7804878049,27.2459016393,36.0490987725,19.884853853,10.7692307692,15.8676470588,46.8274156509,10.4451282051,16.712962963,0.6816733914,88.0310880829,6.8446026097,0.4152046784,30.7387140903,64.2067509879,5.0404312668,16.0793357934,85.3352769679,41.1591355599,91.0769230769,29.3939393939,42.3529411765,35.7033248082,2.6425120773,21.723518851,38.6686245717,64.9122807018,61.4730769231,13.5987976596,115.892059949,41.0166860691,34.7802197802,37.5757575758,4.9744897959,35.7831325301,42.7292110874,36.3636363636,34.9019607843,74.3902439024,38.0281690141,38,38,38,38,20.2431118314,3.3298429319,67.256097561,11.2660406886,63.6301369863,26.3808908215,7.6560854308,130.7042253521,83.1974948524,13.604850214,54.5625,7.9991637238,6.8481308411,28.4916201117,23.0750591788,98.865248227,152.2619047619,8.586645882,105.8060222925,50.5965292842,62.6717395899,53.5064935065,10.8766328012,67.1198830409,74.2919824491,21.217765043,242.3636363636,0.2799285289,12.2446724546,0.1730166825,14.4609665428,32.7260826879,22.3577235772,143.8661710037,35.3779697624,55.6008583691,10.1358024691,20.0505494505,109.8419979613,1.52,25,15,66.4942528736,18,41.9791666667,12.6885245902,4.28,15.5580865604,58.3333333333,0.3652777778,13.0698360052,1.9432071269,9.6641975309,1.3082942097,79.729397294,72.0663265306,165.3846153846,23.2098765432,36.7256637168,38.1261595547,5.6380027739,195.3387259858,54.6989094358,22.4230769231,23.5027932961,22.2187814508,9.1491807991,9.4626038781,63.2150504742,63.7160288408,7.5873015873,27.4074074074,17.8129428436,29.9248120301,27.8706199461,7.5,36.2938684147,5.2150537634,200.7226715367,13.5812672176,3.3685800604,16.8771796679,0.1246647822,50.6632665986,10.8708619147,5.9937408221,17.4354506574,9.5238095238,6.7577413479,0.5135135135,3.1413155713,41.1553398058,24.1923076923,8.0647279796,9.1525423729,650.7444168735,11.9957537155,14.5454545455,14.7519582245,53.6557059961,18.9114348426,18.2692307692,43.0250481696,17.1698113208,2.6459143969,8.066168186,2.2684863342,5.0304259635,49.5725317154,61.2380987663,9.7569444444,124.3243243243,46.9214131218,28.7830508475,63.8362068966,114.6122953352,13.2247191011,46.8613138686,1392.786014605,142.9436619718,38.4,19.9040767386,18.4459459459,41.0407876231,9.8914027149,126.9589995251,36.5584415584,73.0929885629,108.0395976199,0.5555555556,35.534591195,1200,52.9100529101,10,124.356846473,51.5698924731,142.2727272727,41.6524216524,182.0326678766,3.7051039698,79.7619047619,22.5170565302,35.2647058824,51.1861554806,10.6787330317,139.8165137615,22.6925857499,20.2120141343,28.1714285714,32.6553672316,52,3.2173913043,41.8674698795,13.7664233577,4.9897260274,3.4753363229,65.8100558659,2.787456446,6.8588531821,59.8290598291,35.099009901,13.1195335277,10.5626236924,29.924505692,48.2537057065,38.9810263044,30.9010773751,0.5132246372,1.4375,42.9171528588,11.8602201315,4.2,26.3364645602,43.75,38.7055016181,375.9857142857,0.5409021407,4.5662100457,26.5555555556,29.6296296296,5,29.7286821705,7.2435968831,1.3901960784,44.7272727273,0.3992329149,34.3634686347,22.1319796954,39.2962962963,41.5584415584,9.5680473373,21.2277777778,32.7837259101,11.8466898955,33.1076960605,14.328358209,7.9663730985,2.9755178908,22.6863171998,12.7018262502,19.0769230769,20.8684863524,6.8235294118,26.3926124516,5.0689655172,3.090515687,6.8062827225,51.7385534174,5.1162790698,22.393442623,29.9743062693,38.3211678832,11.1795366795,0.8181818182,39.4690265487,8.1818181818,53.9545454545,36.4771151179,131.7459150927,117.6441837732,52.9166666667,88.8461538462,41.2328767123,51.7276544691,10.175,5.88,41.2,30.613154961,28.4482758621,15.2767527675,53.9644970414,50.067264574,9.4280978036,121.9207317073,63.4722222222,1.4117647059,24.3280871671,10.5502392344,76.8970698723,28.4802431611,16.5289256198,25.0291715286,24.8317307692,6.2886597938,14.1022727273,5.5649717514,37.8571428571,33.1818181818,25.8108108108,49.4166666667,44.3173431734,11.5107913669,0.8979278588,33.7331838565,71.9587628866,12.8134254689,25.5474452555,16.2159518803,10.6190125276,22.512195122],[4.776594686,1.5071842449,0.24600246,7.6905829596,0.3666666667,1.1325301205,1.03125,2.1268292683,2.3560767591,1.6996047431,1.4146341463,0.1639344262,3.0499237519,1.9884853853,1.8307692308,3.6764705882,1.6640169581,0.7343589744,2.0138888889,0.0573370142,3.4196891192,0.2253855279,0.0058479532,3.5020519836,1.0147112501,0.1617250674,0.8671586716,3.1778425656,2.6806374154,3.2384615385,1.1845730028,2.6989619377,2.0971867008,0.8203776899,0.2692998205,2.496328928,0.5847953216,0.7769230769,1.9618901783,4.8828125,0.8149010477,1.978021978,1.1447811448,0.8928571429,2.4096385542,1.2579957356,1.3333333333,1.3921568627,1.3821138211,1.1971830986,1.6,1.3829787234,1.2592592593,1.306122449,1.3019989195,0.0418848168,2.3475609756,2.1361502347,2.5342465753,1.2551416148,1.468872652,3.9436619718,0.3002745367,0.4893009986,1.3125,0.2499738664,1.6799065421,1.0552451893,1.3047287096,8.085106383,5.0595238095,5.3468433359,2.0795208784,1.8438177874,1.4267596703,0.7792207792,0.2960812772,3.4649122807,2.7722377343,0.5730659026,6.8181818182,0.0059559261,2.0394632991,0.0100817992,1.375464684,0.6545216538,3.5540069686,11.1152416357,3.2505399568,1.6309012876,2.1851851852,1.832967033,3.3435270133,0.5572413793,2.4545454545,1.4666666667,2.9885057471,5.0476190476,4.6875,0.5573770492,1.296,0.7517084282,3,0.1462962963,2.4470241386,0.3429844098,2.7604938272,0.8888888889,5.1537515375,1.4880952381,1.6338461538,1.975308642,1.9203539823,0.3506493506,1.6643550624,1.9615773509,4.4618302513,2.0576923077,1.2458100559,1.7594853857,0.9399252659,1.2243767313,1.1226674824,1.7526344981,2.9920634921,5.0864197531,0.928987561,1.1278195489,0.7187780773,0.9,1.1991366216,1.3261648746,1.3618575528,0.4407713499,0.6404833837,2.4213512586,0.0521852577,1.7563265754,1.9832985386,0.6678739773,1.2284175511,3.2142857143,17.5045537341,0.9459459459,0.0290862553,2.5339805825,0.5384615385,0.0131347361,3.995157385,2.2580645161,0.042462845,1.8181818182,1.4882506527,1.6247582205,0.5695657409,0.3846153846,2.408477842,3.358490566,0.1167315175,0.4267813855,0.6585928067,1.1764705882,2.2407611693,3.6676175305,0.6423611111,3.667953668,4.5710165826,0.2576271186,1.6810344828,5.8696323757,0.4157303371,1.897810219,3.0980305377,0.7464788732,1.875,0.3117505995,0.9009009009,3.9006094702,0.8687782805,0.3482665822,1.4025974026,0.4525111885,0.1600981936,0.0740740741,4.4025157233,0.5586592179,5.291005291,2,5.2282157676,2.4516129032,4.2424242424,1.396011396,5.0816696915,0.6427221172,33.9285714286,1.5423976608,1.1893382353,1.6335353759,4.07239819,1.6972477064,1.445899269,2.1554770318,0.6857142857,1.3075060533,2.5142857143,0.9130434783,2.5602409639,2.7372262774,0.7979452055,0.067264574,0.5586592179,0.1742160279,2.381852552,0.3488574917,3.6633663366,2.6239067055,0.6658184902,0.0730976633,0.5407468668,1.3208279431,3.721841332,0.0901610849,4.0416666667,2.5787631272,4.17741291,1.2333333333,0.5380017079,0.8333333333,1.359223301,2.6,0.0172018349,0.7876712329,1.1481481481,7.1481481481,0.525,1.1821705426,0.693009269,0.0300653595,1.6363636364,0.0662482566,0.9225092251,0.152284264,3.4888888889,0.3896103896,0.5976331361,1.15,1.9379014989,0.9756097561,2.3905354312,0.4179104478,2.5380304243,2.1845574388,0.4036174845,1.626557433,1.6,1.1166253102,2.4977375566,2.4867882479,1.0344827586,0.4998196899,0.1570680628,1.0617120106,3.7209302326,0.9508196721,2.3689619733,0.802919708,0.8088803089,1.1764705882,2.3008849558,0.6060606061,1.8636363636,0.9015256588,3.1478895666,5.156402737,1.125,9.8717948718,5.6164383562,1.3977204559,1.45,0.4,1,1.248606466,1.4482758621,0.8733087331,3.0177514793,4.9925261584,0.6423539163,4.1768292683,5.9722222222,0.3529411765,2.7330508475,0.6220095694,1.5326821938,1.094224924,0.252892562,5.1575262544,2.2355769231,6.2886597938,0.7954545455,1.5042372881,6.5714285714,2.012987013,1.036036036,1.2916666667,1.2546125461,0.3956834532,0.0767459708,1.2443946188,16.2886597938,0.6811451135,3.9416058394,0.1564868698,0.8916728077,0.3902439024]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>テストケース密度<\/th>\n      <th>バグ密度<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"deferRender":true,"dom":"t","scroller":false,"scrollY":250,"fixedColumns":true,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="未変換時-1" class="section level2">
<h2>未変換時</h2>
<pre class="r"><code>mean.x &lt;- x %&gt;% 
  dplyr::summarise_each(funs(mean))</code></pre>
<pre><code>## `summarise_each()` is deprecated.
## Use `summarise_all()`, `summarise_at()` or `summarise_if()` instead.
## To map `funs` over all variables, use `summarise_all()`</code></pre>
<pre class="r"><code>x %&gt;% 
  ggplot(aes(x = tests, y = bugs)) +
  geom_point() +
  geom_vline(xintercept = mean.x$tests, linetype = &quot;dotted&quot;) +
  geom_hline(yintercept = mean.x$bugs, linetype = &quot;dotted&quot;) +
  xlab(&quot;テストケース密度&quot;) + ylab(&quot;バグ密度&quot;)</code></pre>
<p><img src="smsa_5_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>散布図をプロットして平均値でゾーン分割した場合、値の小さな側に大きく偏っているため、テストまたは製品品質に問題があるプロジェクトが多いように見える。</p>
</div>
<div id="対数変換時-1" class="section level2">
<h2>対数変換時</h2>
<p>そこでデータを対数変換してみる。また、ゾーン分割に標準偏差（<span class="math inline">\(\sigma\)</span>）も用いてみる。</p>
<pre class="r"><code>mean.x &lt;- log10(x) %&gt;%
  dplyr::summarise_each(funs(mean))</code></pre>
<pre><code>## `summarise_each()` is deprecated.
## Use `summarise_all()`, `summarise_at()` or `summarise_if()` instead.
## To map `funs` over all variables, use `summarise_all()`</code></pre>
<pre class="r"><code>sd.x &lt;- log10(x) %&gt;%
  dplyr::summarise_each(funs(sd))</code></pre>
<pre><code>## `summarise_each()` is deprecated.
## Use `summarise_all()`, `summarise_at()` or `summarise_if()` instead.
## To map `funs` over all variables, use `summarise_all()`</code></pre>
<pre class="r"><code>log10(x) %&gt;% 
  ggplot(aes(x = tests, y = bugs)) +
  geom_point() +
  geom_vline(xintercept = mean.x$tests, linetype = &quot;dotted&quot;, colour = &quot;red&quot;) +
  geom_hline(yintercept = mean.x$bugs, linetype = &quot;dotted&quot;, colour = &quot;red&quot;) +
  geom_vline(xintercept = (mean.x$tests + sd.x$tests), linetype = &quot;dotted&quot;,
             colour = &quot;blue&quot;) +
  geom_hline(yintercept = (mean.x$bugs + sd.x$bugs), linetype = &quot;dotted&quot;,
             colour = &quot;blue&quot;) +
  geom_vline(xintercept = (mean.x$tests - sd.x$tests), linetype = &quot;dotted&quot;,
             colour = &quot;blue&quot;) +
  geom_hline(yintercept = (mean.x$bugs - sd.x$bugs), linetype = &quot;dotted&quot;,
             colour = &quot;blue&quot;) +
  xlab(&quot;テストケース密度(対数変換)&quot;) + ylab(&quot;バグ密度(対数変換)&quot;) +
  ggtitle(&quot;テストケース密度とバグ密度の散布図（対数変換）&quot;,
          subtitle = &quot;赤：平均値／青：平均値±標準偏差&quot;)</code></pre>
<p><img src="smsa_5_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
</div>
<div id="ゾーン分析" class="section level2">
<h2>ゾーン分析</h2>
<p>プロダクト品質の判定方法の一つとしてテスト（ケース）密度とバグ密度を用いたゾーン判定があります。詳細についてはIPAの<a href="http://www.ipa.go.jp/files/000005133.pdf" target="_blank" title="IPA">『定量的品質予測のススメ(PDF)』 <i class="fa fa-external-link"></i></a>で確認してください。以下は抜粋です。</p>
<p>ゾーン判定を用いる場合は以下の条件が満たされていること確認してください。</p>
<ul>
<li>テストの網羅性が確認されていること</li>
<li>下記の実績データが蓄積・評価されていること</li>
<li>過去に実施して開発プロセスを踏襲していること</li>
</ul>
<p>ゾーン判定では基準値（閾値）を元に下表のように9分割したゾーンを設けて判定します。</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>L</th>
<th>M</th>
<th>H</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>H</td>
<td>8</td>
<td>5</td>
<td>6</td>
</tr>
<tr class="even">
<td>M</td>
<td>7</td>
<td>1</td>
<td>2</td>
</tr>
<tr class="odd">
<td>L</td>
<td>9</td>
<td>3</td>
<td>4</td>
</tr>
</tbody>
</table>
<p>横軸をテスト（ケース）密度、縦軸をバグ密度とした場合、各ゾーンにおける判断は下表のようになります。</p>
<table>
<thead>
<tr class="header">
<th>Zone</th>
<th>判断</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>一応品質は良好、テスト結果も予想どおり</td>
</tr>
<tr class="even">
<td>2</td>
<td>テスト結果がやや悪、テスト内容点検</td>
</tr>
<tr class="odd">
<td>3</td>
<td>テスト内容が適切か点検</td>
</tr>
<tr class="even">
<td>4</td>
<td>テスト効率がやや悪、テスト内容点検</td>
</tr>
<tr class="odd">
<td>5</td>
<td>前工程の品質確保不足、内容点検</td>
</tr>
<tr class="even">
<td>6</td>
<td>前工程の品質確保不足、内容点検</td>
</tr>
<tr class="odd">
<td>7</td>
<td>テスト不足、前工程の品質確保不足、内容点検</td>
</tr>
<tr class="even">
<td>8</td>
<td>テスト不足、前工程の品質確保不足、内容点検</td>
</tr>
<tr class="odd">
<td>9</td>
<td>テスト不足、内容点検</td>
</tr>
</tbody>
</table>
<div id="閾値の決め方" class="section level3">
<h3>閾値の決め方</h3>
<p>閾値は信頼度成長曲線を元にバグを出し尽くしたと判断できるゾーン（UCL/LCL）の値を閾値として用いますが、本演習では<span class="math inline">\(平均値（\mu） \pm 標準偏差（\sigma）\)</span>を閾値として青点線で描いています。</p>
</div>
</div>
</div>
<div id="演習-5.3" class="section level1">
<h1>演習 5.3</h1>
<blockquote>
<p>以下にプロジェクトごとの規模（LOC）、開発総工数（人時）のデータがあります。開発総工数を目的変数、規模を説明変数とした単回帰分析を行います。 まずは、対数変換せずに回帰分析を行ってください。そこでの問題点について考察し、その後に対数変換をして同様に単回帰分析を行ってください。 最終的な回帰式は対数変換をしない説明変数，目的変数を扱えるように変形してください。</p>
</blockquote>
<blockquote>
<p>出典：SECデータ白書2014-2015版のダウンロードデータ graph_data_6.xlsxの6-5-13シートのデータで 業種（大分類）を「J：卸売・小売業」でフィルタリングしたもの それぞれのメトリクスの詳しい定義はSECデータ白書を参照してください。</p>
</blockquote>
<div id="データの設定-3" class="section level2">
<h2>データの設定</h2>
<p>本例題で利用するデータは予めCSVファイルとして保存されているものとします。</p>
<pre class="r"><code>file &lt;- &quot;./data/ex5_3.csv&quot;
x &lt;- read.csv(file, header = TRUE, sep = &quot;,&quot;, fileEncoding = &quot;UTF-8&quot;)

x %&gt;% 
  dplyr::rename(&#39;開発規模[LOC]&#39; = loc, &#39;開発工数[人時]&#39; = develop) %&gt;% 
  df_print(x)</code></pre>
<div id="htmlwidget-60e95a58a36c1cb9a57b" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-60e95a58a36c1cb9a57b">{"x":{"filter":"none","extensions":["Scroller","FixedColumns"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55"],[123200,191100,232100,219800,64100,46200,73100,458100,26300,309300,222000,18200,24900,14600,98500,243000,21000,2160000,140000,179000,190000,55341,42000,984000,448600,55000,28800,3237,84610,199190,8284,90800,52900,55058,11000,93400,90800,67000,597100,585900,172000,11300,7800,76000,2653600,701000,39120,267200,63700,141600,139000,532000,90400,13000,135700],[20071.3,33990,50785,22785,11397.5,6293.4,29701.5,334390,3485,30986.05,51161.55,5158.7,4142,5357,137000,20134.42,3734.64,142120,45375,24361,18445,3210,10540,11916,64907.5,9367,1832,2480,23859,33346.5,2850,13328,5389,5550.6,1696,14513,12941.6,12818,32125.9,259335,37288.35,1285,8602,9672.3,194238,59395,9398.4,44005.5,7030.65,25024,20910,66732,5058,3360,3576]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>開発規模[LOC]<\/th>\n      <th>開発工数[人時]<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"deferRender":true,"dom":"t","scroller":false,"scrollY":250,"fixedColumns":true,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,2]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="未変換時-2" class="section level2">
<h2>未変換時</h2>
<pre class="r"><code>lm.x &lt;- x %&gt;% 
  mutate_each(funs(./1000)) %&gt;% 
  lm(develop ~ loc, data = .)</code></pre>
<pre><code>## `mutate_each()` is deprecated.
## Use `mutate_all()`, `mutate_at()` or `mutate_if()` instead.
## To map `funs` over all variables, use `mutate_all()`</code></pre>
<pre class="r"><code>lm.text &lt;- paste(&quot;KMH = &quot;, round(lm.x$coefficients[1], 2), &quot; + &quot;,
                 round(lm.x$coefficients[2], 2), &quot;*KLOC&quot;,
                 &quot; / R^2 = &quot;, round(summary(lm.x)$r.squared, 2), sep = &quot;&quot;)
  
x %&gt;% 
  ggplot(aes(x = loc/1000, y = develop/1000)) +
  geom_point() +
  geom_smooth(method = &quot;lm&quot;) +
  xlab(&quot;開発規模[KLOC]&quot;) + ylab(&quot;開発工数[KMH]&quot;) +
  ggtitle(label = &quot;開発規模と開発総工数の関係&quot;, subtitle = lm.text)</code></pre>
<p><img src="smsa_5_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<pre class="r"><code>summary(lm.x)</code></pre>
<pre><code>## 
## Call:
## lm(formula = develop ~ loc, data = .)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -79.698 -16.092 -11.795  -2.175 282.025 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 18.17553    8.10084   2.244   0.0291 *  
## loc          0.07463    0.01536   4.859 1.09e-05 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 53.01 on 53 degrees of freedom
## Multiple R-squared:  0.3082, Adjusted R-squared:  0.2951 
## F-statistic: 23.61 on 1 and 53 DF,  p-value: 1.088e-05</code></pre>
</div>
<div id="対数変換時-2" class="section level2">
<h2>対数変換時</h2>
<pre class="r"><code>lm.x &lt;- log10(x) %&gt;% 
  lm(develop ~ loc, data = .)

lm.text &lt;- paste(&quot;Logged KMH = &quot;, round(lm.x$coefficients[1], 2), &quot; + &quot;,
                 round(lm.x$coefficients[2], 2), &quot;*Logged KLOC&quot;,
                 &quot; / R^2 = &quot;, round(summary(lm.x)$r.squared, 2), sep = &quot;&quot;)

log10(x) %&gt;% 
  ggplot(aes(x = loc, y = develop)) +
  geom_point() +
  geom_smooth(method = &quot;lm&quot;) +
  xlab(&quot;対数変換した開発規模[KLOC]&quot;) + ylab(&quot;対数変換した開発工数[KMH]&quot;) +
  ggtitle(label = &quot;対数変換した開発規模と開発総工数の関係&quot;, subtitle = lm.text)</code></pre>
<p><img src="smsa_5_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<pre class="r"><code>summary(lm.x)</code></pre>
<pre><code>## 
## Call:
## lm(formula = develop ~ loc, data = .)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -0.87748 -0.14375  0.00318  0.11897  0.94404 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  0.39136    0.36604   1.069     0.29    
## loc          0.76126    0.07297  10.433 1.87e-14 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.3282 on 53 degrees of freedom
## Multiple R-squared:  0.6725, Adjusted R-squared:  0.6663 
## F-statistic: 108.8 on 1 and 53 DF,  p-value: 1.874e-14</code></pre>
</div>
<div id="逆変換後の回帰式" class="section level2">
<h2>逆変換後の回帰式</h2>
<p><span class="math display">\[log_{10}(総工数) = 0.39 + 0.76*log_{10}(LOC)\]</span> <span class="math display">\[log_{10}(総工数) = 0.39 + log_{10}(LOC^{0.76})\]</span> <span class="math display">\[総工数 = 10^{0.39 + log_{10}(LOC^{0.76})}\]</span> <span class="math display">\[総工数 = 10^{0.39} + 10^{log_{10}(LOC^{0.76})}\]</span> <span class="math display">\[総工数 = 2.45 + LOC^{0.76}\]</span></p>
</div>
<div id="逆変換後のグラフ" class="section level2">
<h2>逆変換後のグラフ</h2>
<p>Rを用いて逆変換後の回帰式と信頼区間を描くには対数変換時の予測値と信頼区間の値を逆変換してプロットするのが簡単です。</p>
<pre class="r"><code>lm.conf &lt;- lm.x %&gt;% 
  predict(interval = &quot;confidence&quot;, level = 0.95) %&gt;% 
  as.data.frame() %&gt;% 
  dplyr::bind_cols(lm.x$model, .) %&gt;% 
  10^. %&gt;% 
  as.data.frame() %&gt;% 
  dplyr::mutate(loc = loc/1000, develop = develop/1000,
                fit = fit/1000, lwr = lwr/1000, upr = upr/1000)

gg.plot &lt;- ggplot(NULL)

gg.plot &lt;- gg.plot + lm.conf %&gt;% 
  geom_point(data = ., aes(x = loc, y = develop))

gg.plot &lt;- gg.plot + lm.conf %&gt;%
  geom_line(data = ., aes(x = loc, y = fit), colour = &quot;blue&quot;) +
  xlab(&quot;開発規模[KLOC]&quot;) + ylab(&quot;開発工数[KMH]&quot;) +
  ggtitle(label = &quot;開発規模と開発総工数の関係&quot;,
          subtitle = &quot;2.45 + LOC^0.76&quot;)

gg.plot &lt;- gg.plot + lm.conf %&gt;%
  geom_line(data = ., aes(x = loc, y = lwr), linetype = &quot;dotted&quot;,
                          colour = &quot;blue&quot;)

gg.plot &lt;- gg.plot + lm.conf %&gt;%
  geom_line(data = ., aes(x = loc, y = upr), linetype = &quot;dotted&quot;,
                          colour = &quot;blue&quot;)

print(gg.plot)</code></pre>
<p><img src="smsa_5_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
</div>
</div>
<div id="演習-5.4" class="section level1">
<h1>演習 5.4</h1>
<blockquote>
<p>以下に静的解析ツールで測定したモジュールごとの警告数のデータがあります。どのような警告内容かは、ここでは考えないことにします。 この警告数の分布を調べるために、まずはそのままのデータでヒストグラムを作成してください。 そして、次に警告数データを対数変換して、ヒストグラムを作成してください。警告数が0のデータは対数変換できないので、本文中の解説を参考にして適切に対処してください。</p>
</blockquote>
<div id="データの設定-4" class="section level2">
<h2>データの設定</h2>
<p>本例題で利用するデータは予めCSVファイルとして保存されているものとします。</p>
<pre class="r"><code>file &lt;- &quot;./data/ex5_4.csv&quot;
x &lt;- read.csv(file, header = TRUE, sep = &quot;,&quot;, row.names = 1,
              fileEncoding = &quot;UTF-8&quot;)

x %&gt;% 
  rename(&#39;警告数&#39; = warnings) %&gt;% 
  df_print(x)</code></pre>
<div id="htmlwidget-c901f144c5bbc84ff620" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-c901f144c5bbc84ff620">{"x":{"filter":"none","extensions":["Scroller","FixedColumns"],"data":[["Module001","Module002","Module003","Module004","Module005","Module006","Module007","Module008","Module009","Module010","Module011","Module012","Module013","Module014","Module015","Module016","Module017","Module018","Module019","Module020","Module021","Module022","Module023","Module024","Module025","Module026","Module027","Module028","Module029","Module030","Module031","Module032","Module033","Module034","Module035","Module036","Module037","Module038","Module039","Module040","Module041","Module042","Module043","Module044","Module045","Module046","Module047","Module048","Module049","Module050","Module051","Module052","Module053","Module054","Module055","Module056","Module057","Module058","Module059","Module060","Module061","Module062","Module063","Module064","Module065","Module066","Module067","Module068","Module069","Module070","Module071","Module072","Module073","Module074","Module075","Module076","Module077","Module078","Module079","Module080","Module081","Module082","Module083","Module084","Module085","Module086","Module087","Module088","Module089","Module090","Module091","Module092","Module093","Module094","Module095","Module096","Module097","Module098","Module099","Module100","Module101","Module102","Module103","Module104","Module105","Module106","Module107","Module108","Module109","Module110","Module111","Module112","Module113","Module114","Module115","Module116","Module117","Module118","Module119","Module120","Module121","Module122","Module123","Module124","Module125","Module126","Module127","Module128","Module129","Module130","Module131","Module132","Module133","Module134","Module135","Module136","Module137","Module138","Module139","Module140","Module141","Module142","Module143","Module144","Module145","Module146","Module147","Module148","Module149","Module150","Module151","Module152","Module153","Module154","Module155","Module156","Module157","Module158","Module159","Module160","Module161","Module162","Module163","Module164","Module165","Module166","Module167","Module168","Module169","Module170","Module171","Module172","Module173","Module174","Module175","Module176","Module177","Module178","Module179","Module180","Module181","Module182","Module183","Module184","Module185","Module186","Module187","Module188","Module189","Module190","Module191","Module192","Module193","Module194","Module195","Module196","Module197","Module198","Module199","Module200","Module201","Module202","Module203","Module204","Module205","Module206","Module207","Module208","Module209","Module210","Module211","Module212","Module213","Module214","Module215","Module216","Module217","Module218","Module219","Module220","Module221","Module222","Module223","Module224","Module225","Module226","Module227","Module228","Module229","Module230","Module231","Module232","Module233","Module234","Module235","Module236","Module237","Module238","Module239","Module240","Module241","Module242","Module243","Module244","Module245","Module246","Module247","Module248","Module249","Module250","Module251","Module252","Module253","Module254","Module255","Module256","Module257","Module258","Module259","Module260","Module261","Module262","Module263","Module264","Module265","Module266","Module267","Module268","Module269","Module270","Module271","Module272","Module273","Module274","Module275","Module276","Module277","Module278","Module279","Module280","Module281","Module282","Module283","Module284","Module285","Module286","Module287","Module288","Module289","Module290","Module291","Module292","Module293","Module294","Module295","Module296","Module297","Module298","Module299","Module300","Module301","Module302","Module303","Module304","Module305","Module306","Module307","Module308","Module309","Module310","Module311","Module312","Module313","Module314","Module315","Module316","Module317","Module318","Module319","Module320","Module321","Module322","Module323","Module324","Module325","Module326","Module327","Module328","Module329","Module330","Module331","Module332","Module333","Module334","Module335","Module336","Module337","Module338","Module339","Module340","Module341","Module342","Module343","Module344","Module345","Module346","Module347","Module348","Module349","Module350","Module351","Module352","Module353","Module354","Module355","Module356","Module357","Module358","Module359","Module360","Module361","Module362","Module363","Module364","Module365","Module366","Module367","Module368","Module369","Module370","Module371","Module372","Module373","Module374","Module375","Module376","Module377","Module378","Module379","Module380","Module381","Module382","Module383","Module384","Module385","Module386","Module387","Module388","Module389","Module390","Module391","Module392","Module393","Module394","Module395","Module396","Module397","Module398","Module399","Module400","Module401","Module402","Module403","Module404","Module405","Module406","Module407","Module408","Module409","Module410","Module411","Module412","Module413","Module414","Module415","Module416","Module417","Module418","Module419","Module420","Module421","Module422","Module423","Module424","Module425","Module426","Module427","Module428","Module429","Module430","Module431","Module432","Module433","Module434","Module435","Module436","Module437","Module438","Module439","Module440","Module441","Module442","Module443","Module444","Module445","Module446","Module447","Module448","Module449","Module450","Module451","Module452","Module453","Module454","Module455","Module456","Module457","Module458","Module459","Module460","Module461","Module462","Module463","Module464","Module465","Module466","Module467","Module468","Module469","Module470","Module471","Module472","Module473","Module474","Module475","Module476","Module477","Module478","Module479","Module480","Module481","Module482","Module483","Module484","Module485","Module486","Module487","Module488","Module489","Module490","Module491","Module492","Module493","Module494","Module495","Module496","Module497","Module498","Module499","Module500","Module501","Module502","Module503","Module504","Module505","Module506","Module507","Module508","Module509","Module510","Module511","Module512","Module513","Module514","Module515","Module516","Module517","Module518","Module519","Module520","Module521","Module522","Module523","Module524","Module525","Module526","Module527","Module528","Module529","Module530","Module531","Module532","Module533","Module534","Module535","Module536","Module537","Module538","Module539","Module540","Module541","Module542","Module543","Module544","Module545","Module546","Module547","Module548","Module549","Module550","Module551","Module552","Module553","Module554","Module555","Module556","Module557","Module558","Module559","Module560","Module561"],[3,17,3,4,2,0,106,0,2,0,2,12,1,0,1,0,21,3,0,11,0,3,4,12,6,1,4,27,1,1,5,4,0,0,8,25,0,2,3,3,1,1,1,3,21,0,1,0,1,2,0,0,1,1,0,8,0,1,0,0,1,20,16,10,1,12,21,1,1,3,3,3,1,3,3,11,5,2,2,1,0,0,39,1,1,0,1,107,2,2,2,2,2,8,2,13,2,2,2,5,2,9,2,0,2,1,2,7,2,2,5,2,4,2,2,2,1,2,4,2,7,5,2,2,1,2,1,31,2,2,53,2,2,0,1,0,2,2,2,2,2,4,19,2,2,0,2,2,91,10,4,2,83,2,5,6,2,2,15,0,2,1,2,10,2,1,2,2,5,2,35,2,16,2,0,0,1,2,4,2,6,2,0,0,1,2,2,1,1,0,5,7,1,2,1,0,1,0,2,2,2,0,1,2,2,23,66,2,2,2,4,2,0,2,3,2,2,2,3,34,4,5,2,2,1,11,2,6,2,1,0,1,11,2,2,1,8,2,0,29,11,2,14,8,0,19,1,6,0,11,4,3,0,7,65,1,8,12,0,5,5,13,5,2,14,8,4,9,52,5,0,8,0,13,33,1,2,2,15,25,2,1,3,2,0,23,24,34,2,26,6,4,2,15,0,4,12,8,15,38,13,10,7,16,8,13,8,19,13,0,18,14,1,8,21,6,5,1,54,3,6,2,0,0,9,11,5,3,0,3,1,13,1,9,5,0,3,1,1,1,0,2,0,1,5,0,0,2,6,0,8,1,2,11,0,0,2,0,8,1,2,13,1,1,0,29,1,3,2,1,3,0,32,4,0,2,0,4,2,9,1,0,0,2,0,3,13,2,1,0,0,21,1,1,2,1,7,4,1,3,0,0,6,2,2,1,0,11,20,7,3,23,0,16,9,0,10,4,4,6,0,1,0,1,0,6,1,8,1,1,0,8,1,7,1,11,19,15,6,1,6,3,10,5,2,1,5,10,12,7,3,2,12,3,12,0,42,5,2,52,14,1,0,2,5,21,22,10,5,1,4,1,6,0,1,0,3,0,3,4,3,5,5,2,12,22,4,0,3,0,0,1,4,1,6,1,5,101,14,77,0,5,56,45,13,6,6,1,15,18,39,111,0,37,42,49,41,34,34,6,39,94,2,117,17,1,29,22,21,4,22,27,4,51,38,33,76,48,33,36,33,1,64,49,101,27,6,40,15,5,32,5,76,19,6,13,9,2,29,115,7]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>警告数<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"deferRender":true,"dom":"t","scroller":false,"scrollY":250,"fixedColumns":true,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":1},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="未変換時-3" class="section level2">
<h2>未変換時</h2>
<pre class="r"><code># 
# 階級の設定
breaks &lt;- pretty(x[, 1], n = nclass.Sturges(x[, 1]), min.n = 1)

x %&gt;% 
  ggplot(aes(x[, 1])) +
    geom_histogram(breaks = breaks) +
    xlab(&quot;警告数&quot;) + ylab(&quot;度数&quot;) + 
    ggtitle(label = &quot;静的解析ツールの警告数分布&quot;)</code></pre>
<p><img src="smsa_5_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
</div>
<div id="対数変換時-3" class="section level2">
<h2>対数変換時</h2>
<pre class="r"><code>offset.x &lt;- x %&gt;% 
  dplyr::filter(warnings != 0) %&gt;% 
  dplyr::summarise(min(warnings) / 2) 

log10.x &lt;- x %&gt;% 
  dplyr::mutate(warnings = log10(x[, 1] + offset.x[, 1]))

# ヒストグラムを描く
# 階級の設定
breaks &lt;- pretty(log10.x[, 1], n = nclass.Sturges(log10.x[, 1]), min.n = 1)

log10.x %&gt;% 
  ggplot(aes(log10.x[, 1])) +
    geom_histogram(breaks = breaks) +
    xlab(&quot;対数変換した警告数&quot;) + ylab(&quot;度数&quot;) + 
    ggtitle(label = &quot;静的解析ツールの警告数分布&quot;,
            subtitle = paste(&quot;offset : &quot;, offset.x))</code></pre>
<p><img src="smsa_5_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<pre class="r"><code>log10.x %&gt;% 
  dplyr::mutate(range = cut(warnings, breaks)) %&gt;%
  dplyr::group_by(range) %&gt;% 
  dplyr::summarise(freq = n()) %&gt;%
  dplyr::rename(&#39;階級&#39; = range, &#39;度数&#39; = freq) %&gt;% 
  df_print()</code></pre>
<div id="htmlwidget-6e7b763be73a8d24335d" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-6e7b763be73a8d24335d">{"x":{"filter":"none","extensions":["Scroller","FixedColumns"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12"],["(-0.4,-0.2]","(0,0.2]","(0.2,0.4]","(0.4,0.6]","(0.6,0.8]","(0.8,1]","(1,1.2]","(1.2,1.4]","(1.4,1.6]","(1.6,1.8]","(1.8,2]","(2,2.2]"],[86,85,111,32,54,54,50,30,29,14,9,7]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>階級<\/th>\n      <th>度数<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"deferRender":true,"dom":"t","scroller":false,"scrollY":250,"fixedColumns":true,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>逆変換後の基準値は以下の通りとなります。</p>
<pre class="r"><code>log10.x %&gt;% 
  dplyr::summarize(quantile(warnings, probs = c(0.9))) %&gt;% 
  10 ^ . %&gt;% 
  round(0) </code></pre>
<pre><code>##      quantile(warnings, probs = c(0.9))
## [1,]                                 27</code></pre>
<div id="別解" class="section level3">
<h3>別解</h3>
<p>そもそも静的解析ツールでの警告数が<code>0</code>である場合は、そのモジュールには問題がないと判断して分析対象から外してしまうという考え方もありえます。</p>
<pre class="r"><code># 階級の設定
# breaks &lt;- pretty(log10.x[, 1], n = nclass.Sturges(log10.x[, 1]), min.n = 1)

log10.x %&gt;% 
  dplyr::filter(warnings &gt; -0.3) %&gt;% 
  ggplot(aes(warnings)) +
    geom_histogram(breaks = breaks) +
    xlab(&quot;対数変換した警告数&quot;) +　ylab(&quot;度数&quot;) + 
    ggtitle(label = &quot;静的解析ツールの警告数分布&quot;)</code></pre>
<p><img src="smsa_5_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<pre class="r"><code>log10.x %&gt;% 
  dplyr::filter(warnings &gt; -0.3) %&gt;% 
  dplyr::mutate(range = cut(warnings, breaks)) %&gt;%
  dplyr::group_by(range) %&gt;% 
  dplyr::summarise(freq = n()) %&gt;% 
  # t() %&gt;% as.data.frame() %&gt;% 
  dplyr::rename(&#39;階級&#39; = range, &#39;度数&#39; = freq) %&gt;% 
  df_print()</code></pre>
<div id="htmlwidget-a134c362d197f4d6fbd7" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-a134c362d197f4d6fbd7">{"x":{"filter":"none","extensions":["Scroller","FixedColumns"],"data":[["1","2","3","4","5","6","7","8","9","10","11"],["(0,0.2]","(0.2,0.4]","(0.4,0.6]","(0.6,0.8]","(0.8,1]","(1,1.2]","(1.2,1.4]","(1.4,1.6]","(1.6,1.8]","(1.8,2]","(2,2.2]"],[85,111,32,54,54,50,30,29,14,9,7]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>階級<\/th>\n      <th>度数<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"deferRender":true,"dom":"t","scroller":false,"scrollY":250,"fixedColumns":true,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>この場合、基準値（逆変換後）は以下のようになります。</p>
<pre class="r"><code>log10.x %&gt;% 
  dplyr::filter(warnings &gt; -0.3) %&gt;% 
  dplyr::summarize(quantile(warnings, probs = c(0.9))) %&gt;% 
  10 ^ . %&gt;% 
  round(0) </code></pre>
<pre><code>##      quantile(warnings, probs = c(0.9))
## [1,]                                 32</code></pre>
<hr />
<!-- Include Footer -->
<p><img src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" alt="Sampo Suzuki" target="_blank" title="CC BY-NC-SA 4.0 icon" /> <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.ja" target="_blank" title="CC BY-NC-SA 4.0">CC BY-NC-SA 4.0 <i class="fa fa-external-link"></i></a>, Sampo Suzuki [2018-04-15 21:34(JST)]</p>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
