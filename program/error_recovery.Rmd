---
title: "エラーが出たら"
output:
  html_document:
    number_section: yes
---

```{r smsa_1, child="../common/links.Rmd"}
```

```{r setup, include=FALSE}
# 共通chunkオプションの指定
knitr::opts_chunk$set(warning = FALSE, echo = TRUE)

# データハンドリングで利用するパッケージの読み込み
require(tidyverse)

# 表示で利用する外部パッケージの読み込み
require(gridExtra)
require(DT)
require(knitr)
require(extrafont)

# モデリングで利用するパッケージの読み込み
require(psych)

# コンフリクトの解消
tidyverse::tidyverse_conflicts()

# 共通ローカル関数の読み込み
source("../common/common.R")
```

# 
Linux環境やMacOS環境ではパッケージをインストールする際に以下のようなエラーが出てパッケージのインストールが失敗する場合があります。失敗する原因はRをインストールした際に必要なアプリケーションモジュールがインストールされていないためです。

```
* installing *source* package ‘openssl’ ...
**  パッケージ ‘openssl’ の解凍および MD5 サムの検証に成功しました 
Using PKG_CFLAGS=
Using PKG_LIBS=-lssl -lcrypto
------------------------- ANTICONF ERROR ---------------------------
Configuration failed because openssl was not found. Try installing:
 * deb: libssl-dev (Debian, Ubuntu, etc)
 * rpm: openssl-devel (Fedora, CentOS, RHEL)
 * csw: libssl_dev (Solaris)
 * brew: openssl (Mac OSX)
If openssl is already installed, check that 'pkg-config' is in your
PATH and PKG_CONFIG_PATH contains a openssl.pc file. If pkg-config
is unavailable you can set INCLUDE_DIR and LIB_DIR manually via:
R CMD INSTALL --configure-vars='INCLUDE_DIR=... LIB_DIR=...'
--------------------------------------------------------------------
```

このようなエラーメッセージが表示された場合は、まず、`r-base-dev`というアプリケーションモジュールがインストールされているか確認してください。Ubuntu環境の場合はターミナル（端末）から以下のコマンドを実行することでインストールの有無を確認できます。

Ubuntuの場合
```
dpkg -l | grep r-base-dev
```

出力結果に`r-base-dev`が表示されない場合はインストールされていませんので、`r-base-dev`を[Install R](./install.html)を参考にしてインストールしてください。

## それでもインストールが失敗する場合
`r-base-dev`がインストールされているにも関わらずインストールが失敗する場合は、エラーメッセージの"ANTICONF ERROR"に注目して不足しているライブラリを手動でインストールします。上記の場合は`libssl-dev`（Ubuntuの場合）がインストールされていませんので、ターミナル（端末）から以下のコマンドを実行してインストールします。

Ubuntuの場合
```
sudo apt-get install libssl-dev
```


# **`udunits2`** package
Ubuntu
## Error Message
以下のメッセージが表示されてパッケージがインストールできない場合は
```
* installing *source* package ‘udunits2’ ...
**  パッケージ ‘udunits2’ の解凍および MD5 サムの検証に成功しました 
checking for gcc... gcc -std=gnu99
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc -std=gnu99 accepts -g... yes
checking for gcc -std=gnu99 option to accept ISO C89... none needed
checking for XML_ParserCreate in -lexpat... no
checking how to run the C preprocessor... gcc -std=gnu99 -E
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking udunits2.h usability... no
checking udunits2.h presence... no
checking for udunits2.h... no
checking for ut_read_xml in -ludunits2... no
-----Error: libudunits2.a not found-----
     If the udunits2 library is installed in a non-standard location,
     use --configure-args='--with-udunits2-lib=/usr/local/lib' for example,
     or --configure-args='--with-udunits2-include=/usr/include/udunits2'
     replacing paths with appropriate values for your installation.
     You can alternatively use the UDUNITS2_INCLUDE and UDUNITS2_LIB
     environment variables.
     If udunits2 is not installed, please install it.
     It is required for this package.
ERROR: configuration failed for package ‘udunits2’
* removing ‘/home/sampo/R/x86_64-pc-linux-gnu-library/3.4/udunits2’
```

## Reason

## Action
**`libudunits2-dev`**ライブラリをインストールしてください。  
```
sudo apt-get install libudunits2-dev
```

　  

# reprex::reprex()
Ubuntu

## Error Message
以下のエラーが出る場合はUbuntu側に必要なライブラリが不足していますので、追加でインストールしてください。

```
> reprex::reprex()
No input provided and clipboard is not available.
Unable to put result on the clipboard. How to get it:
  * Capture what reprex() returns.
  * Use `outfile = "foo"` to request output in specific file.
  * See the temp file:
    - /tmp/RtmpXnGVCp/file2414ae930e0_reprex.md
 ```
 
## Reason
**`reprex::reprex`**関数は**`clipr`**パッケージで定義されている関数を用いてUbuntuのクリップボードと**`xclip`**ライブラリを介してやり取りします。なので**`xclip`**ライブラリがインストールされていませんと上記のエラーが表示されます。  

[**``replex`**](https://github.com/tidyverse/reprex)


<!-- クリップボードの有無をチェックするために**`clipr::clipr_available`**関数を呼び出します。**`clipr::clipr_available`**では**`clipr::read_clip`**と**`clipr::write_clip`** -->

<!-- > clipr::read_clip() -->
<!--  エラー: Clipboard on X11 requires 'xclip' (recommended) or 'xsel'. -->
 
 
## Action
**`xclip`**ライブラリをインストールしてください。  

 ```
 sudo apt-get install xclip
 ```
 
 ``` r
clipr::read_clip()
NULL
 警告メッセージ: 
 clipr::read_clip() で: 
  System clipboard contained no readable text. Returning NULL.
#> Error: <text>:4:21:  想定外のシンボルです 
#> 3:  警告メッセージ: 
#> 4:  clipr::read_clip() で
#>                        ^
```

``` r
reprex:::reprex_addin()
 エラー: Install these packages in order to use the reprex addin:
shinyjs
#> Error: <text>:2:21:  想定外のシンボルです 
#> 1: reprex:::reprex_addin()
#> 2:  エラー: Install these
#>                        ^
```


---

<!-- Include Footer -->
```{r child="../common/footer.Rmd"}
```
