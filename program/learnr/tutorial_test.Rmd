---
title: "Rのすゝめ総合チュートリアル"
output: learnr::tutorial
runtime: shiny_prerendered
---

```{r setup, include=FALSE, message=FALSE}
# 共通chunkオプションの指定
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
learnr::tutorial_options(exercise.lines = 20)

require(learnr)
require(tidyverse)
require(gridExtra)
tidyverse::tidyverse_conflicts()

# setupチャンクで作成したオブジェクトはどこからでも参照可能
# file_path <- "/home/sampo/Dropbox/RStudio/cabinet/program/basics/data/odc.csv"
file_path <- "C:\\Users\\suzuki\\Dropbox\\RStudio\\cabinet\\program\\basics\\data\\odc.csv"
# file_path <- "C:\\Users\\sampo\\Dropbox\\RStudio\\cabinet\\program\\basics\\data\\odc.csv"
odc_data <- read_csv(file_path, locale = locale(encoding = "CP932"), progress = FALSE)

# file_path <- "/home/sampo/Dropbox/RStudio/cabinet/program/basics/data/issues.csv"
file_path <- "C:\\Users\\suzuki\\Dropbox\\RStudio\\cabinet\\program\\basics\\data\\issues.csv"
# file_path <- "C:\\Users\\sampo\\Dropbox\\RStudio\\cabinet\\program\\basics\\data\\issues.csv"
bugs <- read_csv(file_path, locale = locale(encoding = "UTF-8"), progress = FALSE)
```

## About This Tutorial
「dplyrのすゝめ」ではデータの扱い方、「ggplot2のすゝめ」では可視化の仕方を学びましたが、本チュートリアルでは実務で[R][R]を活用できるようにOBC分析の可視化事例とRedminチケットの可視化事例をチュートリアルを通して学びます。なお、本チュートリアルを実行するための必要な環境については[こちら](https://k-metrics.github.io/cabinet/program/basics/#チュートリアル資料について)で確認して下さい。

### Data
ODC分析用のデータとしては2015年度データ分析勉強会第6回で配布されたサンプルデータを用います。Redmineチケット分析用のデータとしては「dplyrのすゝめ」で用いたRedmineチケットデータを用います。以下にデータが表示されない場合やファイルが実行できない場合は`setup`チャンクの`file_path`変数に当該ファイルのフルパスが正しいパスが設定されているか確認して下さい。

#### ODC
```{r, echo=FALSE}
odc_data
```

#### Redmine
```{r, echo=FALSE}
bugs
```

#### 埋め込みデータセット
```{r, echo=FALSE}
mtcars
```

## ODC
ODC分析自体に関する説明については省略しますが、ODC分析のポイントはタグに対する集計と可視化だと考えます。例えば「欠陥タイプ」と「欠陥検出工程」をクロス集計すると下表のように比較的単純なタイプの欠陥がシステムテスト工程でも見つかり続けていることがわかります。
```{r, echo=FALSE}
odc_data %>% 
  dplyr::select(Status = 'ステータス', Result = '解決状況', Date = '発生日',
                Rank = '障害ランク', Step = '欠陥検出工程',
                Trigger = '発生トリガー', Type = '欠陥実装タイプ',
                Dtype = '欠陥タイプ') %>% 
  dplyr::count(Step, Dtype) %>%
  tidyr::spread(key = Step, value = n) %>% 
  dplyr::rename('欠陥タイプ' = Dtype)
```

このようにタグを用いて効率よくバグの原因や傾向を把握できるODB分析はいかに効率よく集計、可視化できるかポイントのひとつだと思います。[R Markdown][RM]でこれらの集計、可視化を実装しておけば、定期的なレポートは[R Markdown][RM]をknitするだけで作成できるというメリットがあります。


---
![Sampo Suzuki][CCI]
[CC BY-NC-SA 4.0][CC], Sampo Suzuki [`r format(Sys.time(), format = '%F %H:%M(%Z)')`]

<!-- Creative Commons -->
[CC]: http://creativecommons.org/licenses/by-nc-sa/4.0/deed.ja "CC BY-NC-SA 4.0"
[CCI]: https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png "CC BY-NC-SA 4.0 icon"

<!-- R -->
[R]: https://www.r-project.org/ "The R Project"
[CRAN]: https://cran.r-project.org/ "CRAN"
[ISM]: https://cran.ism.ac.jp/ "CRAN ISM"

<!-- RStudio -->
[RS]: https://www.rstudio.com/ "RStudio"
[RSD]: https://www.rstudio.com/products/RStudio/#Desktop "RStudio Desktop"
[RSS]: https://www.rstudio.com/products/RStudio/#Server "RStudio Server"
[RM]: http://rmarkdown.rstudio.com/ "R Markdown form RStudio"
[RSH]: https://github.com/rstudio/RStartHere "R Start Here"
[R4DS]: http://r4ds.had.co.nz/ "R for Data Science"

<!-- Packages -->
[DT]: https://rstudio.github.io/DT/ "An R interface to the DataTables library"
[formatr]: https://yihui.name/formatr/ "Format R code automatically"
[knitr]: https://yihui.name/knitr/ "Elegant, flexible and fast dynamic report generation with R"
[learnr]: https://rstudio.github.io/learnr/ "Interactive Tutorials for R"
[shiny]: https://shiny.rstudio.com/ "Shiny by RStudio"
[tidy]: http://tidyverse.org/ "The tidyverse"

