#,ƒvƒƒWƒFƒNƒg,ƒgƒ‰ƒbƒJ[,eƒ`ƒPƒbƒg,ƒXƒe[ƒ^ƒX,—Dæ“x,‘è–¼,ì¬Ò,’S“–Ò,XV“ú,ƒJƒeƒSƒŠ,‘ÎÛƒo[ƒWƒ‡ƒ“,ŠJn“ú,Šú“ú,—\’èH”,i’»—¦,ì¬“ú,I—¹“ú,ŠÖ˜A‚·‚éƒ`ƒPƒbƒg,Resolution,Affected version,à–¾
26266,Redmine,Patch,"",New,Normal,Russian translation for 3.4.0,Alexander Ryabinovskiy,"",2017-06-26 18:52,Translations,"","","","",0,2017-06-26 18:52,"","","","","Hi!
Here is translated ru.yml for Redmine 3.4.0. I created patch against r16698."
26265,Redmine,Patch,"",New,Normal,Japanese translation update (r16691: user link documentation),Go MAEDA,"",2017-06-26 15:03,Translations,"","","","",0,2017-06-26 15:03,"","","","",Translated user link documentation in public/help/ja/wiki_syntax_detailed_*.html.
26264,Redmine,Patch,"",New,Normal, Simplified Chinese translation for 3.3-stable,Toshi MARUYAMA,"",2017-06-26 14:38,Translations,3.3.4,"","","",0,2017-06-26 14:38,"","","","","From #26261.

<pre><code class=""diff"">
=== (+2,-3) config/locales/zh.yml ===
@@ -1199,6 +1199,5 @@
   label_new_project_issue_tab_enabled: ?¦gVŒš??h??
   setting_new_item_menu_tab: Œš—§V?Ûğ–Ú“I?–ÚØ??–Ú
   label_new_object_tab_enabled: ?¦ ""+"" ?‰ºf—ñ•\
-  error_no_projects_with_tracker_allowed_for_new_issue: There are no projects with trackers
-    for which you can create an issue
+  error_no_projects_with_tracker_allowed_for_new_issue: “–‘O?–Ú’†•s•ïŠÜ??“IæîçH?Œ^C•s”\?Œš??Œ^“IHì?B
   error_cannot_reassign_time_entries_to_an_issue_about_to_be_deleted: ›ß—p–Õ?•s”\dV•ª”z“‘¦«”í?œ“I”C?—¢B
</code></pre>"
26263,Redmine,Patch,"",New,Normal,Simplified Chinese translation for 3.2-stable,Toshi MARUYAMA,"",2017-06-26 14:37,Translations,3.2.7,"","","",0,2017-06-26 14:37,"","","","","From #26261.

<pre><code class=""diff"">
=== (+2,-3) config/locales/zh.yml ===
@@ -1177,5 +1177,4 @@
   label_any_open_issues: ”CˆÓ?s’†“I??
   label_no_open_issues: ”CˆÓ›ß??“I??
   label_default_values_for_new_users: V—p?àÒ??
-  error_cannot_reassign_time_entries_to_an_issue_about_to_be_deleted: Spent time cannot
-    be reassigned to an issue that is about to be deleted
+  error_cannot_reassign_time_entries_to_an_issue_about_to_be_deleted: ›ß—p–Õ?•s”\dV•ª”z“‘¦«”í?œ“I”C?—¢B
</code></pre>"
26261,Redmine,Patch,"",New,Normal,Updated Simplified Chinese translation file,Steven Wong,"",2017-06-26 11:14,Translations,"","","","",0,2017-06-26 11:14,"","","","","Simplified Chinese translation file updated for dev_20170625.
Please check the patch. Thanks.
"
26188,Redmine,Patch,"",Closed,Normal,Documentation (detailed syntax help & code) additions/improvements,Mischa The Evil,Jean-Philippe Lang,2017-06-25 11:08,Documentation,3.4.0,"","","",0,2017-06-18 13:52,2017-06-25 11:08,"ŠÖ˜A‚µ‚Ä‚¢‚é #4179, ŠÖ˜A‚µ‚Ä‚¢‚é #9600, ŠÖ˜A‚µ‚Ä‚¢‚é #13497, ƒuƒƒbƒN‚³‚ê‚Ä‚¢‚é #21375","","","Following #21375#note-11, I made four additional (code) documentation changes:

# -Complement external URL documentation.- +posted as #21375#note-11+
# Fix typo in detailed Japanse textile doc. (the closing angle bracket seems superfluous)
# Add user link documentation. (detailed syntax doc; this was still missing from #4179)
# Fix code doc indentation. (in @ApplicationHelper#parse_redmine_links@)
# Add code doc for forum & news links. (in @ApplicationHelper#parse_redmine_links@; this was missing from #9600)

I'll attach the four remaining patches implementing these changes. The patch serial, against current source:/trunk@16676, is produced using @git format-patch@ which makes it apply-able using ""@patch -p1 < 0001-...@"". This serial is a continuation of #21375#note-11 which includes patch 1/5 of this set, making these patches dependent on #21375#note-11 integration.
I'll also change the respective wiki pages accordingly when the patches have been committed.

Environment:
<pre>
Environment:
  Redmine version                3.3.3.devel@r16676
  Ruby version                   2.3.3-p222 (2016-11-21) [x86_64-linux]
  Rails version                  4.2.8
  Environment                    production
  Database adapter               Mysql2
SCM:
  Subversion                     1.8.8
  Git                            1.9.1
  Filesystem                     
Redmine plugins:
  no plugin installed
</pre>"
26187,Redmine,Patch,"",Closed,Normal,Japanese translation update (label_no_preview_alternative_html),Go MAEDA,"",2017-06-19 07:40,Translations,"","","","",0,2017-06-18 09:07,2017-06-19 07:40,"","","",Translated @label_no_preview_alternative_html@ added in r16673 (#26035).
26180,Redmine,Patch,"",Closed,Normal,"Change Russian translation for ""Estimated time""",Ivan Ilyukhin,"",2017-06-23 11:33,Translations,3.4.0,"","","",0,2017-06-16 16:34,2017-06-22 15:37,"","","",Fix translation for field_total_estimated_hours
26157,Redmine,Patch,"",Closed,Normal,Render all possible inline textile images,Holger Just,Jean-Philippe Lang,2017-06-17 09:45,Text formatting,3.4.0,"","","",0,2017-06-13 18:58,2017-06-17 09:45,"","","","In r15433, Redmine introduced a security measure to restrict embedding images to only those with valid schemes from Textile.

Now, if there are multiple images referenced on a page, with only one of them invalid, Redmine currently doesn't create @<img>@ tags for any of them since it would return from the replacement method too soon.

This patch fixes this behavior in that it still allows to embed all valid images and only refuses to embed the invalid ones by skipping the rest of the current @gsub@ iteration instead of the whole method. The patch was extracted from ""Planio"":https://plan.io/redmine-hosting/"
26149,Redmine,Patch,"",Closed,Normal,Remove duplicate method shell_quote,Jens Kr?mer,Jean-Philippe Lang,2017-06-17 09:43,Code cleanup/refactoring,3.4.0,"","","",0,2017-06-13 08:38,2017-06-17 09:43,"","","","There are two identical methods @shell_quote@ declared in @Redmine::Utils::Shell@ and @Redmine::Scm::Adapters::AbstractAdapter@.

This patch removes the duplicate declaration from @AbstractAdapter@ and also extracts a generic @shell_quote_command@ method into @Redmine::Utils::Shell@."
26139,Redmine,Patch,"",Reopened,Normal,Follow Gemfile's plugin loader as #24007,Sho HASHIMOTO,Jean-Philippe Lang,2017-06-18 13:57,Plugin API,"","","","",0,2017-06-12 11:31,2017-06-17 09:31,"ŠÖ˜A‚µ‚Ä‚¢‚é #13927, ƒuƒƒbƒN‚µ‚Ä‚¢‚é #24007","","",Plugin's Gemfile can't settable from Redmine::Plugin.directory yet.
26136,Redmine,Patch,"",Closed,Normal,Japanese translation update (r16538),Go MAEDA,"",2017-06-12 06:01,Translations,"","","","",0,2017-06-12 02:32,2017-06-12 06:01,"","","",Translated setting_show_custom_fields_on_registration introduced in r16538.
26130,Redmine,Patch,"",Closed,Normal,"Refactor ""multiple_values_detail"" struct creation",Thomas L?ber,Jean-Philippe Lang,2017-06-26 05:55,Code cleanup/refactoring,3.5.0,"","","",0,2017-06-09 14:42,2017-06-25 21:24,"","","","Hi,

In the ""IssuesHelper#details_to_strings"":/projects/redmine/repository/entry/trunk/app/helpers/issues_helper.rb method (source:trunk/app/helpers/issues_helper.rb@16387#L373) a new class (Struct) is created each time the method is called:

<pre><code class=""ruby"">
  multiple_values_detail = Struct.new(:property, :prop_key, :custom_field, :old_value, :value)
</code></pre>

Although classes are garbage collected in recent Ruby versions, it might be better to use a constant definition outside the method, like:

<pre><code class=""ruby"">
  MultipleValuesDetail = Struct.new(:property, :prop_key, :custom_field, :old_value, :value)
</code></pre>

Regards,
Thomas"
26125,Redmine,Patch,"",Closed,Normal,Unify form#query_form on calendar/gantt views with issues/spent time views,Mischa The Evil,Jean-Philippe Lang,2017-06-25 17:17,UI,3.5.0,"","","",0,2017-06-09 00:05,2017-06-25 17:17,"","","","I noticed a difference between the rendering of the query filter forms on the issues & spent time views and the query filter forms on the calendar and gantt views. I fixed it with the following changes:
* *1. Fix HTML structure of form#query_form on calendar/gantt views.*
This unifies the HTML structure of the query form on the calendars/show
and gantts/show views to be the same as it is currently for the issues
and spent time views, which were themself unified into the new
queries/_query_form partial in r15649.
* *2. Fix source indentation and newline usage.*
This unifies the source layout of the query form on the calendars/show
and the gantts/show views with the queries/_query_form partial.
* *3. Unify form#query_form structure on calendar/gantt views.*
This:
** moves the p with inline style on the calendar view (which
wraps the navigation buttons) out of div#query_form_content
and adds the contextual class to the element to unify this
with the gantt view (and to remove the inline style from
the element now that it's styled through a stylesheets'
style [.contextual in fact]);
** restores the 12px font-size of the calendar navigation
buttons;
** increases the font-size of the gantt zoom buttons to 12px;
** increases the margin of the calendar navigation and gantt
zoom buttons to 12px 0px.
* *4. Add test assertions to the four controller test cases.*

To make the changes a bit more visual, here some ASCII and image graphics:

|_.view    |_.was       |_.becomes   |
|issues    |<pre>  form#query_form
    inputs
    div#query_form_with_buttons.hide-when-print
      div#query_form_content
        fieldset#filters.collapsible
        fieldset#options
      p.buttons</pre> |<pre>  form#query_form
    inputs
    div#query_form_with_buttons.hide-when-print
      div#query_form_content
        fieldset#filters.collapsible
        fieldset#options
      p.buttons</pre> |
|          |!issues-current.png!       |!issues-fixed.png!      |
|spenttime |<pre>  form#query_form
    inputs
    div#query_form_with_buttons.hide-when-print
      div#query_form_content
        fieldset#filters.collapsible
        fieldset#options
      p.buttons</pre> |<pre>  form#query_form
    inputs
    div#query_form_with_buttons.hide-when-print
      div#query_form_content
        fieldset#filters.collapsible
        fieldset#options
      p.buttons</pre> |
|          |!spenttime-current.png!       |!spenttime-fixed.png!       |
|calendar  |<pre>  form#query_form
    inputs
    fieldset#filters.collapsible
    p(inlineStyles)
    p.buttons</pre> |<pre>  form#query_form
    inputs
    div#query_form_with_buttons.hide-when-print
      div#query_form_content
        fieldset#filters.collapsible
      p.contextual
      p.buttons</pre> |
|          |!calendar-current.png!       |!calendar-fixed.png!       |
|gantt     |<pre>  form#query_form
    inputs
    fieldset#filters.collapsible
    fieldset#options
    p.contextual
    p.buttons</pre> |<pre>  form#query_form
    inputs
    div#query_form_with_buttons.hide-when-print
      div#query_form_content
        fieldset#filters.collapsible
        fieldset#options
      p.contextual
      p.buttons</pre> |
|          |!gantt-current.png!    |!gantt-fixed.png!       |

I'll attach four patches implementing these changes. This patch serial, against current source:/trunk@16643, is produced using @git format-patch@ which makes the individual patches apply-able using ""@patch -p1 < 0001-...@"".

Environment:
<pre>
Environment:
  Redmine version                3.3.3.devel@r16643
  Ruby version                   2.3.3-p222 (2016-11-21) [x86_64-linux]
  Rails version                  4.2.8
  Environment                    production
  Database adapter               Mysql2
SCM:
  Subversion                     1.8.8
  Git                            1.9.1
  Filesystem                     
Redmine plugins:
  no plugin installed
</pre>
"
26122,Redmine,Patch,"",New,Normal,Implementation of visible conditions with inner join instead of subselect,Pavel Rosick?,"",2017-06-09 08:57,Performance,"","","","",0,2017-06-07 22:51,"","","","","The change from #21608 should be reverted because it's a speed regression:

1/ current version
<pre>EXISTS (SELECT 1 AS one FROM enabled_modules em WHERE em.project_id = projects.id AND em. NAME = 'issue_tracking')</pre>

2/ previous version (actually faster even without an index on enabled modules)
<pre>projects.id IN (SELECT project_id FROM enabled_modules em WHERE em.project_id = projects.id AND em. NAME = 'issue_tracking'</pre>

3/ fastest version (in some cases better indexes were used)
<pre>INNER JOIN `enabled_modules` ON `enabled_modules`.`project_id` = `projects`.`id` WHERE `enabled_modules`.`name` = 'issue_tracking'</pre> or
<pre>INNER JOIN `enabled_modules` ON `enabled_modules`.`project_id` = `projects`.`id` AND `enabled_modules`.`name` = 'issue_tracking'</pre>

Patches:
* revert of #21608, because the previous version was faster (about 30%)
* new index ""enabled_modules_name"", but it's not very helpful unless you have many projects (3000+)
* implementation of visible conditions with inner join instead of subselect, it passes all tests, but it should be refactored. I want to know what do you think about it first

<pre>
Rails version             4.2.8
Ruby version              2.1.9-p490 (x64-mingw32)
RubyGems version          2.6.12
Rack version              1.6.8
Middleware                Rack::Sendfile, Rack::ContentLength, ActionDispatch::Static, Rack::Lock, #<ActiveSupport::Cache::Strategy::LocalCache::Middleware:0x00000007745610>, Rack::Runtime, Rack::MethodOverride, ActionDispatch::RequestId, Rails::Rack::Logger, ActionDispatch::ShowExceptions, ActionDispatch::DebugExceptions, ActionDispatch::RemoteIp, ActionDispatch::Reloader, ActionDispatch::Callbacks, ActiveRecord::ConnectionAdapters::ConnectionManagement, ActiveRecord::QueryCache, ActionDispatch::Cookies, ActionDispatch::Session::CookieStore, ActionDispatch::Flash, ActionDispatch::ParamsParser, ActionDispatch::XmlParamsParser, Rack::Head, Rack::ConditionalGet, Rack::ETag, RequestStore::Middleware, OpenIdAuthentication
Environment               development
Database adapter          mysql2
Database schema version   20170607051650
</pre>"
26104,Redmine,Patch,"",New,Normal,Quick jump to issue only if searching for issues,Holger Just,"",2017-06-25 17:03,Search engine,Candidate for next minor release,"","","",0,2017-06-06 15:31,"","","","","Previously, we would always jump to the issue if a user searches for a, number which exists as an issue ID, regardless where the user searches. That made it impossible to search for e.g. prefixes of phone numbers in wiki pages.

With the attached patch, we are only jumping to the matching issue if we are searching for issues. This results in a behavior change for the quick search box in the the wiki and other areas. Previously, we would also jump to an issue there. Now, we just search in the wiki for the number.

The quick search bar in issues as well as the global search for all objects is unaffected by this change."
26091,Redmine,Patch,"",New,Normal,Allow to filter by any visible version on the global issues view,Holger Just,"",2017-06-26 14:46,Issues filter,Unplanned,"","","",0,2017-06-02 17:52,"","","","","Currently, the global issues view only allows to filter by system-shared versions but not e.g. for versions shared to some projects or not stared at all.

Since the global issue view is often used as a quick filter to check what is happening in all projects, filtering by any visible version would allow to drill down from there instead of having to first select the correct parent project and then starting the filter there. Also, with saved shared queries, a common starting point is the global issue view instead of individual projects.

The attached patch removes the restriction to only allow filtering by system-shared versions. Instead, it allows filtering by any version visible to the current user."
26043,Redmine,Patch,"",New,Normal,"When creating a new wiki page from a button, want to set the parent page automatically.",Minoru Maeda,"",2017-06-23 18:55,Wiki,3.5.0,"","","",0,2017-05-25 12:14,"","","","","This patch automatically sets the value on the form as the parent page of the new page, the page that clicked the ""New wiki page"" button.
However, it does not correspond to the creation of a new page in the ""+"" menu."
26030,Redmine,Patch,"",New,Normal,"Like issues and news comments, want to specify the display order of the forum's reply.",Minoru Maeda,"",2017-05-25 08:57,Forums,"","","","",0,2017-05-24 11:26,"","ŠÖ˜A‚µ‚Ä‚¢‚é #26033, ŠÖ˜A‚µ‚Ä‚¢‚é #11120","","","This patch also applies the setting order of comments in ""My account"" to the forum."
25876,Redmine,Patch,"",Closed,Normal,Gantt chart shows % done even if the field is disabled for the tracker,Jens Kr?mer,"",2017-06-15 06:49,Gantt,3.4.0,"","","",0,2017-05-17 02:55,2017-06-15 06:49,"","","","When disabling the _% done_ field for a given tracker, issues of this tracker still have _x %_ in their label in the gantt chart. The attached patch fixes this by checking @issue.disabled_core_fields@ when building the label."
25861,Redmine,Patch,"",Closed,Normal,CSV Importer - handle UndefinedConversionErrors,Jens Kr?mer,Jean-Philippe Lang,2017-06-06 22:56,Importers,3.2.7,"","","",0,2017-05-16 11:07,2017-06-06 22:56,"","","","The CSV import already handles a couple of Exceptions that may happen when the user-selected encoding does not match the real encoding of the CSV (or it contains otherwise illegal byte sequences). We recently encountered @Encoding::UndefinedConversionError@, which is not yet caught by that error handling. The attached patches add a test case and a fix for that."
25853,Redmine,Patch,"",New,Normal,Move left bottom links from project settings above,Marius BALTEANU,"",2017-06-27 00:59,UI,Candidate for next minor release,"","","",0,2017-05-15 21:50,"","","","","This patch is related to #24720 where all ""New item"" links were been moved above the list. 

There are three more links left under the list and I think it's better to have them all above the list:
1. ""Close completed versions"" from Versions tab
2. ""Delete"" from Wiki tab
3. ""Reset"" from Activities tab

I've attached 2 patches:

h3. move_close_completed_versions_above.patch

* adds the ""icon"" and ""icon-lock"" classes to the link (the same icon is used for button ""Close project"") 
* adds a class ""left"" for existing contextual class to let the icons aligned to left (according to the #24720)

h3. move_delete_and_reset_above_the_list.patch

* moves the ""Delete"" link from wiki tab on the same line with the wiki input field. I find it more natural to be there.
* moves the ""Reset"" link from activities above the list.
 
I made this patch after I find out that our users didn't know about the button ""Close completed version"" which is very well hidden when the projects have many versions. "
25775,Redmine,Patch,"",Closed,Normal,Show assignee's icon in addition to author's icon,Go MAEDA,Jean-Philippe Lang,2017-06-10 14:27,UI,3.4.0,"","","",0,2017-05-06 08:01,2017-06-10 14:27,ŠÖ˜A‚µ‚Ä‚¢‚é #19648,"","","In current versions of Redmine, author's icon is displayed in the upper left corner of issues if ""Use Gravatar user icons"" setting is enabled.

I think it would be very useful if we can see assignee's icon in addition to author's icon because who is the person in charge is important information to manage projects.

Currently we can see very small (14px) assignee's icon in ""Assignee"" field but it is not noticeable. If attached patch (attachment:0001-Show-assignee-s-icon-in-addition-to-author-s-icon.patch) is applied, assignee's icon will be much noticeable and we can easily know current assignee.

!{border: 1px solid #ccc;}.assignee-icon-with-author-icon@2x.png!"
25745,Redmine,Patch,"",Closed,Normal,Optimize Gantt Charts for mobile screens,Felix Gliesche,Jean-Philippe Lang,2017-05-27 09:36,UI - Responsive,3.2.7,"","","",0,2017-05-03 12:12,2017-05-27 09:36,"","","","Once the screens goes below a certain width (~400px) it is impossible to horiziontally scroll the gantt chart area:

!before.png!

Attached you will find a patch that fixes this problem by setting the column that holds the issues to a width relative to the screen width, rather than a fixed width on mobile devices. 

!after.png!"
25731,Redmine,Patch,"",Closed,Normal,Use only one if with two conditions in issue show instead of two ifs (if in if),Marius BALTEANU,"",2017-05-30 14:05,Code cleanup/refactoring,"","","","",0,2017-05-01 16:43,2017-05-30 14:05,"","","","I think that there are no reasons to use two ifs in source:trunk/app/views/issues/show.html.erb#L67. I propose to use only one with both conditions.

"
25724,Redmine,Patch,"",Closed,Normal,Min length of custom field isn't stored due to typo in safe_attributes,Jens Kr?mer,Jean-Philippe Lang,2017-06-06 22:48,Custom fields,3.4.0,"","","",0,2017-04-28 15:58,2017-06-06 22:48,"","","",patch attached
25664,Redmine,Patch,"",Closed,Normal,Traditional Chinese translation (to r16543),ChunChang Lo,"",2017-05-19 17:01,Translations,"","","","",0,2017-04-21 06:26,2017-05-19 17:01,ƒRƒs[Œ³ #25556,"","","* New
** field_default_assigned_to, setting_show_custom_fields_on_registration
"
25653,Redmine,Patch,"",Closed,Normal,Fix NoMethodError on HEAD requests to AccountController#register,Holger Just,Jean-Philippe Lang,2017-05-27 09:34,Accounts / authentication,3.2.7,"","","",0,2017-04-19 19:06,2017-05-27 09:34,"","","","The attached patch fixes a NoMethodError when attempting to run a HEAD request against AccountController#register.

The cause of the bug is that HEAD requests did not trigger the check for @request.get?@."
25628,Redmine,Patch,"",Closed,Normal,Better wording for issue update conflict resolution in German,Felix Sch?fer,"",2017-05-19 18:08,Translations,3.4.0,"","","",0,2017-04-18 11:50,2017-05-19 18:08,"","","",The german translation of the update conflict resolution options are not very clear.
25609,Redmine,Patch,"",Closed,Normal,Change Japanese translation for field_attr_*,Go MAEDA,"",2017-04-16 17:21,Translations,3.4.0,"","","",0,2017-04-15 11:36,2017-04-16 17:21,"","","","This patch improves Japanese translation for field_attr_* which are used in LDAP configuration page.

* *Fix UI inconsistency*: Japanese translation for ""Login"", ""First name"", ""Last name"" and ""Email"" in Redmine are ""ƒƒOƒCƒ“ID"", ""–¼"", ""©"", ""ƒ[ƒ‹ƒAƒhƒŒƒX"". But different words (""ƒƒOƒCƒ“"", ""–¼‘O"", ""•cš""@and ""ƒ[ƒ‹"") are used in field_attr_*.
* *Improve understandability:* The current translations, ""ƒƒOƒCƒ“‘®«"", ""–¼‘O‘®«"", ""•cš‘®«"" and ""ƒ[ƒ‹‘®«"", are look like one word. In order to resolve this problem by indicates that they are two words, the patch insert a particle ""‚Ì"":https://en.wikipedia.org/wiki/Japanese_particles#no between words (""–¼‘®«"" -> ""–¼‚Ì‘®«"")."
25590,Redmine,Patch,"",Closed,High,prevent deadlocks in attachment deduplication,Jens Kr?mer,Jean-Philippe Lang,2017-04-13 14:10,Attachments,"","","","",0,2017-04-12 03:53,2017-04-13 14:10,ƒuƒƒbƒN‚µ‚Ä‚¢‚é #25215,"","","At Planio we encountered occasional deadlocks caused by the inner lock statement on the query selecting a potentially already existing identical attachment. Running the query without @lock@ first and locking the found record second solved the problem for us.

To account for the possible failure of the inner lock (i.e. when @existing@ was found but cannot be locked) this patch also adds a @rescue@ clause that silently ignores such errors. Deduplication did not happen in this case either because the duplicate was removed (then a retry would be useless) or the database aborted the transaction (deadlock or waited too long for the lock, a retry might work but I'm not sure it's worth it). "
25573,Redmine,Patch,"",Closed,Normal,Bulgarian translation,Ivan Cenov,"",2017-04-13 07:19,Translations,"","","","",0,2017-04-11 09:42,2017-04-13 07:19,"","","","Translated
* field_default_assigned_to
* setting_show_custom_fields_on_registration"
25570,Redmine,Patch,"",New,Normal,unchecked use of params[:query],Jens Kr?mer,"",2017-04-11 06:56,Code cleanup/refactoring,"","","","",0,2017-04-11 06:54,"","","","","Requests to URLs like @/issues?query=12@ result in an application error because @query.rb@ expects @params[:query]@ to be a hash, which it isn't in this case.

I know that there are a more instances in the code base where we assume @params[:foo]@ to be a hash without explicit type checking. This patch does not attempt to address this problem on a global level. For whatever reason it happens to us quite often in this particular place, causing false alerts in server monitoring.

This patch adds an explicit type check to resolve this @params[:query]@ case. As a bonus it makes the following 4 lines where values are taken out of the hash a bit nicer.

In general I think it would be preferably to raise an error of the 4xx class in such cases. Are there any plans to make use of Rails' Strong Parameters feature in the future? I think using these permit / require calls on parameters in controllers would catch such wrong types early and would lead to responses with a more appropriate error code automatically."
25557,Redmine,Patch,"",Closed,Normal,Japanese translation update (r16528),Go MAEDA,"",2017-04-09 06:02,Translations,"","","","",0,2017-04-09 02:26,2017-04-09 06:02,"","","","Translated field_default_assigned_to.
"
25556,Redmine,Patch,"",Closed,Normal,Traditional Chinese translation (to r16526),ChunChang Lo,"",2017-04-08 18:42,Translations,"","","","",0,2017-04-08 17:53,2017-04-08 18:42,"ƒRƒs[Œ³ #25341, ƒRƒs[æ #25664","","","* New
** field_digest
"
25526,Redmine,Patch,"",Closed,Normal,Revert API change in spent_hours field in issue#show,Holger Just,Jean-Philippe Lang,2017-05-05 06:37,REST API,3.2.6,"","","",0,2017-04-05 15:29,2017-04-05 18:10,ŠÖ˜A‚µ‚Ä‚¢‚é #20661,"","","When preloading the @spent_hours@ of issues (as e.g. done for #20661, they default to @0@ instead of the previous default @0.0@. This results in a change of the @issue#show@ API which now also returns an Integer instead of a Float. Previously (in Redmine 3.2), the API used to return the data the following way:

<pre><code class=""json"">
{
  ""issue"": {
    ""id"": 15,
    ...
    ""spent_hours"": 0.0,
    ...
  }
}
</code></pre>

While later versions (including the current trunk) return them as follows:

<pre><code class=""json"">
{
  ""issue"": {
    ""id"": 15,
    ...
    ""spent_hours"": 0,
    ...
  }
}
</code></pre>

This appears to break strict API clients which expect a float there. In our tests, this change appears to break the current Android version of RedminePM, probably due to some internal type exceptions. The attached patch was extracted from ""Planio"":https://plan.io/redmine-hosting and fixes this behavior. With it, we follow the previous behavior of always sending Floats.

"
25518,Redmine,Patch,"",Closed,Normal,Bulgarian translation,Ivan Cenov,"",2017-04-05 18:52,Translations,"","","","",0,2017-04-05 07:14,2017-04-05 18:52,"","","","Translated
* field_digest
* label_last_notes"
25507,Redmine,Patch,"",Closed,Normal,Japanese translation update (r16457),Go MAEDA,"",2017-04-05 15:38,Translations,"","","","",0,2017-04-04 03:36,2017-04-05 15:38,"","","","Translated field_digest.
"
25505,Redmine,Patch,"",Closed,Normal,Russian translation for 3.2-stable,Toshi MARUYAMA,"",2017-04-03 18:47,Translations,3.2.6,"","","",0,2017-04-03 18:26,2017-04-03 18:47,"","","","From #25349.

<pre><code class=""diff"">
=== (+2,-3) config/locales/ru.yml ===
@@ -1283,5 +1283,4 @@
   label_any_open_issues: „|„„q„„u „€„„„{„‚„„„„„u „x„p„t„p„‰„y
   label_no_open_issues: „~„u„„ „€„„„{„‚„„„„„‡ „x„p„t„p„‰
   label_default_values_for_new_users: „H„~„p„‰„u„~„y„‘ „„€ „…„}„€„|„‰„p„~„y„ „t„|„‘ „~„€„r„„‡ „„€„|„„x„€„r„p„„„u„|„u„z
-  error_cannot_reassign_time_entries_to_an_issue_about_to_be_deleted: Spent time cannot
-    be reassigned to an issue that is about to be deleted
+  error_cannot_reassign_time_entries_to_an_issue_about_to_be_deleted: „H„p„„„‚„p„‰„u„~„~„€„u „r„‚„u„}„‘ „~„u „}„€„w„u„„ „q„„„„ „„u„‚„u„~„p„x„~„p„‰„u„~„€ „~„p „x„p„t„p„‰„…, „{„€„„„€„‚„p„‘ „q„…„t„u„„ „…„t„p„|„u„~„p
</code></pre>"
25502,Redmine,Patch,"",Closed,Normal,Russian translation for 3.3-stable,Toshi MARUYAMA,"",2017-04-03 16:40,Translations,3.3.3,"","","",0,2017-04-03 16:30,2017-04-03 16:40,"","","","From #25397.

<pre><code class=""diff"">
=== (+2,-3) config/locales/ru.yml ===
@@ -1308,7 +1308,6 @@
   label_new_project_issue_tab_enabled: „O„„„€„q„‚„p„w„p„„„ „r„{„|„p„t„{„… ""„N„€„r„p„‘ „x„p„t„p„‰„p""
   setting_new_item_menu_tab: „B„{„|„p„t„{„p „}„u„~„ „„‚„€„u„{„„„p „t„|„‘ „ƒ„€„x„t„p„~„y„‘ „~„€„r„„‡ „€„q„Œ„u„{„„„€„r
   label_new_object_tab_enabled: „O„„„€„q„‚„p„w„p„„„ „r„„„p„t„p„„‹„y„z „ƒ„„y„ƒ„€„{ ""+""
-  error_no_projects_with_tracker_allowed_for_new_issue: There are no projects with trackers
-    for which you can create an issue
+  error_no_projects_with_tracker_allowed_for_new_issue: „O„„„ƒ„…„„„ƒ„„„r„…„„„ „„‚„€„u„{„„„, „„€ „„„‚„u„{„u„‚„p„} „{„€„„„€„‚„„‡ „r„ „}„€„w„u„„„u „ƒ„€„x„t„p„r„p„„„ „x„p„t„p„‰„y
   error_cannot_reassign_time_entries_to_an_issue_about_to_be_deleted: Spent time cannot
     be reassigned to an issue that is about to be deleted
</code></pre>"
25495,Redmine,Patch,"",Closed,Low,spelling fixes,ka seven,"",2017-04-02 13:03,Code cleanup/refactoring,"","","","",0,2017-04-01 22:09,2017-04-02 05:36,"","","","patch contains some spelling fixes ( just in comments ) as found by a bot ( https://github.com/ka7/misspell_fixer ).
see also http://www.misfix.org
Also, any upcoming License changes (e.g. GPL2 to GPL3+) are hereby granted.

base for the diff was @adce697 on github.com"
25491,Redmine,Patch,"",Needs feedback,Normal,List of role members,David C?t?-Tremblay,"",2017-06-02 09:46,UI,"","","","",0,2017-03-31 23:12,"","","","","This simple patch provides a list of all members of a role grouped by projects.

Tested and working with Redmine 3.2 & 3.3"
25483,Redmine,Patch,"",Closed,Normal,Forbid to edit/update/delete the anonymous user,Holger Just,Jean-Philippe Lang,2017-04-03 17:44,Accounts / authentication,3.4.0,"","","",0,2017-03-30 15:20,2017-04-03 15:06,"","","","Right now, an admin can (in principal) edit and even delete the Anonymous user via the UserController since it doesn't restrict its query to logged users. This should not be possible and doesn't seem to be intended from the surrounding code:

* When showing the edit form for the anonymous user, a template error occurs in @app/views/users/_general.html.erb@.
* When deleting the anonynmous user, all its objects will be assigned to itself and the user gets deleted. While it will be automatically recreated on next access, all its issues, journals, ... will have dangling @user_ids@ pointing to the old anonymous user.

The attached patch restricts edit/update/delete of users to logged users. Displaying the user page of Anonymous is still supported. The Patch was extracted from ""Planio"":https://plan.io/redmine-hosting."
25459,Redmine,Patch,"",Closed,Normal,Portuguese translation for 3.3-stable,Toshi MARUYAMA,"",2017-03-29 08:34,Translations,3.3.3,"","","",0,2017-03-29 06:42,2017-03-29 08:34,"","","","From #25204

<pre><code class=""diff"">
=== (+21,-25) config/locales/pt.yml ===
@@ -1177,30 +1177,26 @@
   label_default_values_for_new_users: Valores por defeito para novo utilizadores
   setting_sys_api_key: Chave da API
   setting_lost_password: Perdi a palavra-chave
-  mail_subject_security_notification: Security notification
-  mail_body_security_notification_change: ! '%{field} was changed.'
-  mail_body_security_notification_change_to: ! '%{field} was changed to %{value}.'
-  mail_body_security_notification_add: ! '%{field} %{value} was added.'
-  mail_body_security_notification_remove: ! '%{field} %{value} was removed.'
-  mail_body_security_notification_notify_enabled: Email address %{value} now receives
-    notifications.
-  mail_body_security_notification_notify_disabled: Email address %{value} no longer
-    receives notifications.
-  mail_body_settings_updated: ! 'The following settings were changed:'
-  field_remote_ip: IP address
-  label_wiki_page_new: New wiki page
-  label_relations: Relations
-  button_filter: Filter
-  mail_body_password_updated: Your password has been changed.
-  label_no_preview: No preview available
-  error_no_tracker_allowed_for_new_issue_in_project: The project doesn't have any trackers
-    for which you can create an issue
-  label_tracker_all: All trackers
-  label_new_project_issue_tab_enabled: Display the ""New issue"" tab
-  setting_new_item_menu_tab: Project menu tab for creating new objects
-  label_new_object_tab_enabled: Display the ""+"" drop-down
-  error_no_projects_with_tracker_allowed_for_new_issue: There are no projects with trackers
-    for which you can create an issue
+  mail_subject_security_notification: Notifica??o de seguran?a
+  mail_body_security_notification_change: ! '%{field} foi modificado.'
+  mail_body_security_notification_change_to: ! '%{field} foi modificado para %{value}.'
+  mail_body_security_notification_add: ! '%{field} %{value} foi adicionado.'
+  mail_body_security_notification_remove: ! '%{field} %{value} foi removido.'
+  mail_body_security_notification_notify_enabled: O email %{value} agora recebe notifica??es.
+  mail_body_security_notification_notify_disabled: O email %{value} j? n?o recebe notifica??es.
+  mail_body_settings_updated: ! 'As seguintes configura??es foram modificadas:'
+  field_remote_ip: Endere?o IP
+  label_wiki_page_new: Nova p?gina wiki
+  label_relations: Rela??es
+  button_filter: Filtro
+  mail_body_password_updated: A sua palavra-chave foi atualizada.
+  label_no_preview: Sem pr?-visualiza??o dispon?vel
+  error_no_tracker_allowed_for_new_issue_in_project: O projeto n?o possui nenhum tipo de tarefa para o qual voc? pode criar uma tarefa
+  label_tracker_all: Todos os tipos de tarefa
+  label_new_project_issue_tab_enabled: Apresentar a aba ""Nova tarefa""
+  setting_new_item_menu_tab: Aba de Projeto para criar novos objetos
+  label_new_object_tab_enabled: Apresentar a aba ""+""
+  error_no_projects_with_tracker_allowed_for_new_issue: N?o h? projetos com tipos de tarefa para os quais voc? pode criar uma tarefa
   field_textarea_font: Font used for text areas
   label_font_default: Default font
   label_font_monospace: Monospaced font
</code></pre>"
25458,Redmine,Patch,"",Closed,Normal,Portuguese translation for 3.2-stable,Toshi MARUYAMA,"",2017-03-29 08:36,Translations,3.2.6,"","","",0,2017-03-29 06:40,2017-03-29 08:36,"","","","From #25204

<pre><code class=""diff"">
=== (+9,-10) config/locales/pt.yml ===
@@ -1168,13 +1168,13 @@
   label_assigned_issues: Assigned issues
   label_field_format_enumeration: Key/value list
   label_f_hour_short: '%{value} h'
-  field_default_version: Default version
-  error_attachment_extension_not_allowed: Attachment extension %{extension} is not allowed
-  setting_attachment_extensions_allowed: Allowed extensions
-  setting_attachment_extensions_denied: Disallowed extensions
-  label_any_open_issues: any open issues
-  label_no_open_issues: no open issues
-  label_default_values_for_new_users: Default values for new users
+  field_default_version: Vers?o por defeito
+  error_attachment_extension_not_allowed: A extens?o %{extension} do ficheiro anexado n?o ? permitida
+  setting_attachment_extensions_allowed: Extens?es permitidas
+  setting_attachment_extensions_denied: Extens?es n?o permitidas
+  label_any_open_issues: Quaisquer tarefas abertas
+  label_no_open_issues: Sem tarefas abertas
+  label_default_values_for_new_users: Valores por defeito para novo utilizadores
   setting_sys_api_key: Chave da API
   setting_lost_password: Perdi a palavra-chave
   mail_subject_security_notification: Security notification
@@ -1211,8 +1211,7 @@
   setting_mail_handler_enable_regex_delimiters: Enable regular expressions
   error_move_of_child_not_possible: 'Subtask %{child} could not be moved to the new
     project: %{errors}'
-  error_cannot_reassign_time_entries_to_an_issue_about_to_be_deleted: Spent time cannot
-    be reassigned to an issue that is about to be deleted
+  error_cannot_reassign_time_entries_to_an_issue_about_to_be_deleted: O tempo gasto n?o pode ser alterado numa tarefa que ser? apagada
   setting_timelog_required_fields: Required fields for time logs
   label_attribute_of_object: '%{object_name}''s %{name}'
   label_user_mail_option_only_assigned: Only for things I watch or I am assigned to
</code></pre>"
25402,Redmine,Patch,"",Closed,Normal,stop misusing distance_in_words,Greg T,"",2017-04-21 14:02,Translations,"","","","",0,2017-03-22 13:26,2017-04-21 13:40,ŠÖ˜A‚µ‚Ä‚¢‚é #25130,"","",When _x_hours_ and _x_days_ are *not* used for a reference to a past point in time relative to the present moment then datetime.distance_in_words must not be used as it's impossible to fix the Hungarian/Magyar language files that way.
25397,Redmine,Patch,"",Closed,Normal,Russian translation update (r16388),Go MAEDA,"",2017-04-05 19:12,Translations,"","","","",0,2017-03-22 06:32,2017-04-05 19:12,ŠÖ˜A‚µ‚Ä‚¢‚é #25392,"","","From #25392, translated by  Ilya Potapov.

*  error_no_projects_with_tracker_allowed_for_new_issue
*  field_textarea_font
*  label_font_default
*  label_font_monospace
*  label_font_proportional
*  label_table_of_contents
*  setting_commit_logs_formatting
*  setting_mail_handler_enable_regex_delimiters
*  error_move_of_child_not_possible
*  setting_timelog_required_fields
*  label_attribute_of_object
*  label_user_mail_option_only_assigned
*  label_user_mail_option_only_owner
*  warning_fields_cleared_on_bulk_edit
*  field_updated_by
*  field_last_updated_by
*  field_full_width_layout
*  label_last_notes"
25392,Redmine,Patch,"",Closed,Normal,Change Russian translation for field_due_date and label_relation_new,Ilya Potapov,Jean-Philippe Lang,2017-04-03 15:33,Translations,3.4.0,"","","",0,2017-03-21 19:39,2017-04-03 15:33,"ŠÖ˜A‚µ‚Ä‚¢‚é #25397, ŠÖ˜A‚µ‚Ä‚¢‚é #25349","","","There is a mistranslation for these labels in redmine:

* field_due_date: „D„p„„„p „x„p„r„u„‚„Š„u„~„y„‘
** In russian it has the meaning of *actual* date of completeness, when all is done. Due date is like a deadline, so it should be translated as ""„R„‚„€„{ „x„p„r„u„‚„Š„u„~„y„‘""
* label_relation_new: „N„€„r„€„u „€„„„~„€„Š„u„~„y„u
** In russian it has the meaning of new relationship with somebody, or new point of view about something. So it should be translated as ""„N„€„r„p„‘ „ƒ„r„‘„x„"" to be consistent with label_relation_delete: ""„T„t„p„|„y„„„ „ƒ„r„‘„x„""

I've prepared a new ru.yml file based on current trunk (r16420) (unfortunately i'm not familiar with patches) - please find it in the attachments.

This file also contains ru translation for new labels which were not translated yet except one: ""error_cannot_reassign_time_entries_to_an_issue_about_to_be_deleted"":
* If one tell me when redmine shows this label i'll find an accurate translation for this.


It would be great to add this feature to version:3.4.0"
25349,Redmine,Patch,"",Closed,Normal,Russian translation (r16388),Kirill Bezrukov,"",2017-04-05 19:14,Translations,"","","","",0,2017-03-16 13:20,2017-04-03 18:52,"ŠÖ˜A‚µ‚Ä‚¢‚é #25392, ƒRƒs[Œ³ #15953","","","<pre>
error_no_projects_with_tracker_allowed_for_new_issue: „N„u„„ „„‚„€„u„{„„„€„r „ƒ „„„‚„u„{„u„‚„p„}„y
    „t„|„‘ „{„€„„„€„‚„„‡ „}„€„w„~„€ „ƒ„€„x„t„p„„„ „x„p„t„p„‰„…
  field_textarea_font: „Y„‚„y„†„„ „t„|„‘ „„€„|„u„z „€„„y„ƒ„p„~„y„‘
  label_font_default: „Y„‚„y„†„„ „„€ „…„}„€„|„‰„p„~„y„
  label_font_monospace: „M„€„~„€„Š„y„‚„y„~„~„„z „Š„‚„y„†„„
  label_font_proportional: „P„‚„€„„€„‚„ˆ„y„€„~„p„|„„~„„z „Š„‚„y„†„„
  setting_timespan_format: „U„€„‚„}„p„„ „„‚„€„}„u„w„…„„„{„p „r„‚„u„}„u„~„y
  label_table_of_contents: „R„€„t„u„‚„w„p„~„y„u
  setting_commit_logs_formatting: „I„ƒ„„€„|„„x„€„r„p„„„ „†„€„‚„}„p„„„y„‚„€„r„p„~„y„u „r „y„x„}„u„~„u„~„y„‘„‡
  setting_mail_handler_enable_regex_delimiters: „I„ƒ„„€„|„„x„€„r„p„„„ „‚„u„s„…„|„‘„‚„~„„u „r„„‚„p„w„u„~„y„‘
  error_move_of_child_not_possible: '„P„€„t„x„p„t„p„‰„p %{child} „~„u „}„€„w„u„„ „q„„„„ „„u„‚„u„~„u„ƒ„u„~„p „r „~„€„r„„z 
    „„‚„€„u„{„„: %{errors}'
  error_cannot_reassign_time_entries_to_an_issue_about_to_be_deleted: „H„p„„„‚„p„‰„u„~„~„€„u „r„‚„u„}„‘ „~„u „}„€„w„u„„
    „q„„„„ „„u„‚„u„~„p„x„~„p„‰„u„~„€ „~„p „x„p„t„p„‰„…, „{„€„„„€„‚„p„‘ „q„…„t„u„„ „…„t„p„|„u„~„p
  setting_timelog_required_fields: „O„q„‘„x„p„„„u„|„„~„„u „„€„|„‘ „t„|„‘ „„„‚„…„t„€„x„p„„„‚„p„„
  label_attribute_of_object: '%{object_name} %{name}'
  label_user_mail_option_only_assigned: „S„€„|„„{„€ „t„|„‘ „€„q„Œ„u„{„„„€„r, „{„€„„„€„‚„„u „‘ „€„„„ƒ„|„u„w„y„r„p„ „y„|„y „{„€„„„€„‚„„u „~„p„x„~„p„‰„u„~„ „~„p „}„u„~„‘
  label_user_mail_option_only_owner: „S„€„|„„{„€ „t„|„‘ „€„q„Œ„u„{„„„€„r, „{„€„„„€„‚„„u „‘ „€„„„ƒ„|„u„w„y„r„p„ „y„|„y „r „{„€„„„€„‚„„‡ „‘ „‘„r„|„‘„„ƒ„ „r„|„p„t„u„|„„ˆ„u„}
  warning_fields_cleared_on_bulk_edit: „I„x„}„u„~„u„~„y„‘ „„‚„y„r„u„t„…„„ „{ „p„r„„„€„}„p„„„y„‰„u„ƒ„{„€„}„… „…„t„p„|„u„~„y„
???? „x„~„p„‰„u„~„y„z „y„x „€„t„~„€„s„€ „y„|„y „~„u„ƒ„{„€„|„„{„y„‡ „„€„|„u„z „~„p „r„„q„‚„p„~„~„„‡ „€„q„Œ„u„{„„„p„‡
  field_updated_by: „I„x„}„u„~„u„~„€
  field_last_updated_by: „P„€„ƒ„|„u„t„~„u„u „y„x„}„u„~„u„~„y„u
  field_full_width_layout: „P„€ „Š„y„‚„y„~„u
  label_last_notes: „P„€„ƒ„|„u„t„~„u„u „„‚„y„}„u„‰„p„~„y„u
</pre>"
25341,Redmine,Patch,"",Closed,Normal,Traditional Chinese translation (to r16409),ChunChang Lo,"",2017-03-16 13:08,Translations,"","","","",0,2017-03-16 04:57,2017-03-16 13:08,"ƒRƒs[Œ³ #25277, ƒRƒs[æ #25556","","","* New
** label_last_notes
"
