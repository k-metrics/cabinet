#,プロジェクト,トラッカー,親チケット,ステータス,優先度,題名,作成者,担当者,更新日,カテゴリ,対象バージョン,開始日,期日,予定工数,進捗率,作成日,終了日,関連するチケット,Resolution,Affected version,説明
25341,Redmine,Patch,NA,Closed,Normal,Traditional Chinese translation (to r16409),ChunChang Lo,NA,2017-03-16T13:08:00Z,Translations,NA,NA,NA,NA,0,2017-03-16T04:57:00Z,2017-03-16T13:08:00Z,"コピー元 #25277, コピー先 #25556",NA,NA,"* New
** label_last_notes
"
25349,Redmine,Patch,NA,Closed,Normal,Russian translation (r16388),Kirill Bezrukov,NA,2017-04-05T19:14:00Z,Translations,NA,NA,NA,NA,0,2017-03-16T13:20:00Z,2017-04-03T18:52:00Z,"関連している #25392, コピー元 #15953",NA,NA,"<pre>
error_no_projects_with_tracker_allowed_for_new_issue: Нет проектов с трекерами
    для которых можно создать задачу
  field_textarea_font: Шрифт для полей описания
  label_font_default: Шрифт по умолчанию
  label_font_monospace: Моноширинный шрифт
  label_font_proportional: Пропорциональный шрифт
  setting_timespan_format: Формат промежутка времени
  label_table_of_contents: Содержание
  setting_commit_logs_formatting: Использовать форматирование в изменениях
  setting_mail_handler_enable_regex_delimiters: Использовать регулярные выражения
  error_move_of_child_not_possible: 'Подзадача %{child} не может быть перенесена в новый 
    проект: %{errors}'
  error_cannot_reassign_time_entries_to_an_issue_about_to_be_deleted: Затраченное время не может
    быть переназначено на задачу, которая будет удалена
  setting_timelog_required_fields: Обязательные поля для трудозатрат
  label_attribute_of_object: '%{object_name} %{name}'
  label_user_mail_option_only_assigned: Только для объектов, которые я отслеживаю или которые назначены на меня
  label_user_mail_option_only_owner: Только для объектов, которые я отслеживаю или в которых я являюсь владельцем
  warning_fields_cleared_on_bulk_edit: Изменения приведут к автоматическому удалению
???? значений из одного или нескольких полей на выбранных объектах
  field_updated_by: Изменено
  field_last_updated_by: Последнее изменение
  field_full_width_layout: По ширине
  label_last_notes: Последнее примечание
</pre>"
25392,Redmine,Patch,NA,Closed,Normal,Change Russian translation for field_due_date and label_relation_new,Ilya Potapov,Jean-Philippe Lang,2017-04-03T15:33:00Z,Translations,3.4.0,NA,NA,NA,0,2017-03-21T19:39:00Z,2017-04-03T15:33:00Z,"関連している #25397, 関連している #25349",NA,NA,"There is a mistranslation for these labels in redmine:

* field_due_date: Дата завершения
** In russian it has the meaning of *actual* date of completeness, when all is done. Due date is like a deadline, so it should be translated as ""Срок завершения""
* label_relation_new: Новое отношение
** In russian it has the meaning of new relationship with somebody, or new point of view about something. So it should be translated as ""Новая связь"" to be consistent with label_relation_delete: ""Удалить связь""

I've prepared a new ru.yml file based on current trunk (r16420) (unfortunately i'm not familiar with patches) - please find it in the attachments.

This file also contains ru translation for new labels which were not translated yet except one: ""error_cannot_reassign_time_entries_to_an_issue_about_to_be_deleted"":
* If one tell me when redmine shows this label i'll find an accurate translation for this.


It would be great to add this feature to version:3.4.0"
25397,Redmine,Patch,NA,Closed,Normal,Russian translation update (r16388),Go MAEDA,NA,2017-04-05T19:12:00Z,Translations,NA,NA,NA,NA,0,2017-03-22T06:32:00Z,2017-04-05T19:12:00Z,関連している #25392,NA,NA,"From #25392, translated by  Ilya Potapov.

*  error_no_projects_with_tracker_allowed_for_new_issue
*  field_textarea_font
*  label_font_default
*  label_font_monospace
*  label_font_proportional
*  label_table_of_contents
*  setting_commit_logs_formatting
*  setting_mail_handler_enable_regex_delimiters
*  error_move_of_child_not_possible
*  setting_timelog_required_fields
*  label_attribute_of_object
*  label_user_mail_option_only_assigned
*  label_user_mail_option_only_owner
*  warning_fields_cleared_on_bulk_edit
*  field_updated_by
*  field_last_updated_by
*  field_full_width_layout
*  label_last_notes"
25402,Redmine,Patch,NA,Closed,Normal,stop misusing distance_in_words,Greg T,NA,2017-04-21T14:02:00Z,Translations,NA,NA,NA,NA,0,2017-03-22T13:26:00Z,2017-04-21T13:40:00Z,関連している #25130,NA,NA,When _x_hours_ and _x_days_ are *not* used for a reference to a past point in time relative to the present moment then datetime.distance_in_words must not be used as it's impossible to fix the Hungarian/Magyar language files that way.
25458,Redmine,Patch,NA,Closed,Normal,Portuguese translation for 3.2-stable,Toshi MARUYAMA,NA,2017-03-29T08:36:00Z,Translations,3.2.6,NA,NA,NA,0,2017-03-29T06:40:00Z,2017-03-29T08:36:00Z,NA,NA,NA,"From #25204

<pre><code class=""diff"">
=== (+9,-10) config/locales/pt.yml ===
@@ -1168,13 +1168,13 @@
   label_assigned_issues: Assigned issues
   label_field_format_enumeration: Key/value list
   label_f_hour_short: '%{value} h'
-  field_default_version: Default version
-  error_attachment_extension_not_allowed: Attachment extension %{extension} is not allowed
-  setting_attachment_extensions_allowed: Allowed extensions
-  setting_attachment_extensions_denied: Disallowed extensions
-  label_any_open_issues: any open issues
-  label_no_open_issues: no open issues
-  label_default_values_for_new_users: Default values for new users
+  field_default_version: Vers?o por defeito
+  error_attachment_extension_not_allowed: A extens?o %{extension} do ficheiro anexado n?o ? permitida
+  setting_attachment_extensions_allowed: Extens?es permitidas
+  setting_attachment_extensions_denied: Extens?es n?o permitidas
+  label_any_open_issues: Quaisquer tarefas abertas
+  label_no_open_issues: Sem tarefas abertas
+  label_default_values_for_new_users: Valores por defeito para novo utilizadores
   setting_sys_api_key: Chave da API
   setting_lost_password: Perdi a palavra-chave
   mail_subject_security_notification: Security notification
@@ -1211,8 +1211,7 @@
   setting_mail_handler_enable_regex_delimiters: Enable regular expressions
   error_move_of_child_not_possible: 'Subtask %{child} could not be moved to the new
     project: %{errors}'
-  error_cannot_reassign_time_entries_to_an_issue_about_to_be_deleted: Spent time cannot
-    be reassigned to an issue that is about to be deleted
+  error_cannot_reassign_time_entries_to_an_issue_about_to_be_deleted: O tempo gasto n?o pode ser alterado numa tarefa que ser? apagada
   setting_timelog_required_fields: Required fields for time logs
   label_attribute_of_object: '%{object_name}''s %{name}'
   label_user_mail_option_only_assigned: Only for things I watch or I am assigned to
</code></pre>"
25459,Redmine,Patch,NA,Closed,Normal,Portuguese translation for 3.3-stable,Toshi MARUYAMA,NA,2017-03-29T08:34:00Z,Translations,3.3.3,NA,NA,NA,0,2017-03-29T06:42:00Z,2017-03-29T08:34:00Z,NA,NA,NA,"From #25204

<pre><code class=""diff"">
=== (+21,-25) config/locales/pt.yml ===
@@ -1177,30 +1177,26 @@
   label_default_values_for_new_users: Valores por defeito para novo utilizadores
   setting_sys_api_key: Chave da API
   setting_lost_password: Perdi a palavra-chave
-  mail_subject_security_notification: Security notification
-  mail_body_security_notification_change: ! '%{field} was changed.'
-  mail_body_security_notification_change_to: ! '%{field} was changed to %{value}.'
-  mail_body_security_notification_add: ! '%{field} %{value} was added.'
-  mail_body_security_notification_remove: ! '%{field} %{value} was removed.'
-  mail_body_security_notification_notify_enabled: Email address %{value} now receives
-    notifications.
-  mail_body_security_notification_notify_disabled: Email address %{value} no longer
-    receives notifications.
-  mail_body_settings_updated: ! 'The following settings were changed:'
-  field_remote_ip: IP address
-  label_wiki_page_new: New wiki page
-  label_relations: Relations
-  button_filter: Filter
-  mail_body_password_updated: Your password has been changed.
-  label_no_preview: No preview available
-  error_no_tracker_allowed_for_new_issue_in_project: The project doesn't have any trackers
-    for which you can create an issue
-  label_tracker_all: All trackers
-  label_new_project_issue_tab_enabled: Display the ""New issue"" tab
-  setting_new_item_menu_tab: Project menu tab for creating new objects
-  label_new_object_tab_enabled: Display the ""+"" drop-down
-  error_no_projects_with_tracker_allowed_for_new_issue: There are no projects with trackers
-    for which you can create an issue
+  mail_subject_security_notification: Notifica??o de seguran?a
+  mail_body_security_notification_change: ! '%{field} foi modificado.'
+  mail_body_security_notification_change_to: ! '%{field} foi modificado para %{value}.'
+  mail_body_security_notification_add: ! '%{field} %{value} foi adicionado.'
+  mail_body_security_notification_remove: ! '%{field} %{value} foi removido.'
+  mail_body_security_notification_notify_enabled: O email %{value} agora recebe notifica??es.
+  mail_body_security_notification_notify_disabled: O email %{value} j? n?o recebe notifica??es.
+  mail_body_settings_updated: ! 'As seguintes configura??es foram modificadas:'
+  field_remote_ip: Endere?o IP
+  label_wiki_page_new: Nova p?gina wiki
+  label_relations: Rela??es
+  button_filter: Filtro
+  mail_body_password_updated: A sua palavra-chave foi atualizada.
+  label_no_preview: Sem pr?-visualiza??o dispon?vel
+  error_no_tracker_allowed_for_new_issue_in_project: O projeto n?o possui nenhum tipo de tarefa para o qual voc? pode criar uma tarefa
+  label_tracker_all: Todos os tipos de tarefa
+  label_new_project_issue_tab_enabled: Apresentar a aba ""Nova tarefa""
+  setting_new_item_menu_tab: Aba de Projeto para criar novos objetos
+  label_new_object_tab_enabled: Apresentar a aba ""+""
+  error_no_projects_with_tracker_allowed_for_new_issue: N?o h? projetos com tipos de tarefa para os quais voc? pode criar uma tarefa
   field_textarea_font: Font used for text areas
   label_font_default: Default font
   label_font_monospace: Monospaced font
</code></pre>"
25483,Redmine,Patch,NA,Closed,Normal,Forbid to edit/update/delete the anonymous user,Holger Just,Jean-Philippe Lang,2017-04-03T17:44:00Z,Accounts / authentication,3.4.0,NA,NA,NA,0,2017-03-30T15:20:00Z,2017-04-03T15:06:00Z,NA,NA,NA,"Right now, an admin can (in principal) edit and even delete the Anonymous user via the UserController since it doesn't restrict its query to logged users. This should not be possible and doesn't seem to be intended from the surrounding code:

* When showing the edit form for the anonymous user, a template error occurs in @app/views/users/_general.html.erb@.
* When deleting the anonynmous user, all its objects will be assigned to itself and the user gets deleted. While it will be automatically recreated on next access, all its issues, journals, ... will have dangling @user_ids@ pointing to the old anonymous user.

The attached patch restricts edit/update/delete of users to logged users. Displaying the user page of Anonymous is still supported. The Patch was extracted from ""Planio"":https://plan.io/redmine-hosting."
25491,Redmine,Patch,NA,Needs feedback,Normal,List of role members,David C?t?-Tremblay,NA,2017-06-02T09:46:00Z,UI,NA,NA,NA,NA,0,2017-03-31T23:12:00Z,NA,NA,NA,NA,"This simple patch provides a list of all members of a role grouped by projects.

Tested and working with Redmine 3.2 & 3.3"
25495,Redmine,Patch,NA,Closed,Low,spelling fixes,ka seven,NA,2017-04-02T13:03:00Z,Code cleanup/refactoring,NA,NA,NA,NA,0,2017-04-01T22:09:00Z,2017-04-02T05:36:00Z,NA,NA,NA,"patch contains some spelling fixes ( just in comments ) as found by a bot ( https://github.com/ka7/misspell_fixer ).
see also http://www.misfix.org
Also, any upcoming License changes (e.g. GPL2 to GPL3+) are hereby granted.

base for the diff was @adce697 on github.com"
25502,Redmine,Patch,NA,Closed,Normal,Russian translation for 3.3-stable,Toshi MARUYAMA,NA,2017-04-03T16:40:00Z,Translations,3.3.3,NA,NA,NA,0,2017-04-03T16:30:00Z,2017-04-03T16:40:00Z,NA,NA,NA,"From #25397.

<pre><code class=""diff"">
=== (+2,-3) config/locales/ru.yml ===
@@ -1308,7 +1308,6 @@
   label_new_project_issue_tab_enabled: Отображать вкладку ""Новая задача""
   setting_new_item_menu_tab: Вкладка меню проекта для создания новых объектов
   label_new_object_tab_enabled: Отображать выпадающий список ""+""
-  error_no_projects_with_tracker_allowed_for_new_issue: There are no projects with trackers
-    for which you can create an issue
+  error_no_projects_with_tracker_allowed_for_new_issue: Отсутствуют проекты, по трекерам которых вы можете создавать задачи
   error_cannot_reassign_time_entries_to_an_issue_about_to_be_deleted: Spent time cannot
     be reassigned to an issue that is about to be deleted
</code></pre>"
25505,Redmine,Patch,NA,Closed,Normal,Russian translation for 3.2-stable,Toshi MARUYAMA,NA,2017-04-03T18:47:00Z,Translations,3.2.6,NA,NA,NA,0,2017-04-03T18:26:00Z,2017-04-03T18:47:00Z,NA,NA,NA,"From #25349.

<pre><code class=""diff"">
=== (+2,-3) config/locales/ru.yml ===
@@ -1283,5 +1283,4 @@
   label_any_open_issues: любые открытые задачи
   label_no_open_issues: нет открытых задач
   label_default_values_for_new_users: Значения по умолчанию для новых пользователей
-  error_cannot_reassign_time_entries_to_an_issue_about_to_be_deleted: Spent time cannot
-    be reassigned to an issue that is about to be deleted
+  error_cannot_reassign_time_entries_to_an_issue_about_to_be_deleted: Затраченное время не может быть переназначено на задачу, которая будет удалена
</code></pre>"
25507,Redmine,Patch,NA,Closed,Normal,Japanese translation update (r16457),Go MAEDA,NA,2017-04-05T15:38:00Z,Translations,NA,NA,NA,NA,0,2017-04-04T03:36:00Z,2017-04-05T15:38:00Z,NA,NA,NA,"Translated field_digest.
"
25518,Redmine,Patch,NA,Closed,Normal,Bulgarian translation,Ivan Cenov,NA,2017-04-05T18:52:00Z,Translations,NA,NA,NA,NA,0,2017-04-05T07:14:00Z,2017-04-05T18:52:00Z,NA,NA,NA,"Translated
* field_digest
* label_last_notes"
25526,Redmine,Patch,NA,Closed,Normal,Revert API change in spent_hours field in issue#show,Holger Just,Jean-Philippe Lang,2017-05-05T06:37:00Z,REST API,3.2.6,NA,NA,NA,0,2017-04-05T15:29:00Z,2017-04-05T18:10:00Z,関連している #20661,NA,NA,"When preloading the @spent_hours@ of issues (as e.g. done for #20661, they default to @0@ instead of the previous default @0.0@. This results in a change of the @issue#show@ API which now also returns an Integer instead of a Float. Previously (in Redmine 3.2), the API used to return the data the following way:

<pre><code class=""json"">
{
  ""issue"": {
    ""id"": 15,
    ...
    ""spent_hours"": 0.0,
    ...
  }
}
</code></pre>

While later versions (including the current trunk) return them as follows:

<pre><code class=""json"">
{
  ""issue"": {
    ""id"": 15,
    ...
    ""spent_hours"": 0,
    ...
  }
}
</code></pre>

This appears to break strict API clients which expect a float there. In our tests, this change appears to break the current Android version of RedminePM, probably due to some internal type exceptions. The attached patch was extracted from ""Planio"":https://plan.io/redmine-hosting and fixes this behavior. With it, we follow the previous behavior of always sending Floats.

"
25556,Redmine,Patch,NA,Closed,Normal,Traditional Chinese translation (to r16526),ChunChang Lo,NA,2017-04-08T18:42:00Z,Translations,NA,NA,NA,NA,0,2017-04-08T17:53:00Z,2017-04-08T18:42:00Z,"コピー元 #25341, コピー先 #25664",NA,NA,"* New
** field_digest
"
25557,Redmine,Patch,NA,Closed,Normal,Japanese translation update (r16528),Go MAEDA,NA,2017-04-09T06:02:00Z,Translations,NA,NA,NA,NA,0,2017-04-09T02:26:00Z,2017-04-09T06:02:00Z,NA,NA,NA,"Translated field_default_assigned_to.
"
25570,Redmine,Patch,NA,New,Normal,unchecked use of params[:query],Jens Kr?mer,NA,2017-04-11T06:56:00Z,Code cleanup/refactoring,NA,NA,NA,NA,0,2017-04-11T06:54:00Z,NA,NA,NA,NA,"Requests to URLs like @/issues?query=12@ result in an application error because @query.rb@ expects @params[:query]@ to be a hash, which it isn't in this case.

I know that there are a more instances in the code base where we assume @params[:foo]@ to be a hash without explicit type checking. This patch does not attempt to address this problem on a global level. For whatever reason it happens to us quite often in this particular place, causing false alerts in server monitoring.

This patch adds an explicit type check to resolve this @params[:query]@ case. As a bonus it makes the following 4 lines where values are taken out of the hash a bit nicer.

In general I think it would be preferably to raise an error of the 4xx class in such cases. Are there any plans to make use of Rails' Strong Parameters feature in the future? I think using these permit / require calls on parameters in controllers would catch such wrong types early and would lead to responses with a more appropriate error code automatically."
25573,Redmine,Patch,NA,Closed,Normal,Bulgarian translation,Ivan Cenov,NA,2017-04-13T07:19:00Z,Translations,NA,NA,NA,NA,0,2017-04-11T09:42:00Z,2017-04-13T07:19:00Z,NA,NA,NA,"Translated
* field_default_assigned_to
* setting_show_custom_fields_on_registration"
25590,Redmine,Patch,NA,Closed,High,prevent deadlocks in attachment deduplication,Jens Kr?mer,Jean-Philippe Lang,2017-04-13T14:10:00Z,Attachments,NA,NA,NA,NA,0,2017-04-12T03:53:00Z,2017-04-13T14:10:00Z,ブロックしている #25215,NA,NA,"At Planio we encountered occasional deadlocks caused by the inner lock statement on the query selecting a potentially already existing identical attachment. Running the query without @lock@ first and locking the found record second solved the problem for us.

To account for the possible failure of the inner lock (i.e. when @existing@ was found but cannot be locked) this patch also adds a @rescue@ clause that silently ignores such errors. Deduplication did not happen in this case either because the duplicate was removed (then a retry would be useless) or the database aborted the transaction (deadlock or waited too long for the lock, a retry might work but I'm not sure it's worth it)."
25609,Redmine,Patch,NA,Closed,Normal,Change Japanese translation for field_attr_*,Go MAEDA,NA,2017-04-16T17:21:00Z,Translations,3.4.0,NA,NA,NA,0,2017-04-15T11:36:00Z,2017-04-16T17:21:00Z,NA,NA,NA,"This patch improves Japanese translation for field_attr_* which are used in LDAP configuration page.

* *Fix UI inconsistency*: Japanese translation for ""Login"", ""First name"", ""Last name"" and ""Email"" in Redmine are ""ログインID"", ""名"", ""姓"", ""メールアドレス"". But different words (""ログイン"", ""名前"", ""苗字""　and ""メール"") are used in field_attr_*.
* *Improve understandability:* The current translations, ""ログイン属性"", ""名前属性"", ""苗字属性"" and ""メール属性"", are look like one word. In order to resolve this problem by indicates that they are two words, the patch insert a particle ""の"":https://en.wikipedia.org/wiki/Japanese_particles#no between words (""名属性"" -> ""名の属性"")."
25628,Redmine,Patch,NA,Closed,Normal,Better wording for issue update conflict resolution in German,Felix Sch?fer,NA,2017-05-19T18:08:00Z,Translations,3.4.0,NA,NA,NA,0,2017-04-18T11:50:00Z,2017-05-19T18:08:00Z,NA,NA,NA,The german translation of the update conflict resolution options are not very clear.
25653,Redmine,Patch,NA,Closed,Normal,Fix NoMethodError on HEAD requests to AccountController#register,Holger Just,Jean-Philippe Lang,2017-05-27T09:34:00Z,Accounts / authentication,3.2.7,NA,NA,NA,0,2017-04-19T19:06:00Z,2017-05-27T09:34:00Z,NA,NA,NA,"The attached patch fixes a NoMethodError when attempting to run a HEAD request against AccountController#register.

The cause of the bug is that HEAD requests did not trigger the check for @request.get?@."
25664,Redmine,Patch,NA,Closed,Normal,Traditional Chinese translation (to r16543),ChunChang Lo,NA,2017-05-19T17:01:00Z,Translations,NA,NA,NA,NA,0,2017-04-21T06:26:00Z,2017-05-19T17:01:00Z,コピー元 #25556,NA,NA,"* New
** field_default_assigned_to, setting_show_custom_fields_on_registration
"
25724,Redmine,Patch,NA,Closed,Normal,Min length of custom field isn't stored due to typo in safe_attributes,Jens Kr?mer,Jean-Philippe Lang,2017-06-06T22:48:00Z,Custom fields,3.4.0,NA,NA,NA,0,2017-04-28T15:58:00Z,2017-06-06T22:48:00Z,NA,NA,NA,patch attached
25731,Redmine,Patch,NA,Closed,Normal,Use only one if with two conditions in issue show instead of two ifs (if in if),Marius BALTEANU,NA,2017-05-30T14:05:00Z,Code cleanup/refactoring,NA,NA,NA,NA,0,2017-05-01T16:43:00Z,2017-05-30T14:05:00Z,NA,NA,NA,"I think that there are no reasons to use two ifs in source:trunk/app/views/issues/show.html.erb#L67. I propose to use only one with both conditions.

"
25745,Redmine,Patch,NA,Closed,Normal,Optimize Gantt Charts for mobile screens,Felix Gliesche,Jean-Philippe Lang,2017-05-27T09:36:00Z,UI - Responsive,3.2.7,NA,NA,NA,0,2017-05-03T12:12:00Z,2017-05-27T09:36:00Z,NA,NA,NA,"Once the screens goes below a certain width (~400px) it is impossible to horiziontally scroll the gantt chart area:

!before.png!

Attached you will find a patch that fixes this problem by setting the column that holds the issues to a width relative to the screen width, rather than a fixed width on mobile devices. 

!after.png!"
25775,Redmine,Patch,NA,Closed,Normal,Show assignee's icon in addition to author's icon,Go MAEDA,Jean-Philippe Lang,2017-06-10T14:27:00Z,UI,3.4.0,NA,NA,NA,0,2017-05-06T08:01:00Z,2017-06-10T14:27:00Z,関連している #19648,NA,NA,"In current versions of Redmine, author's icon is displayed in the upper left corner of issues if ""Use Gravatar user icons"" setting is enabled.

I think it would be very useful if we can see assignee's icon in addition to author's icon because who is the person in charge is important information to manage projects.

Currently we can see very small (14px) assignee's icon in ""Assignee"" field but it is not noticeable. If attached patch (attachment:0001-Show-assignee-s-icon-in-addition-to-author-s-icon.patch) is applied, assignee's icon will be much noticeable and we can easily know current assignee.

!{border: 1px solid #ccc;}.assignee-icon-with-author-icon@2x.png!"
25829,Redmine,Defect,NA,Closed,Normal,mysql2 0.3 gem doesn't properly close connections,Pavel Rosick?,Jean-Philippe Lang,2017-05-27T09:33:00Z,Gems support,3.2.7,NA,NA,NA,0,2017-05-13T00:27:00Z,2017-05-27T09:33:00Z,NA,Fixed,2.0.0,"Hi,
I found that mysql2 (0.3.21) doesn't properly closing connections.

Our mysql's error logs are full of these warnings
<pre>
11797 [Warning] Aborted connection 12561 to db: 'test' user: 'test' host: '127.0.0.1' (Got an error reading communication packets)
11798 [Warning] Aborted connection 12561 to db: 'test' user: 'test' host: '127.0.0.1' (Got an error reading communication packets)
11799 [Warning] Aborted connection 12561 to db: 'test' user: 'test' host: '127.0.0.1' (Got an error reading communication packets)
...
</pre>

it is already fixed, but the change wasn't backported to the 0.3.x branch
https://github.com/brianmario/mysql2/issues/606

I can confirm the issue is gone after upgrading to the current version 0.4.6.

This version is still compatible with Ruby 1.9+ and it passes redmine tests. I also run our specs and it looks like everything is ok.

Notable changes:
<pre>
* mysql 8 support
* prepared statements support
* connection.close/shutdown fix
* many bugfixes
</pre>

Full changelog:
https://github.com/brianmario/mysql2/releases"
25846,Redmine,Defect,NA,Needs feedback,Normal,Repository directory listing: ActionView::Template::Error (incompatible character encodings: ASCII-8BIT and UTF-8),Marc Vollmer,NA,2017-05-15T13:57:00Z,SCM,NA,NA,NA,NA,0,2017-05-15T10:42:00Z,NA,NA,NA,3.3.3,"Hello,

we have added 4 repositories (Git Remote) as projectarchvies to redmine.
When we open those repositories in the projectarchive view 3 of them work, one gives the following error:

<pre>
Started GET ""/projects/XXX/repository/XXX"" for XXX.XXX.XXX.XXX at 2017-05-15 10:10:00 +0200
Processing by RepositoriesController#show as HTML
  Parameters: {""id""=>""XXX"", ""repository_id""=>""XXX""}
  Current user: XXX (id=135)
  Rendered repositories/_navigation.html.erb (38.5ms)
  Rendered repositories/_breadcrumbs.html.erb (0.9ms)
  Rendered repositories/_dir_list_content.html.erb (10.4ms)
  Rendered repositories/_dir_list.html.erb (10.9ms)
  Rendered repositories/show.html.erb within layouts/base (53.8ms)
Completed 500 Internal Server Error in 168ms (ActiveRecord: 3.5ms)

ActionView::Template::Error (incompatible character encodings: ASCII-8BIT and UTF-8):
     8:                :locals => { :path => @path, :kind => 'dir', :revision => @rev } %></h2>
     9:
    10: <% if !@entries.nil? && authorize_for('repositories', 'browse') %>
    11:   <%= render :partial => 'dir_list' %>
    12: <% end %>
    13:
    14: <%= render_properties(@properties) %>
  app/views/repositories/show.html.erb:11:in `_app_views_repositories_show_html_erb__1302325350339252382_70155590060320'
  app/controllers/repositories_controller.rb:125:in `show'
  lib/redmine/sudo_mode.rb:63:in `sudo_mode'
</pre>

My first guess was that theres a directory of file in the repository that has an invalid char as a name, so I wrote a little script to check all filenames against a regex and we just found a file containing a ~ in the name.

We had this repository working before, so the file must be added in the last 1 to 2 month but the file containing the ~ was added 2 years ago.

I already tried to re add the repository with no success and other repositories I added as a test also work.

Thanks for your help in advance!"
25853,Redmine,Patch,NA,New,Normal,Move left bottom links from project settings above,Marius BALTEANU,NA,2017-06-27T00:59:00Z,UI,Candidate for next minor release,NA,NA,NA,0,2017-05-15T21:50:00Z,NA,NA,NA,NA,"This patch is related to #24720 where all ""New item"" links were been moved above the list. 

There are three more links left under the list and I think it's better to have them all above the list:
1. ""Close completed versions"" from Versions tab
2. ""Delete"" from Wiki tab
3. ""Reset"" from Activities tab

I've attached 2 patches:

h3. move_close_completed_versions_above.patch

* adds the ""icon"" and ""icon-lock"" classes to the link (the same icon is used for button ""Close project"") 
* adds a class ""left"" for existing contextual class to let the icons aligned to left (according to the #24720)

h3. move_delete_and_reset_above_the_list.patch

* moves the ""Delete"" link from wiki tab on the same line with the wiki input field. I find it more natural to be there.
* moves the ""Reset"" link from activities above the list.
 
I made this patch after I find out that our users didn't know about the button ""Close completed version"" which is very well hidden when the projects have many versions."
25858,Redmine,Defect,NA,Closed,Normal,Easy Gantt crashes my browser Firefox,Niti Panchal,NA,2017-05-16T12:06:00Z,NA,NA,NA,NA,NA,0,2017-05-16T08:26:00Z,2017-05-16T12:06:00Z,NA,Invalid,NA,So every time I use Project Gantt my browser crashes. But when i use Easy Gantt for a specific project it work. i reinstalled the browser it is stillt he same problem. We are group of people using this tool but for some poeple it works for some it does not
25861,Redmine,Patch,NA,Closed,Normal,CSV Importer - handle UndefinedConversionErrors,Jens Kr?mer,Jean-Philippe Lang,2017-06-06T22:56:00Z,Importers,3.2.7,NA,NA,NA,0,2017-05-16T11:07:00Z,2017-06-06T22:56:00Z,NA,NA,NA,"The CSV import already handles a couple of Exceptions that may happen when the user-selected encoding does not match the real encoding of the CSV (or it contains otherwise illegal byte sequences). We recently encountered @Encoding::UndefinedConversionError@, which is not yet caught by that error handling. The attached patches add a test case and a fix for that."
25867,Redmine,Defect,NA,New,Normal,Assignable users should respect database collation,Pavel Rosick?,NA,2017-05-18T21:58:00Z,Database,NA,NA,NA,NA,0,2017-05-16T22:10:00Z,NA,NA,NA,NA,"mysql collation: utf8_general_ci
['a','u','?'] should be sorted as ['a','?','u'] but because of ruby sort it's reordered back as ['a','u','?']

<pre>
  def assignable_users
    users = project.assignable_users(tracker).to_a
    users << author if author && author.active?
    if assigned_to_id_was.present? && assignee = Principal.find_by_id(assigned_to_id_was)
      users << assignee
    end
    
    users.uniq.sort
  end
</pre>

I can provide a patch, are you interested or is it desired behaviour?

<pre>
Environment (not important, all redmine versions and databases are affected):
  Redmine version                3.3.3.devel.16557
  Ruby version                   2.1.5-p273 (2014-11-13) [x64-mingw32]
  Rails version                  4.2.8
  Environment                    production
  Database adapter               Mysql2
SCM:
  Subversion                     1.9.5
  Git                            2.11.0
  Filesystem
Redmine plugins:
  no plugin installed
</pre>"
25868,Redmine,Defect,NA,Needs feedback,Normal,Can't upload over 2GB file,allen chen,NA,2017-05-17T16:04:00Z,Attachments,NA,NA,NA,NA,0,2017-05-17T02:24:00Z,NA,NA,NA,NA,"I use bitnami-redmine-3.3.3-0-windows-installer.exe to install Redmine.
My OS is win7 64 bit.
I set the upload file limit to 4GB.
But when I upload the large file that over 2 GB file it will show Internal Server error.

The Productions.log show below.

Processing by AttachmentsController#upload as JS
  Parameters: {""attachment_id""=>""1"", ""filename""=>""release1.tgz"", ""content_type""=>""application/gzip""}
  Current user: admin (id=1)
Completed 500 Internal Server Error in 140ms (ActiveRecord: 78.0ms)

RangeError (bignum too big to convert into `long'):
  app/controllers/attachments_controller.rb:92:in `upload'
  lib/redmine/sudo_mode.rb:63:in `sudo_mode'
"
25876,Redmine,Patch,NA,Closed,Normal,Gantt chart shows % done even if the field is disabled for the tracker,Jens Kr?mer,NA,2017-06-15T06:49:00Z,Gantt,3.4.0,NA,NA,NA,0,2017-05-17T02:55:00Z,2017-06-15T06:49:00Z,NA,NA,NA,"When disabling the _% done_ field for a given tracker, issues of this tracker still have _x %_ in their label in the gantt chart. The attached patch fixes this by checking @issue.disabled_core_fields@ when building the label."
25959,Redmine,Defect,NA,Closed,Normal,"""Smile of the death"" problem",Maxim Kru?ina,NA,2017-05-17T18:11:00Z,NA,NA,NA,NA,NA,0,2017-05-17T13:17:00Z,2017-05-17T14:33:00Z,NA,Invalid,3.3.1,"Hi, just pasted this string into Ticket description (or comment) and it will crash Redmine:
A druh? v?c, mo?n? bych ten pruh dole, sv?tle modrou, vym?nil za na?? tmav? modrou"
25989,Redmine,Defect,NA,Closed,Normal,Ticket #25959 reproduced,Vasili Korol,NA,2017-05-17T18:14:00Z,NA,NA,NA,NA,NA,0,2017-05-17T18:01:00Z,2017-05-17T18:14:00Z,NA,Invalid,NA,"I am unable to re-open the ticket #25959, so I am creating a new one to draw your attention to the fact that i was able to reproduce the problem described there. Previously it was closed as ""non-reproducible"". My version of Redmine is older than the ticket author's, but he claims that the problem is still actual in 3.3.1, if I understand correctly."
25996,Redmine,Defect,NA,Needs feedback,Normal,ActiveRecord::StatementInvalid,Jone Jone,NA,2017-05-18T09:01:00Z,Database,NA,NA,NA,NA,0,2017-05-18T08:40:00Z,NA,NA,NA,3.2.6,"I use nginx server.
log:
Completed 500 Internal Server Error in 51113ms (ActiveRecord: 51068.8ms)

ActiveRecord::StatementInvalid (Mysql2::Error: Lock wait timeout exceeded; try restarting transaction: UPDATE `issues` SET `issues`.`status_id` = 3, `issues`.`updated_on` = '2017-05-18 11:02:23', `issues`.`lock_version` = 2 WHERE `issues`.`id` = 21991 AND `issues`.`lock_version` = 1):
  app/models/issue.rb:182:in `create_or_update'
  app/controllers/issues_controller.rb:499:in `block in save_issue_with_child_records'
  app/controllers/issues_controller.rb:487:in `save_issue_with_child_records'
  app/controllers/issues_controller.rb:185:in `update'
  lib/redmine/sudo_mode.rb:63:in `sudo_mode'"
26002,Redmine,Defect,NA,Confirmed,Normal,Issues can be assigned to this role  - didnt work correctly,Maxim Kru?ina,NA,2017-06-21T18:30:00Z,Issues,NA,NA,NA,NA,0,2017-05-19T18:17:00Z,NA,NA,NA,3.3.1,"We have an API user and special role for this user.
This role have ""Issues can be assigned to this role"" box unchecked.
But when ticket is created by this API user, he's still listed in Assignee field of the ticket and the ticket can be aasigned to this user.
When ticket is created by someone else, it works OK."
26004,Redmine,Defect,NA,Needs feedback,Normal,Settings / Issue tracking: Can't move issue column between available and visible,Roderick Gadellaa,NA,2017-06-12T18:44:00Z,Issues list,NA,NA,NA,NA,0,2017-05-20T09:23:00Z,NA,NA,NA,3.3.3,"Under Settings / Issue tracking / Default columns displayed on the issue list (screenshot attached), I try to move a issue column from available to visible but it doesn't work.

When I open the dev console I see a javascript error:

<pre>
/redmine/settings:446 Uncaught ReferenceError: moveOptions is not defined
    at HTMLInputElement.onclick (/redmine/settings:446)
</pre>

Information:

<pre>
Environment:
  Redmine version                3.3.3.stable
  Ruby version                   2.1.5-p273 (2014-11-13) [arm-linux-gnueabihf]
  Rails version                  4.2.7.1
  Environment                    production
  Database adapter               Mysql2
SCM:
  Subversion                     1.8.10
  Git                            2.1.4
  Filesystem                     
Redmine plugins:
  periodictask                   3.2.1
  redmine_checklists             3.1.5
  redmine_issue_badge            0.0.6
  redmine_issue_completion       0.0.2
  redmine_issue_templates        0.1.5
</pre>"
26010,Redmine,Defect,NA,Needs feedback,Normal,can't create Thread,Jone Jone,NA,2017-05-22T07:02:00Z,Issues,NA,NA,NA,NA,0,2017-05-22T05:04:00Z,NA,NA,NA,3.2.6,"there is the issue's log，if log is not enough,please let me method to debug it,thank you

ThreadError (can't create Thread: Resource temporarily unavailable):
  app/models/mailer.rb:458:in `deliver_mail'
  config/initializers/10-patches.rb:154:in `deliver'
  app/models/mailer.rb:98:in `block (2 levels) in deliver_issue_edit'
  app/models/issue.rb:952:in `each_notification'
  app/models/mailer.rb:97:in `block in deliver_issue_edit'
  app/models/journal.rb:90:in `block in each_notification'
  app/models/journal.rb:88:in `each'
  app/models/journal.rb:88:in `each_notification'
  app/models/mailer.rb:96:in `deliver_issue_edit'
  app/models/journal.rb:302:in `send_notification'
  app/models/journal.rb:67:in `save'
  app/models/issue.rb:1681:in `create_journal'
  app/models/issue.rb:182:in `create_or_update'
  app/controllers/issues_controller.rb:499:in `block in save_issue_with_child_records'
  app/controllers/issues_controller.rb:487:in `save_issue_with_child_records'
  app/controllers/issues_controller.rb:185:in `update'
  lib/redmine/sudo_mode.rb:63:in `sudo_mode'"
26011,Redmine,Defect,NA,Closed,Normal,html content,Cedric Gavage,NA,2017-05-22T14:40:00Z,Email receiving,NA,NA,NA,NA,0,2017-05-22T08:14:00Z,2017-05-22T14:40:00Z,NA,Invalid,3.3.1,"For incoming emails (receiving email), is it possible to disable the html stripping function ?"
26012,Redmine,Defect,NA,Closed,Normal,Integrating Redmine with Zimbra Mail Server,mujhahid karim,NA,2017-05-22T16:06:00Z,Email notifications,NA,NA,NA,NA,0,2017-05-22T08:48:00Z,2017-05-22T14:40:00Z,NA,Invalid,2.5.2,"Hi recently the department of IT, change de Zimbra configuration to not accept the connection with no have any level of authentication.

So my enviroument of Redmine not accept now to connect with the Zimbra Mail Server, the error is: An error occurred while sending mail (wrong argument (TrueClass)! (Expected kind of OpenSSL::SSL::SSLContext))

The configuration file is:

<pre><code class=""yaml"">
# default configuration options for all environments
default:
  # Outgoing emails configuration (see examples above)
  email_delivery:
    delivery_method: :smtp
    smtp_settings:
      address: webmail.mydomain
      port: 465
      domain: isutc.transcom.co.mz
      authentication: :plain
      enable_starttls_auto: false
      openssl_verify_mode: true
      ssl: true
      user_name: redmine@mydomain.mydomain
      password: mypassword
</code></pre>
"
26016,Redmine,Defect,NA,New,High,Redmine is slow to some users,Ren? Barbosa,NA,2017-05-22T18:25:00Z,Performance,NA,NA,NA,NA,0,2017-05-22T18:08:00Z,NA,関連している #19102,NA,3.3.0,"We updated our Redmine environment to the version 3.3.0 and some users are complaining about slowness in their activities. 

We found that just some users (the ones with 1000+ projects) are with this problem. Users with ~600- projects are not affected. 

I've attached 2 files at this issue, they're a Redmine debug log of an user with several projects (slow.log) and an user with few projects (slow.log). The difference is really notable."
26023,Redmine,Defect,NA,New,Normal,Category filter only shows categories of current project,Felix Sch?fer,NA,2017-06-03T10:18:00Z,Issues filter,Candidate for next major release,NA,NA,NA,0,2017-05-23T13:13:00Z,NA,"関連している #8192, 関連している #17761, 関連している #23198",NA,NA,"The category filter currently only shows the categories of the current project, this means the global query can not use categories, and projects with subprojects can not use the categories from the subproject as filters.

I will provide a patch shortly to solve this issue."
26029,Redmine,Defect,NA,Closed,Normal,Recovery Deleted Issue,mujhahid karim,NA,2017-05-24T16:59:00Z,Administration,NA,NA,NA,NA,0,2017-05-24T09:55:00Z,2017-05-24T16:59:00Z,NA,Invalid,2.5.2,"I have one issue that desappear from my database, I need to know who deleted this issue, can I know using some querys on the database?
"
26030,Redmine,Patch,NA,New,Normal,"Like issues and news comments, want to specify the display order of the forum's reply.",Minoru Maeda,NA,2017-05-25T08:57:00Z,Forums,NA,NA,NA,NA,0,2017-05-24T11:26:00Z,NA,"関連している #26033, 関連している #11120",NA,NA,"This patch also applies the setting order of comments in ""My account"" to the forum."
26034,Redmine,Defect,NA,New,High,Wiki PDF generated files displayed but not printable on Mac,glc glc,NA,2017-05-24T17:55:00Z,PDF export,NA,NA,NA,NA,0,2017-05-24T17:51:00Z,NA,NA,NA,3.3.3,"For any wiki page (even with only a small text content), when clicking on the PDF link in the footer of the current page, the PDF downloads and displays properly, but when sending to the printer, the print job hangs after a few seconds, contrary to any other PDF saved from the browser through other sites, which print properly.

It is sent to the printer but not printed, no error message.

Probably some wrong meta-data in the generated PDFs

Issue found in the official Redmine Docker image, with :

Redmine version                3.3.3.stable
Ruby version                   2.2.7-p470 (2017-03-28) [x86_64-linux]
Rails version                  4.2.7.1

Client side (error occurs in) :

MacOS Sierra 10.12.5
Google Chrome 58.0.3029.110 (64-bit)
Firefox 53.0.3 (64-bit)
Preview 9.0 (909.18)
Adobe Acrobat Pro 10.1.1.33

Printer : HP LaserJet Pro 400 M451dn 
No other printers available for further tests, but it seems to be related to the OS side rather than to the printer side

Printing the PDF generated pages *works however in Windows 7* (on the same Mac through VirtualBox with the same printer)."
26043,Redmine,Patch,NA,New,Normal,"When creating a new wiki page from a button, want to set the parent page automatically.",Minoru Maeda,NA,2017-06-23T18:55:00Z,Wiki,3.5.0,NA,NA,NA,0,2017-05-25T12:14:00Z,NA,NA,NA,NA,"This patch automatically sets the value on the form as the parent page of the new page, the page that clicked the ""New wiki page"" button.
However, it does not correspond to the creation of a new page in the ""+"" menu."
26051,Redmine,Defect,NA,Closed,High,Please correct the vulnerability of imagemagick(CVE-2017-9098),Sahya Norn,NA,2017-06-06T02:29:00Z,NA,NA,NA,NA,NA,0,2017-05-27T08:45:00Z,2017-06-06T02:29:00Z,NA,Wont fix,NA,"Please correct the vulnerability of imagemagick(CVE-2017-9098)

https://access.redhat.com/security/cve/cve-2017-9098"
26055,Redmine,Defect,NA,Closed,Normal,Three issues with Redmine::SyntaxHighlighting::CodeRay.language_supported?,Mischa The Evil,Jean-Philippe Lang,2017-06-09T06:53:00Z,Code cleanup/refactoring,3.2.7,NA,NA,NA,0,2017-05-28T15:40:00Z,2017-06-07T21:35:00Z,関連している #25634,Fixed,NA,"h2. Issues

While reviewing/researching #25634 (and in its extend, r16501 & r16502 for #25503), I noticed three issues with the implementation - both pre and post r16568:
# @Redmine::SyntaxHighlighting::CodeRay.language_supported?@ includes internal CodeRay scanners (@default@, @debug@, @raydebug@ & @scanner@)
# @Redmine::SyntaxHighlighting::CodeRay.language_supported?@ has multiple responsibilities:
## retrieval of the array of supported languages symbols from CodeRay library
### storing of a reference to the resulting array in a local variable
## checking if the passed @language@ argument is included in the array referenced by the local variable and return the result
# the array containing supported languages symbols is rebuild for every invocation of @Redmine::SyntaxHighlighting::CodeRay.language_supported?@, ie. for each and every pre-formatted, syntax-highlighted code block (this seems a uselessly CPU-intensive approach since the array's values won't change unless Redmine is restarted)

h2. Fixes/changes

I've applied the following four changes to solve each of the three issues:

* _change 1 (0001-Remove-internal-CodeRay-scanners.patch)_: remove the four internal CodeRay scanners by subtracting a hard-coded array containing the symbols of these scanners
** It does not seem to be possible to do this in a more dynamical way.
* _change 2 (0002-Pull-up-retrieve_supported_languages-private-class-m.patch)_: pull-up a new @Redmine::SyntaxHighlighting::CodeRay.retrieve_supported_languages@ private class method (that doesn't store the result)
* _change 3 (0003-Use-stored-ref.-to-array-holding-supported-languages.patch)_: use a stored reference to the resulting array ? retrieved by @Redmine::SyntaxHighlighting::CodeRay.retrieve_supported_languages@, holding the supported languages symbols ? via a constant[1]
** I think there are two ways of solving this: storing a reference to the resulting array 1) in a _memoized instance variable_ or 2) in a _constant_. After some benchmarking[1] I decided to go with the constant-storage approach as it seems a tiny bit faster than the memoized instance variable storage approach. Though, both approaches are ~360-400 times faster than the approaches where the array is rebuild on every invocation of @Redmine::SyntaxHighlighting::CodeRay.language_supported?@.
* _change 4 (0004-Tests-for-Redmine-SyntaxHighlighting-CodeRay.retriev.patch)_: add test-coverage for @Redmine::SyntaxHighlighting::CodeRay.retrieve_supported_languages@ and remove obsolete @ApplicationHelperTest#test_syntax_highlight_by_coderay_alias@ (there's no need to test through @textilizable@)

This patch serial, against current source:/trunk@16580, is produced using @git format-patch@, which makes the individual patches apply-able using ""@patch -p1 < 0001-...@"".

h2. Environment

<pre>
Environment:
  Redmine version                3.3.3.devel@r16580
  Ruby version                   2.3.3-p222 (2016-11-21) [x86_64-linux]
  Rails version                  4.2.8
  Environment                    production
  Database adapter               Mysql2
SCM:
  Subversion                     1.8.8
  Git                            1.9.1
  Filesystem                     
Redmine plugins:
  no plugin installed
</pre>

h2. Footnotes

fn1. I passed the following benchmark script to @rails runner -e production@: <pre><code class=""ruby"">
puts ""####################""
puts ""Using benchmark:""
puts ""####################""

puts

require 'benchmark'

Benchmark.bmbm do |x|
x.report("".language_supported_core_pre_25634?"")  { 100.times do Redmine::SyntaxHighlighting::CodeRay.language_supported_core_pre_25634?('ruby') end }
x.report("".language_supported_core?"")            { 100.times do Redmine::SyntaxHighlighting::CodeRay.language_supported_core?('ruby') end }
x.report("".language_supported_core_ext?"")        { 100.times do Redmine::SyntaxHighlighting::CodeRay.language_supported_core_ext?('ruby') end }
x.report("".language_supported_core_ext_split?"")  { 100.times do Redmine::SyntaxHighlighting::CodeRay.language_supported_core_ext_split?('ruby') end }
x.report("".language_supported_ivar_ext_split?"")  { 100.times do Redmine::SyntaxHighlighting::CodeRay.language_supported_ivar_ext_split?('ruby') end }
x.report("".language_supported_const_ext_split?"") { 100.times do Redmine::SyntaxHighlighting::CodeRay.language_supported_const_ext_split?('ruby') end }
end

puts

puts ""####################""
puts ""Using benchmark/ips:""
puts ""####################""

puts

require 'benchmark/ips'

Benchmark.ips do |x|
  # Configure the number of seconds used during
  # the warmup phase (default 2) and calculation phase (default 5)
  x.config(:time => 5, :warmup => 2)

  x.report("".language_supported_core_pre_25634?"")  { 100.times do Redmine::SyntaxHighlighting::CodeRay.language_supported_core_pre_25634?('ruby') end }
  x.report("".language_supported_core?"")            { 100.times do Redmine::SyntaxHighlighting::CodeRay.language_supported_core?('ruby') end }
  x.report("".language_supported_core_ext?"")        { 100.times do Redmine::SyntaxHighlighting::CodeRay.language_supported_core_ext?('ruby') end }
  x.report("".language_supported_core_ext_split?"")  { 100.times do Redmine::SyntaxHighlighting::CodeRay.language_supported_core_ext_split?('ruby') end }
  x.report("".language_supported_ivar_ext_split?"")  { 100.times do Redmine::SyntaxHighlighting::CodeRay.language_supported_ivar_ext_split?('ruby') end }
  x.report("".language_supported_const_ext_split?"") { 100.times do Redmine::SyntaxHighlighting::CodeRay.language_supported_const_ext_split?('ruby') end }


  # Compare the iterations per second of the various reports
  x.compare!
end

</code></pre> on a modified ./lib/redmine/syntax_highlighting.rb file[2], which gave me the following results: <pre>
####################
Using benchmark:
####################

Rehearsal ------------------------------------------------------------------------
.language_supported_core_pre_25634?    0.010000   0.010000   0.020000 (  0.017590)
.language_supported_core?              0.010000   0.000000   0.010000 (  0.018621)
.language_supported_core_ext?          0.020000   0.010000   0.030000 (  0.018680)
.language_supported_core_ext_split?    0.010000   0.000000   0.010000 (  0.018822)
.language_supported_ivar_ext_split?    0.000000   0.000000   0.000000 (  0.000302)
.language_supported_const_ext_split?   0.000000   0.000000   0.000000 (  0.000069)
--------------------------------------------------------------- total: 0.070000sec

                                           user     system      total        real
.language_supported_core_pre_25634?    0.030000   0.000000   0.030000 (  0.025548)
.language_supported_core?              0.010000   0.000000   0.010000 (  0.018236)
.language_supported_core_ext?          0.020000   0.000000   0.020000 (  0.018472)
.language_supported_core_ext_split?    0.020000   0.000000   0.020000 (  0.018835)
.language_supported_ivar_ext_split?    0.000000   0.000000   0.000000 (  0.000068)
.language_supported_const_ext_split?   0.000000   0.000000   0.000000 (  0.000049)

####################
Using benchmark/ips:
####################

Warming up --------------------------------------
.language_supported_core_pre_25634?
                         5.000  i/100ms
.language_supported_core?
                         5.000  i/100ms
.language_supported_core_ext?
                         4.000  i/100ms
.language_supported_core_ext_split?
                         4.000  i/100ms
.language_supported_ivar_ext_split?
                         1.763k i/100ms
.language_supported_const_ext_split?
                         2.084k i/100ms
Calculating -------------------------------------
.language_supported_core_pre_25634?
                         53.819  (± 5.6%) i/s -    270.000  in   5.035559s
.language_supported_core?
                         53.027  (± 5.7%) i/s -    265.000  in   5.015003s
.language_supported_core_ext?
                         50.711  (± 5.9%) i/s -    256.000  in   5.071990s
.language_supported_core_ext_split?
                         49.493  (± 8.1%) i/s -    248.000  in   5.055206s
.language_supported_ivar_ext_split?
                         17.443k (±10.2%) i/s -     86.387k in   5.011711s
.language_supported_const_ext_split?
                         19.710k (±11.7%) i/s -     97.948k in   5.045098s

Comparison:
.language_supported_const_ext_split?:  19710.5 i/s
.language_supported_ivar_ext_split?:   17443.3 i/s - same-ish: difference falls within error
.language_supported_core_pre_25634?:      53.8 i/s - 366.23x  slower
.language_supported_core?:                53.0 i/s - 371.71x  slower
.language_supported_core_ext?:            50.7 i/s - 388.68x  slower
.language_supported_core_ext_split?:      49.5 i/s - 398.24x  slower

</pre>

fn2. including six different implementations looking like:
|_. Nr. |_. Method                                                                    |_. Description                                                                                  |_. Abbreviated implementation code |
| 1.    | @Redmine::SyntaxHighlighting::CodeRay.language_supported_core_pre_25634?@   | state of trunk, pre #25634                                                                     | {{collapse(View abbreviated implementation...)
<pre><code class=""ruby"">
      class << self
        ...

        def language_supported_core_pre_25634?(language)
          ::CodeRay::Scanners.list.include?(language.to_s.downcase.to_sym)
        rescue
          false
        end
      end
</code></pre>
}} |
| 2.    | @Redmine::SyntaxHighlighting::CodeRay.language_supported_core?@             | current state of trunk, post #25634                                                            | {{collapse(View abbreviated implementation...)
<pre><code class=""ruby"">
      class << self
        ...

        def language_supported_core?(language)
          supported_languages =
            ::CodeRay::Scanners.list +
            ::CodeRay::Scanners.plugin_hash.keys.map(&:to_sym)
          supported_languages.include?(language.to_s.downcase.to_sym)
        rescue
          false
        end
      end
</code></pre>
}} |
| 3.    | @Redmine::SyntaxHighlighting::CodeRay.language_supported_core_ext?@         | current state of trunk, post #25634, with _change 1_ applied                                   | {{collapse(View abbreviated implementation...)
<pre><code class=""ruby"">
      class << self
        ...

        def language_supported_core_ext?(language)
          supported_languages =
            ::CodeRay::Scanners.list +
            ::CodeRay::Scanners.plugin_hash.keys.map(&:to_sym) -
            %w(debug default raydebug scanner).map(&:to_sym)
          supported_languages.include?(language.to_s.downcase.to_sym)
        rescue
          false
        end
      end
</code></pre>
}} |
| 4.    | @Redmine::SyntaxHighlighting::CodeRay.language_supported_core_ext_split?@   | current state of trunk, post #25634, with _change 1 and 2_ applied                             | {{collapse(View abbreviated implementation...)
<pre><code class=""ruby"">
      def self.retrieve_supported_languages
        ::CodeRay::Scanners.list +
        # Add CodeRay scanner aliases
        ::CodeRay::Scanners.plugin_hash.keys.map(&:to_sym) -
        # Remove internal CodeRay scanners
        %w(debug default raydebug scanner).map(&:to_sym)
      end
      private_class_method :retrieve_supported_languages

      class << self
        ...

        def language_supported_core_ext_split?(language)
          supported_languages = retrieve_supported_languages
          supported_languages.include?(language.to_s.downcase.to_sym)
        rescue
          false
        end
      end
</code></pre>
}} |
| 5.    | @Redmine::SyntaxHighlighting::CodeRay.language_supported_ivar_ext_split?@   | current state of trunk, post #25634, with _change 1, 2 and 3 (memoized ivar variant)_ applied  | {{collapse(View abbreviated implementation...)
<pre><code class=""ruby"">
      def self.retrieve_supported_languages
        ::CodeRay::Scanners.list +
        # Add CodeRay scanner aliases
        ::CodeRay::Scanners.plugin_hash.keys.map(&:to_sym) -
        # Remove internal CodeRay scanners
        %w(debug default raydebug scanner).map(&:to_sym)
      end
      private_class_method :retrieve_supported_languages

      class << self
        ...

        def language_supported_ivar_ext_split?(language)
          @supported_languages ||= retrieve_supported_languages
          @supported_languages.include?(language.to_s.downcase.to_sym)
        rescue
          false
        end
</code></pre>
}} |
| 6.    | @Redmine::SyntaxHighlighting::CodeRay.language_supported_const_ext_split?@  | current state of trunk, post #25634, with _change 1, 2 and 3 (constant variant)_ applied       | {{collapse(View abbreviated implementation...)
<pre><code class=""ruby"">
      def self.retrieve_supported_languages
        ::CodeRay::Scanners.list +
        # Add CodeRay scanner aliases
        ::CodeRay::Scanners.plugin_hash.keys.map(&:to_sym) -
        # Remove internal CodeRay scanners
        %w(debug default raydebug scanner).map(&:to_sym)
      end
      private_class_method :retrieve_supported_languages

      SUPPORTED_LANGUAGES = retrieve_supported_languages

      class << self
        ...

        def language_supported_const_ext_split?(language)
          SUPPORTED_LANGUAGES.include?(language.to_s.downcase.to_sym)
        rescue
          false
        end
</code></pre>
}} |
"
26056,Redmine,Defect,NA,Closed,Normal,"Existing closed bug , can't re-open from Redmine!!",Pradeep Garg,NA,2017-06-19T13:42:00Z,Issues,NA,NA,NA,NA,0,2017-05-29T08:37:00Z,2017-06-19T13:42:00Z,NA,Invalid,3.1.3,"I found an issue in my project during testing , and it was fixed then verified/closed by me.
But same issue again observed in next build. So, want to re-open existing bug, but there were no option for re-open that issue.
And that status field was mandatory, without fill anything there, i will be able to update an issue.

Attached snapshot for detailed Information!!"
26057,Redmine,Defect,NA,Closed,Normal,Cannot add related issue in IE11,Marc de Kleijn,NA,2017-05-31T21:30:00Z,Issues,NA,NA,NA,NA,0,2017-05-29T11:24:00Z,2017-05-31T21:30:00Z,NA,Invalid,NA,I can't add a related issue to an existing issue in Internet Explorer 11. In Chrome it works fine. See enclosed screen print.
26058,Redmine,Defect,NA,Closed,Normal,Cannot create Plugin Tables in Development Environment,Bitaseme M,NA,2017-05-29T19:40:00Z,NA,NA,NA,NA,NA,0,2017-05-29T13:13:00Z,2017-05-29T15:44:00Z,NA,Invalid,NA,"Following the plugin tutorial [[Plugin_Tutorial]]

I tried creating a plugin and when I get to the step that creates the database table, all the console says is migrating. When I go look at the development database I do not see the plugin table.

I hope this can be fixed as it seems unusual that I cannot test my full redmine environment in development mode. I like development due to all the detailed logging I get in the console on every action."
26063,Redmine,Defect,NA,Closed,High,"Users can assign a user/group which is not a member of current project, or even a user that doesn't exist",Vincent C.,NA,2017-05-29T15:42:00Z,Issues,NA,NA,NA,NA,0,2017-05-29T14:55:00Z,2017-05-29T15:42:00Z,関連している #23921,Fixed,3.2.0,"Hello !

<pre>
Tested on Redmine 3.2.0
</pre>

_(I consider it as a bug, but it may be standard behaviour, which would be a really strange design decision)_

I discovered this after receiving a report that the group which was assigned on an issue couldn't see it. This was normal, because the group was not a member of the related project. But I don't know how the issue could have been assigned to this group since only project members are assignable (even after investigating, I still don't know how it could have happened).

So I uninstalled all plugins on my integration environment, to avoid any plugin-related strange behaviour which could cause that. Then tried to replace the currently assigned user/group ID directly in HTML page (with Chrome ""Inspect Element""), just to see if it was a client or server side problem. This led me to this bug report :

- When replacing with the ID of *another user/group from same project*, the issue is saved normally, and the issue is assigned to given group _(this is standard behaviour)_
- When replacing by the ID of *a user/group which is NOT a member of the project*, +it also works+ _(*this should not work*. Even though assigned user/group can't see the issue, it shouln't even be assignable in the first place)_
- When replacing by the ID of *a group which is un-assignable globally* _(= has only an un-assignable role)_, +it also works+
- When replacing by the ID of *a non-existing user/group*, +it also works+ _(when the issue is saved, the current assignee is just set to """" in web page, and the given ID is set in database)_

!https://redmine.org/attachments/download/18421/!

This doesn't seem to be the proper way it should be working.
It also allows user/group listing across the entire Redmine instance, which could be considered as a security threat.


PS : I can't test on a more recent version than 3.2.0 ATM, sorry for that. _(it takes 10 sec to reproduce, just inspect element with Chrome, set ID to ""9999999"" for currently selected option, and save issue)_"
26066,Redmine,Defect,NA,New,Normal,Selenium::WebDriver doesn't work with current version of Firefox,Pavel Rosick?,NA,2017-05-29T16:48:00Z,Gems support,NA,NA,NA,NA,0,2017-05-29T16:48:00Z,NA,NA,NA,NA,"selenium-webdriver version was locked in order to support outdated Ruby 1.9.3 #24092
could you allow selenium-webdriver 3.4.0 if Ruby 2.0+ is used? I'm getting this error because of it:

Selenium::WebDriver::Error::WebDriverError:
  unable to obtain stable firefox connection in 60 seconds (127.0.0.1:7055)

Firefox 53.0.3
(selenium-webdriver 3.4.0 solves the problem)

thanks

"
26067,Redmine,Defect,NA,Closed,Normal,Redmine service running but unable to access it on browser,Ashay Maheshwari,NA,2017-05-30T07:17:00Z,NA,NA,NA,NA,NA,0,2017-05-30T06:35:00Z,2017-05-30T07:17:00Z,NA,Invalid,NA,"Hello. I installed redmine on ubuntu 14.04 following the instructions given [[https://gist.github.com/wenzhixin/4650802f442d020cd332]].

I have a redmine service running - 
<pre>
someoe@machine:~$ sudo start -v redmine
redmine start/running, process 19402
</pre>

I am willing to run redmine behind nginx and I copied the contents in /usr/share/nginx/html here it is -
<pre>
someone@machine:~$ ls /usr/share/nginx/html/
50x.html  index.html  redmine  www
</pre>

Still I am not able to see redmine home page or management console.


"
26072,Redmine,Defect,NA,Closed,Normal,Set default assignee before validation,Felix Sch?fer,Jean-Philippe Lang,2017-06-07T21:34:00Z,Issues,3.2.7,NA,NA,NA,0,2017-05-30T17:52:00Z,2017-06-07T21:34:00Z,関連している #482,Fixed,3.3.3,"Currently the default assignee is set only after validations. This means that when the field is required the default assignee does not work.

The following patch changes setting the default assignee to before the validation:

<pre><code class=""diff"">
diff --git a/app/models/issue.rb b/app/models/issue.rb
index 7d411fc94..a5ebfbffa 100644
--- a/app/models/issue.rb
+++ b/app/models/issue.rb
@@ -105,8 +105,8 @@ class Issue < ActiveRecord::Base
     end
   }
 
+  before_validation :default_assign, on: :create
   before_validation :clear_disabled_fields
-  before_create :default_assign
   before_save :close_duplicates, :update_done_ratio_from_issue_status,
               :force_updated_on_change, :update_closed_on, :set_assigned_to_was
   after_save {|issue| issue.send :after_project_change if !issue.id_changed? && issue.project_id_changed?}
</code></pre>"
26075,Redmine,Defect,NA,Closed,Normal,Redmine 3.3.3 - stable - scrollbar missing in Chrome,Bintintan Andrei,NA,2017-05-31T14:55:00Z,UI,NA,NA,NA,NA,0,2017-05-31T13:04:00Z,2017-05-31T14:55:00Z,NA,Invalid,NA,"Hi, 

I've just upgraded to 3.3.3 and I have a very strange side-effect. 
The scrollbar is missin on some pages (wiki, issues) etc... it happens only in google chrome. In FF it looks right.
I use a different theme but with the original one is the same issue. 

Any ideas? See screenshots. 
<pre>
Environment:
  Redmine version                3.3.3.stable.16584
  Ruby version                   2.2.3-p173 (2015-08-18) [x86_64-li
  Rails version                  4.2.7.1
  Environment                    production
  Database adapter               Mysql2
SCM:
  Subversion                     1.9.3
  Git                            2.7.4
  Filesystem
Redmine plugins:
  redmine_agile                  1.4.3
  redmine_ckeditor               1.1.2
  redmine_impersonate            0.10.0
  redmine_lightbox2              0.3.2
  redmine_per_project_formatting 0.0.3
  wiki_issue_fields              0.5.1

</pre>

"
26078,Redmine,Defect,NA,Closed,Normal,List of issues per assignee doesn't match in profile,Juan Carlos Massanet,NA,2017-06-02T07:54:00Z,Issues filter,NA,NA,NA,NA,0,2017-05-31T16:37:00Z,2017-06-02T07:54:00Z,"関連している #3398, 関連している #13758, 次のチケットと重複 #25212",Duplicate,3.2.0,"Hello,

Regarding this feature: #8153
The amount of issues assigned to the user that can be found in his profile shows a different number than when we click the ""Assigned issues"" link. 
After some tests I figured out that the counter in the user profile is taking into account issues assigned to any group the user belongs to. However when we click in to the link ""Assigned issues"" we only see the issues that are assigned to the user.

Is there any whay to make this match?

Is there any way to see the list of issues to assigned to a particular user and the group his belogns to?

"
26079,Redmine,Defect,NA,Needs feedback,Normal,Impossible to add member to a project,Fabrice ROBIN,NA,2017-06-13T16:16:00Z,Project settings,NA,NA,NA,NA,0,2017-05-31T17:02:00Z,NA,NA,NA,3.3.3,"
no way to add members to 1 specific project.

Go to https://redmine.xxx.xxx/projects/advertising_as/settings/members
click on link https://redmine.xxx.xxx/projects/advertising_as/memberships/new to add members.

The popup is not displayed on Firefox (53.0.2).
It is displayed on Chrome.

This works on other projects. 
It seems to be due to the underscore in the identifier. 
It is the same with dashes in the project identifier.
"
26084,Redmine,Defect,NA,Needs feedback,Normal,In my Overview coloumn did n't show bugs count.,manikishore goli,NA,2017-06-15T09:58:00Z,NA,NA,NA,NA,NA,0,2017-06-01T14:58:00Z,NA,NA,NA,NA,"
In my redmine setup when i allocate a project to specific person then overview column shows all zeros(check first attachment). Please consider this  request is high priority."
26085,Redmine,Defect,NA,Needs feedback,Normal,Subtasks are not assigning to correct parent,Mark Wintch,NA,2017-06-01T21:45:00Z,Issues,NA,NA,NA,NA,0,2017-06-01T17:28:00Z,NA,NA,NA,3.3.0,"To replicate the issue one needs to:
* 1. Create a level 1 issue.  This will be the parent of all other issues.  Let's call it Issue #100
* 2. Then create any number greater than 1 subtasks of that parent.  We will create five and say they are issue ID's 110, 120, 130, 140, and 150.
* 3. Now under issue ID create a subtask with issue ID 111.  That will work fine.
* Here comes the problem:
* 4. Move 111 to 150 and it will be abandoned.
* 5. Move 111 to 140 and it will say 140 is the parent, but it will actually be placed under 150.

Looking at the issues table in SQL the problem seems to be that the lft and rgt fields do not increment when adding the new subtask to a new parent that did not have tasks previously.  So, the new task fails over to the next available range of lft rgt bounds.  If there is no parent to that range then the issue is orphaned, otherwise it assigns the issue to the next range available, but not the one that the user desires even though the application will say the tasks is a child of the correct parent.

---

Our current workaround is as follows using the example from above:
Edit issue 140 or 150 whichever you are working with as follows.  Remove the parent of 100 and set it to blank and save. Then edit issue 111 so that it has no parent and save it.  Go back to issue 140 or 150 and set the parent to 100 and save it.  Then go to issue 111 and assign to either 140 or 150 and it will now work. 

<pre>
Environment:
  Redmine version                3.3.0.stable
  Ruby version                   2.1.8-p440 (2015-12-16) [x64-mingw32]
  Rails version                  4.2.6
  Environment                    production
  Database adapter               SQLServer
SCM:
  Filesystem
Redmine plugins:
  redmine_agile                  1.4.1
</pre>
"
26087,Redmine,Defect,NA,New,Normal,<pre></pre> with included URL is displayed wrongly,Bernhard Donaubauer,NA,2017-06-02T08:09:00Z,NA,NA,NA,NA,NA,0,2017-06-02T07:59:00Z,NA,NA,NA,3.3.1,"
If I enter this textile line 

<pre>svn co https://intra.bayerwald-fenster.de/svn/intra/yucatan_conturex_anbindung/trunk conturex</pre>

in the wiki it is displayed as

svn co <a class=""external"" href=""https://intra.bayerwald-fenster.de/svn/intra/yucatan_conturex_anbindung/trunk"">https://intra.bayerwald-fenster.de/svn/intra/yucatan_conturex_anbindung/trunk</a> conturex

on the resulting page.

BTW: If i enter a space before the <pre> tag it is displayed as intended."
26089,Redmine,Defect,NA,Closed,Normal,Plugin Issue,Kashif Mukhtar,NA,2017-06-02T13:48:00Z,NA,NA,NA,NA,NA,0,2017-06-02T13:20:00Z,2017-06-02T13:48:00Z,NA,Invalid,NA,"I have installed redmine_timesheet_plugins for managing issues time of users.I have getting internal server error 500 while downloading csv.I am downloading all previous month csv's but getting error on downloading last month May CSV.When i download csv its redirect me internal server 500 error.Can you suggest me the solution.Its bit urgent.

"
26090,Redmine,Defect,NA,New,Normal,Some small issues found during review of r16029 for #24407.,Mischa The Evil,Mischa The Evil,2017-06-25T11:09:00Z,Translations,3.4.1,NA,NA,NA,0,2017-06-02T15:31:00Z,NA,関連している #24407,NA,NA,"I started a review of r16029 for ? great ? issue #24407 some time ago and found some small issues, which I noted (using old-style pencil and paper). I wasn't able to complete this review and post my findings properly though.

I will complete the review and post my findings (have to look-up that piece of paper) before version#119 gets released (the version which will include the changes from r16029). Meanwhile I post this issue as a placeholder and personal reminder."
26091,Redmine,Patch,NA,New,Normal,Allow to filter by any visible version on the global issues view,Holger Just,NA,2017-06-26T14:46:00Z,Issues filter,Unplanned,NA,NA,NA,0,2017-06-02T17:52:00Z,NA,NA,NA,NA,"Currently, the global issues view only allows to filter by system-shared versions but not e.g. for versions shared to some projects or not stared at all.

Since the global issue view is often used as a quick filter to check what is happening in all projects, filtering by any visible version would allow to drill down from there instead of having to first select the correct parent project and then starting the filter there. Also, with saved shared queries, a common starting point is the global issue view instead of individual projects.

The attached patch removes the restriction to only allow filtering by system-shared versions. Instead, it allows filtering by any version visible to the current user."
26098,Redmine,Defect,NA,Closed,Low,Can not save with vietnamese character,Ky Nguyen,NA,2017-06-06T07:20:00Z,Issues,NA,NA,NA,NA,0,2017-06-06T06:36:00Z,2017-06-06T07:20:00Z,NA,Invalid,NA,"- I can not save issues, project, comment... with vietnamese character"
26104,Redmine,Patch,NA,New,Normal,Quick jump to issue only if searching for issues,Holger Just,NA,2017-06-25T17:03:00Z,Search engine,Candidate for next minor release,NA,NA,NA,0,2017-06-06T15:31:00Z,NA,NA,NA,NA,"Previously, we would always jump to the issue if a user searches for a, number which exists as an issue ID, regardless where the user searches. That made it impossible to search for e.g. prefixes of phone numbers in wiki pages.

With the attached patch, we are only jumping to the matching issue if we are searching for issues. This results in a behavior change for the quick search box in the the wiki and other areas. Previously, we would also jump to an issue there. Now, we just search in the wiki for the number.

The quick search bar in issues as well as the global search for all objects is unaffected by this change."
26122,Redmine,Patch,NA,New,Normal,Implementation of visible conditions with inner join instead of subselect,Pavel Rosick?,NA,2017-06-09T08:57:00Z,Performance,NA,NA,NA,NA,0,2017-06-07T22:51:00Z,NA,NA,NA,NA,"The change from #21608 should be reverted because it's a speed regression:

1/ current version
<pre>EXISTS (SELECT 1 AS one FROM enabled_modules em WHERE em.project_id = projects.id AND em. NAME = 'issue_tracking')</pre>

2/ previous version (actually faster even without an index on enabled modules)
<pre>projects.id IN (SELECT project_id FROM enabled_modules em WHERE em.project_id = projects.id AND em. NAME = 'issue_tracking'</pre>

3/ fastest version (in some cases better indexes were used)
<pre>INNER JOIN `enabled_modules` ON `enabled_modules`.`project_id` = `projects`.`id` WHERE `enabled_modules`.`name` = 'issue_tracking'</pre> or
<pre>INNER JOIN `enabled_modules` ON `enabled_modules`.`project_id` = `projects`.`id` AND `enabled_modules`.`name` = 'issue_tracking'</pre>

Patches:
* revert of #21608, because the previous version was faster (about 30%)
* new index ""enabled_modules_name"", but it's not very helpful unless you have many projects (3000+)
* implementation of visible conditions with inner join instead of subselect, it passes all tests, but it should be refactored. I want to know what do you think about it first

<pre>
Rails version             4.2.8
Ruby version              2.1.9-p490 (x64-mingw32)
RubyGems version          2.6.12
Rack version              1.6.8
Middleware                Rack::Sendfile, Rack::ContentLength, ActionDispatch::Static, Rack::Lock, #<ActiveSupport::Cache::Strategy::LocalCache::Middleware:0x00000007745610>, Rack::Runtime, Rack::MethodOverride, ActionDispatch::RequestId, Rails::Rack::Logger, ActionDispatch::ShowExceptions, ActionDispatch::DebugExceptions, ActionDispatch::RemoteIp, ActionDispatch::Reloader, ActionDispatch::Callbacks, ActiveRecord::ConnectionAdapters::ConnectionManagement, ActiveRecord::QueryCache, ActionDispatch::Cookies, ActionDispatch::Session::CookieStore, ActionDispatch::Flash, ActionDispatch::ParamsParser, ActionDispatch::XmlParamsParser, Rack::Head, Rack::ConditionalGet, Rack::ETag, RequestStore::Middleware, OpenIdAuthentication
Environment               development
Database adapter          mysql2
Database schema version   20170607051650
</pre>"
26124,Redmine,Defect,NA,Closed,Normal,Error 404 when trying to download issue-attached file with url-encoded link,Andrey Iskousnykh,NA,2017-06-08T19:10:00Z,NA,NA,NA,NA,NA,0,2017-06-08T17:53:00Z,2017-06-08T19:10:00Z,NA,Invalid,3.3.0,"Issue appears when I try to download file, that is attached to issue and which name contains non-latin chars (russian letters). Somehow file name become corrupted during get request.
Here log parts:
Upload request (OK)
<pre>
Started POST ""/redmine/uploads.js?attachment_id=1&filename=Scan10001%20%E2%80%94%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%8F.jpg&content_type=image%2Fjpeg"" for 127.0.0.1 at 2017-06-07 18:02:43 +0300
Processing by AttachmentsController#upload as JS
  Parameters: {""attachment_id""=>""1"", ""filename""=>""Scan10001 ? копия.jpg"", ""content_type""=>""image/jpeg""}
  Current user: NK (id=3)
Saving attachment 'C:/BitNami/redmine-3.3.0-1/apps/redmine/htdocs/files/2017/06/170607180244_6da4361f84cca44f87c91e3fe3171a32.jpg' (966578 bytes)
  Rendered attachments/upload.js.erb (0.0ms)
Completed 200 OK in 129ms (Views: 0.0ms | ActiveRecord: 80.0ms)
</pre>
File and db-record are both fine.
Failed download request:
<pre>
Started GET ""/redmine/attachments/download/1452/Scan10001%20‥94%20копия.jpg"" for 127.0.0.1 at 2017-06-07 18:02:51 +0300
Processing by AttachmentsController#download as HTML
  Parameters: {""id""=>""1452"", ""filename""=>""Scan10001 \xE2\x80\x94 \xD0\xBA\xD0\xBE\xD0\xBF\xD0\xB8\xD1\x8F.jpg""}
  Current user: NK (id=3)
  Rendered common/error.html.erb within layouts/base (0.0ms)
Filter chain halted as :find_attachment rendered or redirected
Completed 404 Not Found in 47ms (Views: 15.6ms | ActiveRecord: 15.6ms)
</pre>
Even log record is corrupted, printscreen of notepad++ attached (unprintable chars present):
!prntscr1.PNG!

HTML-anchor in issue looks fine.

My environment:
Redmine is installed using @Bitnami Redmine Stack@.
<pre>
Environment:
  Redmine version                3.3.0.stable
  Ruby version                   2.1.8-p440 (2015-12-16) [i386-mingw32]
  Rails version                  4.2.6
  Environment                    production
  Database adapter               Mysql2
</pre>"
26125,Redmine,Patch,NA,Closed,Normal,Unify form#query_form on calendar/gantt views with issues/spent time views,Mischa The Evil,Jean-Philippe Lang,2017-06-25T17:17:00Z,UI,3.5.0,NA,NA,NA,0,2017-06-09T00:05:00Z,2017-06-25T17:17:00Z,NA,NA,NA,"I noticed a difference between the rendering of the query filter forms on the issues & spent time views and the query filter forms on the calendar and gantt views. I fixed it with the following changes:
* *1. Fix HTML structure of form#query_form on calendar/gantt views.*
This unifies the HTML structure of the query form on the calendars/show
and gantts/show views to be the same as it is currently for the issues
and spent time views, which were themself unified into the new
queries/_query_form partial in r15649.
* *2. Fix source indentation and newline usage.*
This unifies the source layout of the query form on the calendars/show
and the gantts/show views with the queries/_query_form partial.
* *3. Unify form#query_form structure on calendar/gantt views.*
This:
** moves the p with inline style on the calendar view (which
wraps the navigation buttons) out of div#query_form_content
and adds the contextual class to the element to unify this
with the gantt view (and to remove the inline style from
the element now that it's styled through a stylesheets'
style [.contextual in fact]);
** restores the 12px font-size of the calendar navigation
buttons;
** increases the font-size of the gantt zoom buttons to 12px;
** increases the margin of the calendar navigation and gantt
zoom buttons to 12px 0px.
* *4. Add test assertions to the four controller test cases.*

To make the changes a bit more visual, here some ASCII and image graphics:

|_.view    |_.was       |_.becomes   |
|issues    |<pre>  form#query_form
    inputs
    div#query_form_with_buttons.hide-when-print
      div#query_form_content
        fieldset#filters.collapsible
        fieldset#options
      p.buttons</pre> |<pre>  form#query_form
    inputs
    div#query_form_with_buttons.hide-when-print
      div#query_form_content
        fieldset#filters.collapsible
        fieldset#options
      p.buttons</pre> |
|          |!issues-current.png!       |!issues-fixed.png!      |
|spenttime |<pre>  form#query_form
    inputs
    div#query_form_with_buttons.hide-when-print
      div#query_form_content
        fieldset#filters.collapsible
        fieldset#options
      p.buttons</pre> |<pre>  form#query_form
    inputs
    div#query_form_with_buttons.hide-when-print
      div#query_form_content
        fieldset#filters.collapsible
        fieldset#options
      p.buttons</pre> |
|          |!spenttime-current.png!       |!spenttime-fixed.png!       |
|calendar  |<pre>  form#query_form
    inputs
    fieldset#filters.collapsible
    p(inlineStyles)
    p.buttons</pre> |<pre>  form#query_form
    inputs
    div#query_form_with_buttons.hide-when-print
      div#query_form_content
        fieldset#filters.collapsible
      p.contextual
      p.buttons</pre> |
|          |!calendar-current.png!       |!calendar-fixed.png!       |
|gantt     |<pre>  form#query_form
    inputs
    fieldset#filters.collapsible
    fieldset#options
    p.contextual
    p.buttons</pre> |<pre>  form#query_form
    inputs
    div#query_form_with_buttons.hide-when-print
      div#query_form_content
        fieldset#filters.collapsible
        fieldset#options
      p.contextual
      p.buttons</pre> |
|          |!gantt-current.png!    |!gantt-fixed.png!       |

I'll attach four patches implementing these changes. This patch serial, against current source:/trunk@16643, is produced using @git format-patch@ which makes the individual patches apply-able using ""@patch -p1 < 0001-...@"".

Environment:
<pre>
Environment:
  Redmine version                3.3.3.devel@r16643
  Ruby version                   2.3.3-p222 (2016-11-21) [x86_64-linux]
  Rails version                  4.2.8
  Environment                    production
  Database adapter               Mysql2
SCM:
  Subversion                     1.8.8
  Git                            1.9.1
  Filesystem                     
Redmine plugins:
  no plugin installed
</pre>
"
26129,Redmine,Defect,NA,Closed,Normal,"Email notification function problem,",James Lai,NA,2017-06-09T14:44:00Z,Email notifications,NA,NA,NA,NA,0,2017-06-09T12:26:00Z,2017-06-09T14:43:00Z,NA,Duplicate,NA,"We came across  a problem during the using of Redmine : mail notification can't be triggered in two Issues of one Project, but we got mail notification before, and there is no similiar situation in other Issues. We want to know, is this a bug in Redmine? BTW, the fuction went normal after we copy the Issues into a new one, but the original Issues still got this problem. Please help to check it,thanks!

Environment:
  Redmine version                3.3.2.stable
  Ruby version                   2.3.2-p217 (2016-11-15) [x86_64-linux]
  Rails version                  4.2.7.1
  Environment                    production
  Database adapter               Mysql2
SCM:
  Subversion                     1.7.14
  Git                            1.8.3.1
  Filesystem                     
Redmine plugins:
  _query                         0.0.2
  clipboard_image_paste          1.10
  easy_wbs                       2016-0.0
  redmine_agile                  1.4.2
  redmine_ckeditor               1.1.4
  redmine_contacts               4.0.6
  redmine_custom_workflows       0.1.6
  redmine_dashboard              2.7.1
  redmine_dmsf                   1.5.8
  redmine_favorite_projects      2.0.3
  redmine_knowledgebase          3.2.1"
26130,Redmine,Patch,NA,Closed,Normal,"Refactor ""multiple_values_detail"" struct creation",Thomas L?ber,Jean-Philippe Lang,2017-06-26T05:55:00Z,Code cleanup/refactoring,3.5.0,NA,NA,NA,0,2017-06-09T14:42:00Z,2017-06-25T21:24:00Z,NA,NA,NA,"Hi,

In the ""IssuesHelper#details_to_strings"":/projects/redmine/repository/entry/trunk/app/helpers/issues_helper.rb method (source:trunk/app/helpers/issues_helper.rb@16387#L373) a new class (Struct) is created each time the method is called:

<pre><code class=""ruby"">
  multiple_values_detail = Struct.new(:property, :prop_key, :custom_field, :old_value, :value)
</code></pre>

Although classes are garbage collected in recent Ruby versions, it might be better to use a constant definition outside the method, like:

<pre><code class=""ruby"">
  MultipleValuesDetail = Struct.new(:property, :prop_key, :custom_field, :old_value, :value)
</code></pre>

Regards,
Thomas"
26132,Redmine,Defect,NA,Closed,Normal,Redmine site cannot be displayed in an iframe,CM Gui,NA,2017-06-10T07:16:00Z,Administration,NA,NA,NA,NA,0,2017-06-09T20:52:00Z,2017-06-10T07:04:00Z,NA,Invalid,3.3.0,"We used to be able to display our Redmine site in an iframe.    But after upgrading to 3.3.0 last September, we are unable to display our site in an iframe.   We get this error from the browser: ""To help protect the security of information you enter into this website, the publisher of this content does not allow it to be displayed in a frame.""
Is there any way we can make our Redmine site display in an iframe again?
Thank you very much.
"
26136,Redmine,Patch,NA,Closed,Normal,Japanese translation update (r16538),Go MAEDA,NA,2017-06-12T06:01:00Z,Translations,NA,NA,NA,NA,0,2017-06-12T02:32:00Z,2017-06-12T06:01:00Z,NA,NA,NA,Translated setting_show_custom_fields_on_registration introduced in r16538.
26139,Redmine,Patch,NA,Reopened,Normal,Follow Gemfile's plugin loader as #24007,Sho HASHIMOTO,Jean-Philippe Lang,2017-06-18T13:57:00Z,Plugin API,NA,NA,NA,NA,0,2017-06-12T11:31:00Z,2017-06-17T09:31:00Z,"関連している #13927, ブロックしている #24007",NA,NA,Plugin's Gemfile can't settable from Redmine::Plugin.directory yet.
26145,Redmine,Defect,NA,Closed,Normal,Don't redirect anonymous users to the login form for disabled modules,Adam Clark,Jean-Philippe Lang,2017-06-26T23:09:00Z,Permissions and roles,3.5.0,NA,NA,NA,0,2017-06-12T23:41:00Z,2017-06-26T23:09:00Z,NA,Fixed,2.5.2,"The use case is that a project enables a module (the Files module is the one we encountered) but later turns it off. If there are stray links to that URL, these generate a 403 error, which for anonymous users redirects to the login/registration page.

In our case, we had projects that served files publicly, then moved these to another location and turned off the Files module. The result is we now get a lot of spurious registration requests from users who are trying to download these files, because to the user it looks like the site is asking them to register before they can access the files.

I was able to address our immediate problem by patching ApplicationController.authorize to check whether the request is associated with a disabled project module, and redirect to the main project page in that case. I'm not sure how correct this code is (I don't know the Redmine internals all that well) and I know that this doesn't work for some modules (eg. Issues) which apparently operate through some other method. So this code is just for illustration, I guess.

<pre><code>
    def authorize_with_custom(ctrl = params[:controller], action = params[:action], global = false)
      allowed = User.current.allowed_to?({:controller => ctrl, :action => action}, @project || @projects, :global => global)
      if allowed
        true
      else
        if @project
          logger.debug 'Handling auth error for ' + ctrl + '/' + action

          # Figure out whether the permission for this path is handled by a module
          project_module = Redmine::AccessControl.permissions.select {|p| p.actions.include?(ctrl + '/' + action)}.first.try(:project_module)
          logger.debug 'Permission module is ' + project_module.to_s

          # If it is a module, and the module isn't enabled in this project, try to redirect to the main project page
          if project_module && !@project.module_enabled?(project_module)
            can_view_project = User.current.allowed_to?({:controller => :projects, :action => :show}, @project)
            logger.debug 'Can the user view the main project page? ' + can_view_project.to_s
            if can_view_project
              redirect_to project_path(@project)
              return false
            end
          end
        end
        if @project && @project.archived?
          render_403 :message => :notice_not_authorized_archived_project
        else
          deny_access
        end
      end
    end
</code></pre>"
26149,Redmine,Patch,NA,Closed,Normal,Remove duplicate method shell_quote,Jens Kr?mer,Jean-Philippe Lang,2017-06-17T09:43:00Z,Code cleanup/refactoring,3.4.0,NA,NA,NA,0,2017-06-13T08:38:00Z,2017-06-17T09:43:00Z,NA,NA,NA,"There are two identical methods @shell_quote@ declared in @Redmine::Utils::Shell@ and @Redmine::Scm::Adapters::AbstractAdapter@.

This patch removes the duplicate declaration from @AbstractAdapter@ and also extracts a generic @shell_quote_command@ method into @Redmine::Utils::Shell@."
26156,Redmine,Defect,NA,Closed,Normal,Spent time not working correctly with user's zone different from system's time zone,Martin Jungowski,NA,2017-06-13T18:51:00Z,Time tracking,NA,NA,NA,NA,0,2017-06-13T18:19:00Z,2017-06-13T18:51:00Z,次のチケットと重複 #16482,Duplicate,3.3.3,"I've found a weird bug after updating from Redmine 3.1.1 to 3.3.3: time tracking is broken and somehow dependent on individual time zone and language preference.

Our Redmine server is located in central Europe (CEST, or GMT+1), I am located in Texas (CT, or GMT-6). When I set my personal timezone accordingly in ""My account"", time entries under ""spent time"" are not showing up properly anymore. Instead, to see today's time entries I have to select ""yesterday"" from the dropdown menu, and to see this week's time entries I have to select ""last week"". And to make matters worse it somehow also depends on my personal language preference configured under ""My account"" as well:

# time zone GMT+1, language German
** all good; see attached screenshots 1_de_cest_today & 2_de_cest_thisweek. This is what I expect to see regardless of time zone and language.
# time zone GMT-6, language German
** today = yesterday; see 3_de_ct_today & 4_de_ct_yesterday,
** this week = broken, monday is missing and can be found in last week's view; see 5_de_ct_thisweek & 6_de_ct_lastweek
# time zone GMT-6, language English
** today = yesterday, same behavior as in 2
** this week = working, monday showing up as expected, see 7_en_ct_thisweek & 8_en_ct_lastweek

This has only started after the update from Redmine 3.1.1 to 3.3.3 yesterday, it was all working perfectly fine until just yesterday. I also have to add that this happens independent of time and date. The time and date, when those screenshots were taken:

CEST in Europe: 6/13/2017, 6:00pm
CT in Texas: 6/13/2017, 11:00am

I've tried this yesterday as well when it was around 10pm in Europe and 3pm in Texas, and later also when it was 6pm in Texas but already 1am the next day in Europe. Results were the same.

System info:

<pre>
sh: 1: svn: not found
sh: 1: darcs: not found
sh: 1: hg: not found
sh: 1: cvs: not found
sh: 1: bzr: not found
Environment:
  Redmine version                3.3.3.stable
  Ruby version                   2.3.1-p112 (2016-04-26) [x86_64-linux-gnu]
  Rails version                  4.2.7.1
  Environment                    production
  Database adapter               Mysql2
SCM:
  Git                            2.7.4
  Filesystem                     
Redmine plugins:
  localizable                    0.4.0
  projects_table                 0.0.4
  redmine_agile                  1.4.3
  redmine_base_deface            0.0.1
  redmine_base_select2           0.0.1
  redmine_contacts               4.0.2
  redmine_contacts_helpdesk      3.0.7
  redmine_multiprojects_issue    3.3.0
  redmine_theme_changer          0.2.0
  sidebar_hide                   0.0.8
</pre>

I've tested it with all plugins disabled and all themes removed, and it behaved the same. Something seems to be broken somewhere somehow."
26157,Redmine,Patch,NA,Closed,Normal,Render all possible inline textile images,Holger Just,Jean-Philippe Lang,2017-06-17T09:45:00Z,Text formatting,3.4.0,NA,NA,NA,0,2017-06-13T18:58:00Z,2017-06-17T09:45:00Z,NA,NA,NA,"In r15433, Redmine introduced a security measure to restrict embedding images to only those with valid schemes from Textile.

Now, if there are multiple images referenced on a page, with only one of them invalid, Redmine currently doesn't create @<img>@ tags for any of them since it would return from the replacement method too soon.

This patch fixes this behavior in that it still allows to embed all valid images and only refuses to embed the invalid ones by skipping the rest of the current @gsub@ iteration instead of the whole method. The patch was extracted from ""Planio"":https://plan.io/redmine-hosting/"
26180,Redmine,Patch,NA,Closed,Normal,"Change Russian translation for ""Estimated time""",Ivan Ilyukhin,NA,2017-06-23T11:33:00Z,Translations,3.4.0,NA,NA,NA,0,2017-06-16T16:34:00Z,2017-06-22T15:37:00Z,NA,NA,NA,Fix translation for field_total_estimated_hours
26183,Redmine,Defect,NA,Closed,Normal,Use Nokogiri 1.7.2,Go MAEDA,Jean-Philippe Lang,2017-06-25T10:37:00Z,Security,3.2.7,NA,NA,NA,0,2017-06-17T11:45:00Z,2017-06-25T10:37:00Z,関連している #25538,Fixed,3.2.6,"Redmine 3.3-stable / 3.2-stable uses Nokogiri 1.6.8 but version from 1.6.8 from 1.7.1 has some security issues (see https://github.com/sparklemotion/nokogiri/blob/master/CHANGELOG.md for details).

Fixed in 1.7.2:

* CVE-2017-5029
* CVE-2016-4738

Fixed in 1.7.1:

* CVE-2016-4658
* CVE-2016-5131

We should use Nokogiri >= 1.7.2 but unfortunately it requires Ruby >= 2.1.0 (see r16167). The attached patch uses Nokogiri ~> 1.7.2 if RUBY_VERSION >= 2.1.0.

I received this report from ""Sho Hashimoto"":/users/284508."
26184,Redmine,Defect,NA,New,Urgent,how can i add my wiki page option in dropdown list of personalize this page as my page on redmine 3,sachin banugariya,NA,2017-06-17T13:12:00Z,Wiki,NA,NA,NA,NA,0,2017-06-17T13:12:00Z,NA,NA,NA,3.1.0,"hello,
i want to add my specific project wiki page as my redmine home page with dropdown option with that wiki name.

or if not possible in dropdown list then also ok i directly get on my home/my page of redmine with other redmine home page block.

thanks."
26187,Redmine,Patch,NA,Closed,Normal,Japanese translation update (label_no_preview_alternative_html),Go MAEDA,NA,2017-06-19T07:40:00Z,Translations,NA,NA,NA,NA,0,2017-06-18T09:07:00Z,2017-06-19T07:40:00Z,NA,NA,NA,Translated @label_no_preview_alternative_html@ added in r16673 (#26035).
26188,Redmine,Patch,NA,Closed,Normal,Documentation (detailed syntax help & code) additions/improvements,Mischa The Evil,Jean-Philippe Lang,2017-06-25T11:08:00Z,Documentation,3.4.0,NA,NA,NA,0,2017-06-18T13:52:00Z,2017-06-25T11:08:00Z,"関連している #4179, 関連している #9600, 関連している #13497, ブロックされている #21375",NA,NA,"Following #21375#note-11, I made four additional (code) documentation changes:

# -Complement external URL documentation.- +posted as #21375#note-11+
# Fix typo in detailed Japanse textile doc. (the closing angle bracket seems superfluous)
# Add user link documentation. (detailed syntax doc; this was still missing from #4179)
# Fix code doc indentation. (in @ApplicationHelper#parse_redmine_links@)
# Add code doc for forum & news links. (in @ApplicationHelper#parse_redmine_links@; this was missing from #9600)

I'll attach the four remaining patches implementing these changes. The patch serial, against current source:/trunk@16676, is produced using @git format-patch@ which makes it apply-able using ""@patch -p1 < 0001-...@"". This serial is a continuation of #21375#note-11 which includes patch 1/5 of this set, making these patches dependent on #21375#note-11 integration.
I'll also change the respective wiki pages accordingly when the patches have been committed.

Environment:
<pre>
Environment:
  Redmine version                3.3.3.devel@r16676
  Ruby version                   2.3.3-p222 (2016-11-21) [x86_64-linux]
  Rails version                  4.2.8
  Environment                    production
  Database adapter               Mysql2
SCM:
  Subversion                     1.8.8
  Git                            1.9.1
  Filesystem                     
Redmine plugins:
  no plugin installed
</pre>"
26214,Redmine,Defect,NA,Closed,Normal,How to Stop empty value records into custom_values table,suryan suryan,NA,2017-06-21T13:10:00Z,NA,NA,NA,NA,NA,0,2017-06-20T10:02:00Z,2017-06-21T13:10:00Z,NA,Invalid,NA,NA
26216,Redmine,Defect,NA,Closed,Normal,translation missing: en.label_x_open_issues_abbr_on_total,Uro? Malen?ek,NA,2017-06-20T18:52:00Z,NA,NA,NA,NA,NA,0,2017-06-20T18:22:00Z,2017-06-20T18:52:00Z,NA,Invalid,3.3.3,"On the Project overview page there is an 'Issue tracking' block that should display total count of the issues.

Expected (gues) info is:
  bugs: 4 open / 123
Actual:
  bugs: translation missing: en.label_x_open_issues_abbr_on_total

I am not sure if this is Redmine core or some plugin related.

It could be raleted with this commit:
http://source.dussan.org/commit/?r=mirrors/redmine.git&h=5812a373826dbabdf4bbb2160f3af1c7c4ad27dd"
26219,Redmine,Defect,NA,Closed,Normal,At start: multipart.rb warning: already initialized constant,Konstantin Nifanin,NA,2017-06-21T15:31:00Z,NA,NA,NA,NA,NA,0,2017-06-21T14:16:00Z,2017-06-21T15:31:00Z,NA,Invalid,NA,"Hello!

3 year my Redmine work, but now I get this messages at start redmine-deamon:

<pre>
[root@support ~]# /etc/init.d/redmine start
/etc/init.d/redmine: line 33: kill: (2395) - No such process
/usr/local/rvm/gems/ruby-1.8.7-head/gems/rack-1.6.4/lib/rack/multipart.rb:10: warning: already initialized constant EOL
/usr/local/rvm/gems/ruby-1.8.7-head/gems/rack-1.6.4/lib/rack/multipart.rb:11: warning: already initialized constant MULTIPART_BOUNDARY
/usr/local/rvm/gems/ruby-1.8.7-head/gems/rack-1.6.4/lib/rack/multipart.rb:12: warning: already initialized constant MULTIPART
/usr/local/rvm/gems/ruby-1.8.7-head/gems/rack-1.6.4/lib/rack/multipart.rb:13: warning: already initialized constant TOKEN
/usr/local/rvm/gems/ruby-1.8.7-head/gems/rack-1.6.4/lib/rack/multipart.rb:14: warning: already initialized constant CONDISP
/usr/local/rvm/gems/ruby-1.8.7-head/gems/rack-1.6.4/lib/rack/multipart.rb:15: warning: already initialized constant DISPPARM
/usr/local/rvm/gems/ruby-1.8.7-head/gems/rack-1.6.4/lib/rack/multipart.rb:16: warning: already initialized constant RFC2183
/usr/local/rvm/gems/ruby-1.8.7-head/gems/rack-1.6.4/lib/rack/multipart.rb:17: warning: already initialized constant BROKEN_QUOTED
/usr/local/rvm/gems/ruby-1.8.7-head/gems/rack-1.6.4/lib/rack/multipart.rb:18: warning: already initialized constant BROKEN_UNQUOTED
/usr/local/rvm/gems/ruby-1.8.7-head/gems/rack-1.6.4/lib/rack/multipart.rb:19: warning: already initialized constant MULTIPART_CONTENT_TYPE
/usr/local/rvm/gems/ruby-1.8.7-head/gems/rack-1.6.4/lib/rack/multipart.rb:20: warning: already initialized constant MULTIPART_CONTENT_DISPOSITION
/usr/local/rvm/gems/ruby-1.8.7-head/gems/rack-1.6.4/lib/rack/multipart.rb:21: warning: already initialized constant MULTIPART_CONTENT_ID
master failed to start, check stderr log for details
</pre>

I not update my programs and this Redmine installed other man. 

My Rudy is
<pre>
[root@support redmine]# ruby -v
ruby 1.8.7 (2014-01-28 patchlevel 376) [x86_64-linux]
[root@support redmine]# type ruby 
ruby is hashed (/usr/local/rvm/rubies/ruby-1.8.7-head/bin/ruby)
</pre>

But other versions I can't get: 

<pre>
[root@support redmine]# ruby bin/about
/var/www/redmine/config/boot.rb:4:in `require': no such file to load -- bundler/setup (LoadError)
	from /var/www/redmine/config/boot.rb:4
	from /var/www/redmine/config/application.rb:1:in `require'
	from /var/www/redmine/config/application.rb:1
	from /var/www/redmine/config/environment.rb:2:in `require'
	from /var/www/redmine/config/environment.rb:2
	from bin/about:4:in `require'
	from bin/about:4

</pre>

OS CentOS 6.6
PostgreSQL 9.3

What to hipping with this Redmine? How to fixed this ""already initialized constant""


"
26221,Redmine,Defect,NA,Closed,Normal,Update* Segmentation fault at migrate:db,Konstantin Nifanin,NA,2017-06-21T17:01:00Z,Ruby support,NA,NA,NA,NA,0,2017-06-21T16:42:00Z,2017-06-21T17:01:00Z,NA,Invalid,3.3.3,"Hello, again!

I need update my redmine 3.0.3 to 3.3.3.

I find instruction RedmineUpgrade, update ruby, backuping database and redmine directory.
But on command *bundle exec rake db:migrate RAILS_ENV=production* I get follow error:

<pre>

...
/usr/local/rvm/gems/ruby-2.4.0/gems/bundler-1.15.1/lib/bundler/cli/exec.rb:74:in `kernel_load'
/usr/local/rvm/gems/ruby-2.4.0/gems/bundler-1.15.1/lib/bundler/cli/exec.rb:27:in `run'
/usr/local/rvm/gems/ruby-2.4.0/gems/bundler-1.15.1/lib/bundler/cli.rb:360:in `exec'
/usr/local/rvm/gems/ruby-2.4.0/gems/bundler-1.15.1/lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'
/usr/local/rvm/gems/ruby-2.4.0/gems/bundler-1.15.1/lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'
/usr/local/rvm/gems/ruby-2.4.0/gems/bundler-1.15.1/lib/bundler/vendor/thor/lib/thor.rb:369:in `dispatch'
/usr/local/rvm/gems/ruby-2.4.0/gems/bundler-1.15.1/lib/bundler/cli.rb:20:in `dispatch'
/usr/local/rvm/gems/ruby-2.4.0/gems/bundler-1.15.1/lib/bundler/vendor/thor/lib/thor/base.rb:444:in `start'
/usr/local/rvm/gems/ruby-2.4.0/gems/bundler-1.15.1/lib/bundler/cli.rb:10:in `start'
/usr/local/rvm/gems/ruby-2.4.0/gems/bundler-1.15.1/exe/bundle:35:in `block in <top (required)>'
/usr/local/rvm/gems/ruby-2.4.0/gems/bundler-1.15.1/lib/bundler/friendly_errors.rb:121:in `with_friendly_errors'
/usr/local/rvm/gems/ruby-2.4.0/gems/bundler-1.15.1/exe/bundle:27:in `<top (required)>'
/usr/local/rvm/gems/ruby-2.4.0/bin/bundle:23:in `load'
/usr/local/rvm/gems/ruby-2.4.0/bin/bundle:23:in `<main>'
/usr/local/rvm/gems/ruby-2.4.0/bin/ruby_executable_hooks:15:in `eval'
/usr/local/rvm/gems/ruby-2.4.0/bin/ruby_executable_hooks:15:in `<main>'
Tasks: TOP => db:migrate => environment
(See full trace by running task with --trace)
Segmentation fault

</pre>

Segmentation fault - this is program problem. Or maybe... I'm doing something wrong?


My last Update-command:
<pre>

 1060  rvm --default use 2.4.0
 1061  gem install bundler
 1062  bundle install --without development test
 1063  less /usr/local/rvm/gems/ruby-2.4.0/extensions/x86_64-linux/2.4.0/pg-0.18.4/mkmf.log
 1064  yum help
 1065  yum provides *libpq-fe.h
 1066  yum install postgresql93-devel
 1067  bundle install --without development test
 1068  yum install libpq-dev
 1069  su - postgres
 1070  find . -name ""pg_config""
 1071  find / -name ""pg_config""
 1072  gem install pg -- --with-pg-config=/usr/pgsql-9.3/bin/pg_config
 1073  bundle install --without development test
 1074  bundle install --without development test --with-pg-config=/usr/pgsql-9.3/bin/pg_config
 1075  yum install postgresql-devel
 1076  bundle install --without development test 
 1077  ls
 1078  bundle exec rake generate_secret_token
 1079  du -sh /usr/local/rvm/gems/*
 1080  bundle exec rake db:migrate RAILS_ENV=production
 1081  export LANG=en_EN.utf8
 1082  bundle exec rake db:migrate RAILS_ENV=production
 1083  vi config/database.yml
 1084  bundle exec rake db:migrate RAILS_ENV=production
 1085  chkconfig redmine off
 1086  less /var/log/messages
 1087  history
</pre> 

My System:

<pre>
[root@support redmine]# ruby -v
ruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-linux]
[root@support redmine]# cat /etc/redhat-release 
CentOS release 6.6 (Final)
[root@support redmine]# rpm -qa| grep postgre
postgresql-devel-8.4.20-7.el6.x86_64
postgresql93-devel-9.3.17-1PGDG.rhel6.x86_64
postgresql93-libs-9.3.17-1PGDG.rhel6.x86_64
postgresql-libs-8.4.20-7.el6.x86_64
postgresql93-9.3.17-1PGDG.rhel6.x86_64
postgresql-8.4.20-7.el6.x86_64
postgresql93-server-9.3.17-1PGDG.rhel6.x86_64
</pre>




"
26238,Redmine,Defect,NA,Closed,Normal,Subtask changes the parent task situation,Paula medina Tavares,NA,2017-06-22T17:25:00Z,Projects,NA,NA,NA,NA,0,2017-06-22T16:58:00Z,2017-06-22T17:25:00Z,NA,Invalid,NA,"Subtask changes situation of parent task in some projects.

Example 1: 

http://chamados.publicacoesonline.com.br/issues/34737 - This task in that father project was not changed by the child task.

Example 2: 

http://chamados.publicacoesonline.com.br/issues/34746 - This task in that father project was changed by the child task.

Does project has configuration about this problem?
My company has a workfkow and it disrupts our routine.

Thanks!


"
26243,Redmine,Defect,NA,Closed,Normal,redmine 3.3 issue description textarea problem - shifted to the right side,Konstantin Ladutenko,NA,2017-06-26T17:13:00Z,NA,NA,NA,NA,NA,0,2017-06-23T10:52:00Z,2017-06-25T13:23:00Z,NA,Invalid,3.3.3,"Environment:
  Redmine version                3.3.3.stable.16680
  Ruby version                   2.2.6-p396 (2016-11-15) [x86_64-linux]
  Rails version                  4.2.7.1
  Environment                    production
  Database adapter               Mysql2

Problem screenshot is attached.
A local solution:

nano public/stylesheets/application.css

and add

#issue_description_and_toolbar .textoverlay-wrapper {width: 95%;}
#issue_description_and_toolbar .textoverlay {width: 95%;}


"
26247,Redmine,Defect,NA,Closed,Normal,Missing translation for email reminder when user sets language to 'auto',Micha? Siudyka,NA,2017-06-24T11:51:00Z,Email notifications,NA,NA,NA,NA,0,2017-06-23T15:23:00Z,2017-06-24T11:51:00Z,NA,Cant reproduce,3.2.6,There is missing translation when user sets language option to 'auto' for email reminder.
26259,Redmine,Defect,NA,Closed,Normal,The name of the attachment is not uniform,zhao Wang,NA,2017-06-26T08:18:00Z,NA,NA,NA,NA,NA,0,2017-06-26T07:44:00Z,2017-06-26T08:18:00Z,NA,Invalid,NA,"The pictures pasted with the redmine_image_clipboard_paste plugin are uploaded as attachments, and the names are not uniform
!?片20170626134042.png!
!?片20170626134304.png!"
26261,Redmine,Patch,NA,New,Normal,Updated Simplified Chinese translation file,Steven Wong,NA,2017-06-26T11:14:00Z,Translations,NA,NA,NA,NA,0,2017-06-26T11:14:00Z,NA,NA,NA,NA,"Simplified Chinese translation file updated for dev_20170625.
Please check the patch. Thanks.
"
26263,Redmine,Patch,NA,New,Normal,Simplified Chinese translation for 3.2-stable,Toshi MARUYAMA,NA,2017-06-26T14:37:00Z,Translations,3.2.7,NA,NA,NA,0,2017-06-26T14:37:00Z,NA,NA,NA,NA,"From #26261.

<pre><code class=""diff"">
=== (+2,-3) config/locales/zh.yml ===
@@ -1177,5 +1177,4 @@
   label_any_open_issues: 任意?行中的??
   label_no_open_issues: 任意已??的??
   label_default_values_for_new_users: 新用?默??
-  error_cannot_reassign_time_entries_to_an_issue_about_to_be_deleted: Spent time cannot
-    be reassigned to an issue that is about to be deleted
+  error_cannot_reassign_time_entries_to_an_issue_about_to_be_deleted: 已用耗?不能重新分配到即将被?除的任?里。
</code></pre>"
26264,Redmine,Patch,NA,New,Normal,Simplified Chinese translation for 3.3-stable,Toshi MARUYAMA,NA,2017-06-26T14:38:00Z,Translations,3.3.4,NA,NA,NA,0,2017-06-26T14:38:00Z,NA,NA,NA,NA,"From #26261.

<pre><code class=""diff"">
=== (+2,-3) config/locales/zh.yml ===
@@ -1199,6 +1199,5 @@
   label_new_project_issue_tab_enabled: ?示“新建??”??
   setting_new_item_menu_tab: 建立新?象条目的?目菜??目
   label_new_object_tab_enabled: ?示 ""+"" ?下拉列表
-  error_no_projects_with_tracker_allowed_for_new_issue: There are no projects with trackers
-    for which you can create an issue
+  error_no_projects_with_tracker_allowed_for_new_issue: 当前?目中不包含??的跟踪?型，不能?建??型的工作?。
   error_cannot_reassign_time_entries_to_an_issue_about_to_be_deleted: 已用耗?不能重新分配到即将被?除的任?里。
</code></pre>"
26265,Redmine,Patch,NA,New,Normal,Japanese translation update (r16691: user link documentation),Go MAEDA,NA,2017-06-26T15:03:00Z,Translations,NA,NA,NA,NA,0,2017-06-26T15:03:00Z,NA,NA,NA,NA,Translated user link documentation in public/help/ja/wiki_syntax_detailed_*.html.
26266,Redmine,Patch,NA,New,Normal,Russian translation for 3.4.0,Alexander Ryabinovskiy,NA,2017-06-26T18:52:00Z,Translations,NA,NA,NA,NA,0,2017-06-26T18:52:00Z,NA,NA,NA,NA,"Hi!
Here is translated ru.yml for Redmine 3.4.0. I created patch against r16698."
